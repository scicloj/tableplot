<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; Plotly walkthrough ðŸ‘£ â€“ Tableplot</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./tableplot_book.plotly_reference.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-971c433c8cf5f9f4c02e376b60212679.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tableplot_book.plotly_walkthrough.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Plotly walkthrough ðŸ‘£</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Tableplot</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface ðŸ‘‹</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tableplot_book.plotly_walkthrough.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Plotly walkthrough ðŸ‘£</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tableplot_book.plotly_reference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Plotly API reference ðŸ“–</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tableplot_book.hanami_walkthrough.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Hanami walkthrough ðŸ‘£</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tableplot_book.transpile_reference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Transpile API reference ðŸ“– - experimental ðŸ§ª</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup"><span class="header-section-number">2.1</span> Setup</a></li>
  <li><a href="#basic-usage" id="toc-basic-usage" class="nav-link" data-scroll-target="#basic-usage"><span class="header-section-number">2.2</span> Basic usage</a></li>
  <li><a href="#processing-overview" id="toc-processing-overview" class="nav-link" data-scroll-target="#processing-overview"><span class="header-section-number">2.3</span> Processing overview</a></li>
  <li><a href="#templates-and-parameters" id="toc-templates-and-parameters" class="nav-link" data-scroll-target="#templates-and-parameters"><span class="header-section-number">2.4</span> Templates and parameters</a></li>
  <li><a href="#realizing-the-plot-and-further-customization" id="toc-realizing-the-plot-and-further-customization" class="nav-link" data-scroll-target="#realizing-the-plot-and-further-customization"><span class="header-section-number">2.5</span> Realizing the plot and further customization</a></li>
  <li><a href="#field-type-inference" id="toc-field-type-inference" class="nav-link" data-scroll-target="#field-type-inference"><span class="header-section-number">2.6</span> Field type inference</a></li>
  <li><a href="#more-examples" id="toc-more-examples" class="nav-link" data-scroll-target="#more-examples"><span class="header-section-number">2.7</span> More examples</a>
  <ul>
  <li><a href="#boxplot" id="toc-boxplot" class="nav-link" data-scroll-target="#boxplot"><span class="header-section-number">2.7.1</span> Boxplot</a></li>
  <li><a href="#area-chart" id="toc-area-chart" class="nav-link" data-scroll-target="#area-chart"><span class="header-section-number">2.7.2</span> Area chart</a></li>
  <li><a href="#bar-chart" id="toc-bar-chart" class="nav-link" data-scroll-target="#bar-chart"><span class="header-section-number">2.7.3</span> Bar chart</a></li>
  <li><a href="#text" id="toc-text" class="nav-link" data-scroll-target="#text"><span class="header-section-number">2.7.4</span> Text</a></li>
  <li><a href="#segment-plot" id="toc-segment-plot" class="nav-link" data-scroll-target="#segment-plot"><span class="header-section-number">2.7.5</span> Segment plot</a></li>
  </ul></li>
  <li><a href="#varying-color-and-size" id="toc-varying-color-and-size" class="nav-link" data-scroll-target="#varying-color-and-size"><span class="header-section-number">2.8</span> Varying color and size</a></li>
  <li><a href="#time-series" id="toc-time-series" class="nav-link" data-scroll-target="#time-series"><span class="header-section-number">2.9</span> Time series</a></li>
  <li><a href="#multiple-layers" id="toc-multiple-layers" class="nav-link" data-scroll-target="#multiple-layers"><span class="header-section-number">2.10</span> Multiple layers</a></li>
  <li><a href="#updating-data" id="toc-updating-data" class="nav-link" data-scroll-target="#updating-data"><span class="header-section-number">2.11</span> Updating data</a></li>
  <li><a href="#overriding-layer-data" id="toc-overriding-layer-data" class="nav-link" data-scroll-target="#overriding-layer-data"><span class="header-section-number">2.12</span> Overriding layer data</a></li>
  <li><a href="#smoothing" id="toc-smoothing" class="nav-link" data-scroll-target="#smoothing"><span class="header-section-number">2.13</span> Smoothing</a></li>
  <li><a href="#grouping" id="toc-grouping" class="nav-link" data-scroll-target="#grouping"><span class="header-section-number">2.14</span> Grouping</a></li>
  <li><a href="#example-out-of-sample-predictions" id="toc-example-out-of-sample-predictions" class="nav-link" data-scroll-target="#example-out-of-sample-predictions"><span class="header-section-number">2.15</span> Example: out-of-sample predictions</a></li>
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms"><span class="header-section-number">2.16</span> Histograms</a></li>
  <li><a href="#density" id="toc-density" class="nav-link" data-scroll-target="#density"><span class="header-section-number">2.17</span> Density</a></li>
  <li><a href="#coordinates" id="toc-coordinates" class="nav-link" data-scroll-target="#coordinates"><span class="header-section-number">2.18</span> Coordinates</a>
  <ul>
  <li><a href="#geo" id="toc-geo" class="nav-link" data-scroll-target="#geo"><span class="header-section-number">2.18.1</span> geo</a></li>
  <li><a href="#d" id="toc-d" class="nav-link" data-scroll-target="#d"><span class="header-section-number">2.18.2</span> 3d</a></li>
  <li><a href="#polar" id="toc-polar" class="nav-link" data-scroll-target="#polar"><span class="header-section-number">2.18.3</span> polar</a></li>
  </ul></li>
  <li><a href="#debugging-wip" id="toc-debugging-wip" class="nav-link" data-scroll-target="#debugging-wip"><span class="header-section-number">2.19</span> Debugging (WIP)</a>
  <ul>
  <li><a href="#viewing-the-computational-dag-of-substitution-keys" id="toc-viewing-the-computational-dag-of-substitution-keys" class="nav-link" data-scroll-target="#viewing-the-computational-dag-of-substitution-keys"><span class="header-section-number">2.19.1</span> Viewing the computational dag of substitution keys:</a></li>
  <li><a href="#viewing-intermediate-values-in-the-computational-dag" id="toc-viewing-intermediate-values-in-the-computational-dag" class="nav-link" data-scroll-target="#viewing-intermediate-values-in-the-computational-dag"><span class="header-section-number">2.19.2</span> Viewing intermediate values in the computational dag:</a></li>
  </ul></li>
  <li><a href="#coming-soon" id="toc-coming-soon" class="nav-link" data-scroll-target="#coming-soon"><span class="header-section-number">2.20</span> Coming soon</a>
  <ul>
  <li><a href="#facets" id="toc-facets" class="nav-link" data-scroll-target="#facets"><span class="header-section-number">2.20.1</span> Facets</a></li>
  <li><a href="#scales" id="toc-scales" class="nav-link" data-scroll-target="#scales"><span class="header-section-number">2.20.2</span> Scales</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Plotly walkthrough ðŸ‘£</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<style></style>
<style>.printedClojure .sourceCode {
  background-color: transparent;
  border-style: none;
}
</style>
<style>.clay-limit-image-width .clay-image {max-width: 100%}
.clay-side-by-side .sourceCode {margin: 0}
.clay-side-by-side {margin: 1em 0}
</style>
<script src="tableplot_book.plotly_walkthrough_files/md-default0.js" type="text/javascript"></script>
<script src="tableplot_book.plotly_walkthrough_files/md-default1.js" type="text/javascript"></script>
<script src="tableplot_book.plotly_walkthrough_files/plotly2.js" type="text/javascript"></script>
<script src="tableplot_book.plotly_walkthrough_files/cytoscape3.js" type="text/javascript"></script>
<p>Tableplot offers a Clojure API for creating <a href="https://plotly.com/javascript/">Plotly.js</a> plots through layered pipelines.</p>
<p>The API uses <a href="https://github.com/jsa-aerial/hanami?tab=readme-ov-file#templates-substitution-keys-and-transformations">Hanami templates</a> but is completely separate from the classical Hanami templates and parameters.</p>
<p>Here, we provide a walkthrough of that API.</p>
<p>See also the more detailed <a href="tableplot_book.plotly_reference.html">Tableplot Plotly reference</a> ðŸ“–. You might find the official <a href="https://plotly.com/javascript/">Plotly.js reference</a> helpful. (Tip: rotate narrow devices.) There are additional examples in <a href="https://scicloj.github.io/noj/noj_book.tableplot_datavis_intro.html">Intro to data visualization with Tableplot</a> in the <a href="https://scicloj.github.io/noj">Noj book</a>.</p>
<section id="setup" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="setup"><span class="header-section-number">2.1</span> Setup</h2>
<p>For this tutorial, we require:</p>
<ul>
<li><p>The Tableplot plotly API namespace</p></li>
<li><p><a href="https://scicloj.github.io/tablecloth/">Tablecloth</a> for dataset processing</p></li>
<li><p>the <a href="https://cnuernber.github.io/dtype-next/tech.v3.datatype.datetime.html">datetime namespace</a> of <a href="https://github.com/cnuernber/dtype-next">dtype-next</a></p></li>
<li><p>the <a href="https://techascent.github.io/tech.ml.dataset/tech.v3.dataset.print.html">print namespace</a> of <a href="https://github.com/techascent/tech.ml.dataset">tech.ml.dataset</a> for customized dataset printing</p></li>
<li><p><a href="https://scicloj.github.io/kindly-noted/">Kindly</a> (to specify how certain values should be visualized)</p></li>
<li><p>the datasets defined in the <a href="./tableplot_book.datasets.html">Datasets chapter</a></p></li>
<li><p>a few other namespaces used in particular examples.</p></li>
</ul>
<div class="sourceClojure">
<div class="sourceCode" id="cb1"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> tableplot-book.plotly-walkthrough</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  (<span class="at">:require</span> [scicloj.tableplot.v1.plotly <span class="at">:as</span> plotly]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>            [tablecloth.api <span class="at">:as</span> tc]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>            [tablecloth.column.api <span class="at">:as</span> tcc]</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            [tech.v3.datatype.datetime <span class="at">:as</span> datetime]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            [tech.v3.dataset.<span class="kw">print</span> <span class="at">:as</span> <span class="kw">print</span>]</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.kind <span class="at">:as</span> kind]</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>            [scicloj.kindly.v4.api <span class="at">:as</span> kindly]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>            [scicloj.metamorph.ml.rdatasets <span class="at">:as</span> rdatasets]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="basic-usage" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="basic-usage"><span class="header-section-number">2.2</span> Basic usage</h2>
<p>Plotly plots are created by passing datasets to a pipeline of layer functions.</p>
<p>Additional parameters to the functions are passed as maps. Map keys begin with <code>=</code> (e.g., <code>:=color</code>).</p>
<p>For example, let us plot a scatterplot (a layer of points) of 10 random items from the Iris dataset.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb2"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    (tc/random <span class="dv">10</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:sepal-width</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:sepal-length</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      :=color <span class="at">:species</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.6</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.0,4.6,4.5],"r":null,"name":"setosa","marker":{"color":"#1B9E77","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[3.4,3.4,2.3],"text":null},{"y":[5.7,6.1,5.6,5.0,6.3],"r":null,"name":"versicolor","marker":{"color":"#D95F02","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[2.9,3.0,2.7,2.0,2.5],"text":null},{"y":[6.2,6.7],"r":null,"name":"virginica","marker":{"color":"#7570B3","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[2.8,3.3],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="processing-overview" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="processing-overview"><span class="header-section-number">2.3</span> Processing overview</h2>
<p>For basic use of Tableplot with a tool such as Clay, itâ€™s not necessary to understand the process leading to display of a plot. Knowing more might be helpful for debugging and advanced customizations, though. This section and the following ones provide more information about the process:</p>
<ol type="1">
<li>The parameter map passed to a function such as <code>plotly/layer-point</code> typically contain Plotly-specific <a href="https://github.com/jsa-aerial/hanami?tab=readme-ov-file#templates-substitution-keys-and-transformations">Hanami substitution keys</a>.</li>
<li>The values of those keys are automatically combined with default values calculated for other Plotly-specific keys.</li>
<li>The preceding step results in an EDN map that specifies a Plotly.js plot.</li>
<li>The EDN-format plot specification is automatically transformed into a <a href="https://plotly.com/chart-studio-help/json-chart-schema">Plotly JSON</a> specification.</li>
<li>The JSON specification is automatically used to display the plot.</li>
</ol>
<p>The reason Kindly-compatible tools like Clay know what to do with the maps at each step is because previous steps add appropriate <a href="https://scicloj.github.io/kindly-noted/">Kindly</a> meta annotations to the maps.</p>
</section>
<section id="templates-and-parameters" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="templates-and-parameters"><span class="header-section-number">2.4</span> Templates and parameters</h2>
<p>Technically, the parameter maps contain <a href="https://github.com/jsa-aerial/hanami?tab=readme-ov-file#templates-substitution-keys-and-transformations">Hanami substitution keys</a>, which means they are processed by a <a href="https://github.com/jsa-aerial/hanami?tab=readme-ov-file#basic-transformation-rules">simple set of rules</a>, but you do not need to understand what this means yet.</p>
<p>The layer functions return a Hanami template. Let us print the resulting structure of the previous plot.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> example1</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>      (tc/random <span class="dv">10</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      (plotly/layer-point</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>       {:=x <span class="at">:sepal-width</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        :=y <span class="at">:sepal-length</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>        :=color <span class="at">:species</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>        :=mark-size <span class="dv">20</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>        :=mark-opacity <span class="fl">0.6</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb4"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(kind/pprint example1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb5"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:data</span> :=traces,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> <span class="at">:layout</span> :=layout,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a> <span class="at">:aerial.hanami.templates/defaults</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a> {:=textfont <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  :=x0 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  :=y-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  :=coordinates <span class="at">:2d</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  :=boxmode <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  :=x0-after-stat :=x0,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  :=z-after-stat :=z,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  :=splom-traces #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  :=zmax <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  :=layers</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  [{<span class="at">:y</span> :=y-after-stat,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">:trace-base</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    {<span class="at">:mode</span> :=mode,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>     <span class="at">:type</span> :=type,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>     <span class="at">:opacity</span> :=mark-opacity,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>     <span class="at">:textfont</span> :=textfont},</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">:colorscale</span> :=colorscale,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">:color-type</span> :=color-type,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">:r</span> :=r,</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">:coordinates</span> :=coordinates,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">:group</span> :=group,</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">:color</span> :=color,</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">:meanline-visible</span> :=meanline-visible,</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">:mark</span> :=mark,</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x-title</span> :=x-title,</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">:symbol</span> :=symbol,</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">:name</span> :=name,</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">:fill</span> :=mark-fill,</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y1</span> :=y1-after-stat,</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">:bar-width</span> :=bar-width,</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">:boxmode</span> :=boxmode,</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">:size-range</span> :=size-range,</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">:theta</span> :=theta,</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">:size</span> :=size,</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">:size-type</span> :=size-type,</span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">:z</span> :=z-after-stat,</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">:lon</span> :=lon,</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">:aerial.hanami.templates/defaults</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>    {:=textfont <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>     :=x0 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a>     :=y-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a>     :=coordinates <span class="at">:2d</span>,</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a>     :=boxmode <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a>     :=x0-after-stat :=x0,</span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>     :=z-after-stat :=z,</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a>     :=splom-traces #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a>     :=zmax <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a>     :=layers [],</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true" tabindex="-1"></a>     :=mark-fill <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-53"><a href="#cb5-53" aria-hidden="true" tabindex="-1"></a>     :=x1 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-54"><a href="#cb5-54" aria-hidden="true" tabindex="-1"></a>     :=title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-55"><a href="#cb5-55" aria-hidden="true" tabindex="-1"></a>     :=annotations <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-56"><a href="#cb5-56" aria-hidden="true" tabindex="-1"></a>     :=z-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-57"><a href="#cb5-57" aria-hidden="true" tabindex="-1"></a>     :=y1 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-58"><a href="#cb5-58" aria-hidden="true" tabindex="-1"></a>     :=y-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-59"><a href="#cb5-59" aria-hidden="true" tabindex="-1"></a>     :=height <span class="dv">400</span>,</span>
<span id="cb5-60"><a href="#cb5-60" aria-hidden="true" tabindex="-1"></a>     :=box-visible <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-61"><a href="#cb5-61" aria-hidden="true" tabindex="-1"></a>     :=mark-symbol <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-62"><a href="#cb5-62" aria-hidden="true" tabindex="-1"></a>     :=name <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-63"><a href="#cb5-63" aria-hidden="true" tabindex="-1"></a>     :=mark-opacity <span class="fl">0.6</span>,</span>
<span id="cb5-64"><a href="#cb5-64" aria-hidden="true" tabindex="-1"></a>     :=inferred-group #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-65"><a href="#cb5-65" aria-hidden="true" tabindex="-1"></a>     :=y-showgrid <span class="va">true</span>,</span>
<span id="cb5-66"><a href="#cb5-66" aria-hidden="true" tabindex="-1"></a>     :=density-bandwidth <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-67"><a href="#cb5-67" aria-hidden="true" tabindex="-1"></a>     :=mode #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-68"><a href="#cb5-68" aria-hidden="true" tabindex="-1"></a>     :=splom-layout #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-69"><a href="#cb5-69" aria-hidden="true" tabindex="-1"></a>     :=y-title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-70"><a href="#cb5-70" aria-hidden="true" tabindex="-1"></a>     :=z-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-71"><a href="#cb5-71" aria-hidden="true" tabindex="-1"></a>     :=size <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-72"><a href="#cb5-72" aria-hidden="true" tabindex="-1"></a>     :=model-options {<span class="at">:model-type</span> <span class="at">:metamorph.ml/ols</span>},</span>
<span id="cb5-73"><a href="#cb5-73" aria-hidden="true" tabindex="-1"></a>     :=group :=inferred-group,</span>
<span id="cb5-74"><a href="#cb5-74" aria-hidden="true" tabindex="-1"></a>     :=y0 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-75"><a href="#cb5-75" aria-hidden="true" tabindex="-1"></a>     :=mark-size <span class="dv">20</span>,</span>
<span id="cb5-76"><a href="#cb5-76" aria-hidden="true" tabindex="-1"></a>     :=violinmode <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-77"><a href="#cb5-77" aria-hidden="true" tabindex="-1"></a>     :=design-matrix #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-78"><a href="#cb5-78" aria-hidden="true" tabindex="-1"></a>     :=size-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-79"><a href="#cb5-79" aria-hidden="true" tabindex="-1"></a>     :=zmin <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-80"><a href="#cb5-80" aria-hidden="true" tabindex="-1"></a>     :=x-showgrid <span class="va">true</span>,</span>
<span id="cb5-81"><a href="#cb5-81" aria-hidden="true" tabindex="-1"></a>     :=r <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-82"><a href="#cb5-82" aria-hidden="true" tabindex="-1"></a>     :=color <span class="at">:species</span>,</span>
<span id="cb5-83"><a href="#cb5-83" aria-hidden="true" tabindex="-1"></a>     :=mark-color <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-84"><a href="#cb5-84" aria-hidden="true" tabindex="-1"></a>     :=bar-width <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-85"><a href="#cb5-85" aria-hidden="true" tabindex="-1"></a>     :=y1-after-stat :=y1,</span>
<span id="cb5-86"><a href="#cb5-86" aria-hidden="true" tabindex="-1"></a>     :=x <span class="at">:sepal-width</span>,</span>
<span id="cb5-87"><a href="#cb5-87" aria-hidden="true" tabindex="-1"></a>     :=symbol <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-88"><a href="#cb5-88" aria-hidden="true" tabindex="-1"></a>     :=x-after-stat :=x,</span>
<span id="cb5-89"><a href="#cb5-89" aria-hidden="true" tabindex="-1"></a>     :=yaxis-gridcolor <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb5-90"><a href="#cb5-90" aria-hidden="true" tabindex="-1"></a>     :=lon <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-91"><a href="#cb5-91" aria-hidden="true" tabindex="-1"></a>     :=text <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-92"><a href="#cb5-92" aria-hidden="true" tabindex="-1"></a>     :=type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-93"><a href="#cb5-93" aria-hidden="true" tabindex="-1"></a>     :=x-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-94"><a href="#cb5-94" aria-hidden="true" tabindex="-1"></a>     :=traces #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-95"><a href="#cb5-95" aria-hidden="true" tabindex="-1"></a>     :=x-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-96"><a href="#cb5-96" aria-hidden="true" tabindex="-1"></a>     :=histogram-nbins <span class="dv">10</span>,</span>
<span id="cb5-97"><a href="#cb5-97" aria-hidden="true" tabindex="-1"></a>     :=automargin <span class="va">false</span>,</span>
<span id="cb5-98"><a href="#cb5-98" aria-hidden="true" tabindex="-1"></a>     :=stat :=dataset,</span>
<span id="cb5-99"><a href="#cb5-99" aria-hidden="true" tabindex="-1"></a>     :=z <span class="at">:z</span>,</span>
<span id="cb5-100"><a href="#cb5-100" aria-hidden="true" tabindex="-1"></a>     :=width <span class="dv">500</span>,</span>
<span id="cb5-101"><a href="#cb5-101" aria-hidden="true" tabindex="-1"></a>     :=lat <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-102"><a href="#cb5-102" aria-hidden="true" tabindex="-1"></a>     :=margin {<span class="at">:t</span> <span class="dv">25</span>},</span>
<span id="cb5-103"><a href="#cb5-103" aria-hidden="true" tabindex="-1"></a>     :=color-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-104"><a href="#cb5-104" aria-hidden="true" tabindex="-1"></a>     :=xaxis-gridcolor <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb5-105"><a href="#cb5-105" aria-hidden="true" tabindex="-1"></a>     :=mark <span class="at">:point</span>,</span>
<span id="cb5-106"><a href="#cb5-106" aria-hidden="true" tabindex="-1"></a>     :=size-range [<span class="dv">10</span> <span class="dv">30</span>],</span>
<span id="cb5-107"><a href="#cb5-107" aria-hidden="true" tabindex="-1"></a>     :=x-title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-108"><a href="#cb5-108" aria-hidden="true" tabindex="-1"></a>     :=colorscale <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>     :=layout #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-110"><a href="#cb5-110" aria-hidden="true" tabindex="-1"></a>     :=colnames <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-111"><a href="#cb5-111" aria-hidden="true" tabindex="-1"></a>     :=y <span class="at">:sepal-length</span>,</span>
<span id="cb5-112"><a href="#cb5-112" aria-hidden="true" tabindex="-1"></a>     :=x1-after-stat :=x1,</span>
<span id="cb5-113"><a href="#cb5-113" aria-hidden="true" tabindex="-1"></a>     :=dataset</span>
<span id="cb5-114"><a href="#cb5-114" aria-hidden="true" tabindex="-1"></a>     https<span class="at">://vincentarelbundock.github.io/Rdatasets/csv/datasets/iris.csv</span> [<span class="dv">10</span> <span class="dv">6</span>]:</span>
<span id="cb5-115"><a href="#cb5-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-116"><a href="#cb5-116" aria-hidden="true" tabindex="-1"></a>| <span class="at">:rownames</span> | <span class="at">:sepal-length</span> | <span class="at">:sepal-width</span> | <span class="at">:petal-length</span> | <span class="at">:petal-width</span> |   <span class="at">:species</span> |</span>
<span id="cb5-117"><a href="#cb5-117" aria-hidden="true" tabindex="-1"></a>|----------:|--------------:|-------------:|--------------:|-------------:|------------|</span>
<span id="cb5-118"><a href="#cb5-118" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">27</span> |           <span class="fl">5.0</span> |          <span class="fl">3.4</span> |           <span class="fl">1.6</span> |          <span class="fl">0.4</span> |     setosa |</span>
<span id="cb5-119"><a href="#cb5-119" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">97</span> |           <span class="fl">5.7</span> |          <span class="fl">2.9</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb5-120"><a href="#cb5-120" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">127</span> |           <span class="fl">6.2</span> |          <span class="fl">2.8</span> |           <span class="fl">4.8</span> |          <span class="fl">1.8</span> |  virginica |</span>
<span id="cb5-121"><a href="#cb5-121" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">92</span> |           <span class="fl">6.1</span> |          <span class="fl">3.0</span> |           <span class="fl">4.6</span> |          <span class="fl">1.4</span> | versicolor |</span>
<span id="cb5-122"><a href="#cb5-122" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">7</span> |           <span class="fl">4.6</span> |          <span class="fl">3.4</span> |           <span class="fl">1.4</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb5-123"><a href="#cb5-123" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">95</span> |           <span class="fl">5.6</span> |          <span class="fl">2.7</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb5-124"><a href="#cb5-124" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">125</span> |           <span class="fl">6.7</span> |          <span class="fl">3.3</span> |           <span class="fl">5.7</span> |          <span class="fl">2.1</span> |  virginica |</span>
<span id="cb5-125"><a href="#cb5-125" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">61</span> |           <span class="fl">5.0</span> |          <span class="fl">2.0</span> |           <span class="fl">3.5</span> |          <span class="fl">1.0</span> | versicolor |</span>
<span id="cb5-126"><a href="#cb5-126" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">73</span> |           <span class="fl">6.3</span> |          <span class="fl">2.5</span> |           <span class="fl">4.9</span> |          <span class="fl">1.5</span> | versicolor |</span>
<span id="cb5-127"><a href="#cb5-127" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">42</span> |           <span class="fl">4.5</span> |          <span class="fl">2.3</span> |           <span class="fl">1.3</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb5-128"><a href="#cb5-128" aria-hidden="true" tabindex="-1"></a>,</span>
<span id="cb5-129"><a href="#cb5-129" aria-hidden="true" tabindex="-1"></a>     :=background <span class="st">"rgb(235,235,235)"</span>,</span>
<span id="cb5-130"><a href="#cb5-130" aria-hidden="true" tabindex="-1"></a>     :=theta <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-131"><a href="#cb5-131" aria-hidden="true" tabindex="-1"></a>     :=y0-after-stat :=y0,</span>
<span id="cb5-132"><a href="#cb5-132" aria-hidden="true" tabindex="-1"></a>     :=y-after-stat :=y,</span>
<span id="cb5-133"><a href="#cb5-133" aria-hidden="true" tabindex="-1"></a>     :=predictors [:=x],</span>
<span id="cb5-134"><a href="#cb5-134" aria-hidden="true" tabindex="-1"></a>     :=marker-size-key #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-135"><a href="#cb5-135" aria-hidden="true" tabindex="-1"></a>     :=meanline-visible <span class="at">:com.rpl.specter.impl/NONE</span>},</span>
<span id="cb5-136"><a href="#cb5-136" aria-hidden="true" tabindex="-1"></a>    <span class="at">:lat</span> :=lat,</span>
<span id="cb5-137"><a href="#cb5-137" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y0</span> :=y0-after-stat,</span>
<span id="cb5-138"><a href="#cb5-138" aria-hidden="true" tabindex="-1"></a>    <span class="at">:zmax</span> :=zmax,</span>
<span id="cb5-139"><a href="#cb5-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">:annotations</span> :=annotations,</span>
<span id="cb5-140"><a href="#cb5-140" aria-hidden="true" tabindex="-1"></a>    <span class="at">:inferred-group</span> :=inferred-group,</span>
<span id="cb5-141"><a href="#cb5-141" aria-hidden="true" tabindex="-1"></a>    <span class="at">:marker-override</span></span>
<span id="cb5-142"><a href="#cb5-142" aria-hidden="true" tabindex="-1"></a>    {<span class="at">:color</span> :=mark-color,</span>
<span id="cb5-143"><a href="#cb5-143" aria-hidden="true" tabindex="-1"></a>     :=marker-size-key :=mark-size,</span>
<span id="cb5-144"><a href="#cb5-144" aria-hidden="true" tabindex="-1"></a>     <span class="at">:symbol</span> :=mark-symbol,</span>
<span id="cb5-145"><a href="#cb5-145" aria-hidden="true" tabindex="-1"></a>     <span class="at">:colorscale</span> :=colorscale},</span>
<span id="cb5-146"><a href="#cb5-146" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x</span> :=x-after-stat,</span>
<span id="cb5-147"><a href="#cb5-147" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x1</span> :=x1-after-stat,</span>
<span id="cb5-148"><a href="#cb5-148" aria-hidden="true" tabindex="-1"></a>    <span class="at">:x0</span> :=x0-after-stat,</span>
<span id="cb5-149"><a href="#cb5-149" aria-hidden="true" tabindex="-1"></a>    <span class="at">:zmin</span> :=zmin,</span>
<span id="cb5-150"><a href="#cb5-150" aria-hidden="true" tabindex="-1"></a>    <span class="at">:y-title</span> :=y-title,</span>
<span id="cb5-151"><a href="#cb5-151" aria-hidden="true" tabindex="-1"></a>    <span class="at">:box-visible</span> :=box-visible,</span>
<span id="cb5-152"><a href="#cb5-152" aria-hidden="true" tabindex="-1"></a>    <span class="at">:dataset</span> :=stat,</span>
<span id="cb5-153"><a href="#cb5-153" aria-hidden="true" tabindex="-1"></a>    <span class="at">:violinmode</span> :=violinmode,</span>
<span id="cb5-154"><a href="#cb5-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">:text</span> :=text}],</span>
<span id="cb5-155"><a href="#cb5-155" aria-hidden="true" tabindex="-1"></a>  :=mark-fill <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-156"><a href="#cb5-156" aria-hidden="true" tabindex="-1"></a>  :=x1 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-157"><a href="#cb5-157" aria-hidden="true" tabindex="-1"></a>  :=title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-158"><a href="#cb5-158" aria-hidden="true" tabindex="-1"></a>  :=annotations <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-159"><a href="#cb5-159" aria-hidden="true" tabindex="-1"></a>  :=z-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-160"><a href="#cb5-160" aria-hidden="true" tabindex="-1"></a>  :=y1 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-161"><a href="#cb5-161" aria-hidden="true" tabindex="-1"></a>  :=y-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-162"><a href="#cb5-162" aria-hidden="true" tabindex="-1"></a>  :=height <span class="dv">400</span>,</span>
<span id="cb5-163"><a href="#cb5-163" aria-hidden="true" tabindex="-1"></a>  :=box-visible <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-164"><a href="#cb5-164" aria-hidden="true" tabindex="-1"></a>  :=mark-symbol <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-165"><a href="#cb5-165" aria-hidden="true" tabindex="-1"></a>  :=name <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-166"><a href="#cb5-166" aria-hidden="true" tabindex="-1"></a>  :=mark-opacity <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-167"><a href="#cb5-167" aria-hidden="true" tabindex="-1"></a>  :=inferred-group #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-168"><a href="#cb5-168" aria-hidden="true" tabindex="-1"></a>  :=y-showgrid <span class="va">true</span>,</span>
<span id="cb5-169"><a href="#cb5-169" aria-hidden="true" tabindex="-1"></a>  :=density-bandwidth <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-170"><a href="#cb5-170" aria-hidden="true" tabindex="-1"></a>  :=mode #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-171"><a href="#cb5-171" aria-hidden="true" tabindex="-1"></a>  :=splom-layout #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-172"><a href="#cb5-172" aria-hidden="true" tabindex="-1"></a>  :=y-title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-173"><a href="#cb5-173" aria-hidden="true" tabindex="-1"></a>  :=z-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-174"><a href="#cb5-174" aria-hidden="true" tabindex="-1"></a>  :=size <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-175"><a href="#cb5-175" aria-hidden="true" tabindex="-1"></a>  :=model-options {<span class="at">:model-type</span> <span class="at">:metamorph.ml/ols</span>},</span>
<span id="cb5-176"><a href="#cb5-176" aria-hidden="true" tabindex="-1"></a>  :=group :=inferred-group,</span>
<span id="cb5-177"><a href="#cb5-177" aria-hidden="true" tabindex="-1"></a>  :=y0 <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-178"><a href="#cb5-178" aria-hidden="true" tabindex="-1"></a>  :=mark-size <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-179"><a href="#cb5-179" aria-hidden="true" tabindex="-1"></a>  :=violinmode <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-180"><a href="#cb5-180" aria-hidden="true" tabindex="-1"></a>  :=design-matrix #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-181"><a href="#cb5-181" aria-hidden="true" tabindex="-1"></a>  :=size-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-182"><a href="#cb5-182" aria-hidden="true" tabindex="-1"></a>  :=zmin <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-183"><a href="#cb5-183" aria-hidden="true" tabindex="-1"></a>  :=x-showgrid <span class="va">true</span>,</span>
<span id="cb5-184"><a href="#cb5-184" aria-hidden="true" tabindex="-1"></a>  :=r <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-185"><a href="#cb5-185" aria-hidden="true" tabindex="-1"></a>  :=color <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-186"><a href="#cb5-186" aria-hidden="true" tabindex="-1"></a>  :=mark-color <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-187"><a href="#cb5-187" aria-hidden="true" tabindex="-1"></a>  :=bar-width <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-188"><a href="#cb5-188" aria-hidden="true" tabindex="-1"></a>  :=y1-after-stat :=y1,</span>
<span id="cb5-189"><a href="#cb5-189" aria-hidden="true" tabindex="-1"></a>  :=x <span class="at">:x</span>,</span>
<span id="cb5-190"><a href="#cb5-190" aria-hidden="true" tabindex="-1"></a>  :=symbol <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-191"><a href="#cb5-191" aria-hidden="true" tabindex="-1"></a>  :=x-after-stat :=x,</span>
<span id="cb5-192"><a href="#cb5-192" aria-hidden="true" tabindex="-1"></a>  :=yaxis-gridcolor <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb5-193"><a href="#cb5-193" aria-hidden="true" tabindex="-1"></a>  :=lon <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-194"><a href="#cb5-194" aria-hidden="true" tabindex="-1"></a>  :=text <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-195"><a href="#cb5-195" aria-hidden="true" tabindex="-1"></a>  :=type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-196"><a href="#cb5-196" aria-hidden="true" tabindex="-1"></a>  :=x-type-after-stat #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-197"><a href="#cb5-197" aria-hidden="true" tabindex="-1"></a>  :=traces #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-198"><a href="#cb5-198" aria-hidden="true" tabindex="-1"></a>  :=x-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-199"><a href="#cb5-199" aria-hidden="true" tabindex="-1"></a>  :=histogram-nbins <span class="dv">10</span>,</span>
<span id="cb5-200"><a href="#cb5-200" aria-hidden="true" tabindex="-1"></a>  :=automargin <span class="va">false</span>,</span>
<span id="cb5-201"><a href="#cb5-201" aria-hidden="true" tabindex="-1"></a>  :=stat :=dataset,</span>
<span id="cb5-202"><a href="#cb5-202" aria-hidden="true" tabindex="-1"></a>  :=z <span class="at">:z</span>,</span>
<span id="cb5-203"><a href="#cb5-203" aria-hidden="true" tabindex="-1"></a>  :=width <span class="dv">500</span>,</span>
<span id="cb5-204"><a href="#cb5-204" aria-hidden="true" tabindex="-1"></a>  :=lat <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-205"><a href="#cb5-205" aria-hidden="true" tabindex="-1"></a>  :=margin {<span class="at">:t</span> <span class="dv">25</span>},</span>
<span id="cb5-206"><a href="#cb5-206" aria-hidden="true" tabindex="-1"></a>  :=color-type #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-207"><a href="#cb5-207" aria-hidden="true" tabindex="-1"></a>  :=xaxis-gridcolor <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb5-208"><a href="#cb5-208" aria-hidden="true" tabindex="-1"></a>  :=mark <span class="at">:point</span>,</span>
<span id="cb5-209"><a href="#cb5-209" aria-hidden="true" tabindex="-1"></a>  :=size-range [<span class="dv">10</span> <span class="dv">30</span>],</span>
<span id="cb5-210"><a href="#cb5-210" aria-hidden="true" tabindex="-1"></a>  :=x-title <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-211"><a href="#cb5-211" aria-hidden="true" tabindex="-1"></a>  :=colorscale <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-212"><a href="#cb5-212" aria-hidden="true" tabindex="-1"></a>  :=layout #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-213"><a href="#cb5-213" aria-hidden="true" tabindex="-1"></a>  :=colnames <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-214"><a href="#cb5-214" aria-hidden="true" tabindex="-1"></a>  :=y <span class="at">:y</span>,</span>
<span id="cb5-215"><a href="#cb5-215" aria-hidden="true" tabindex="-1"></a>  :=x1-after-stat :=x1,</span>
<span id="cb5-216"><a href="#cb5-216" aria-hidden="true" tabindex="-1"></a>  :=dataset</span>
<span id="cb5-217"><a href="#cb5-217" aria-hidden="true" tabindex="-1"></a>  https<span class="at">://vincentarelbundock.github.io/Rdatasets/csv/datasets/iris.csv</span> [<span class="dv">10</span> <span class="dv">6</span>]:</span>
<span id="cb5-218"><a href="#cb5-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-219"><a href="#cb5-219" aria-hidden="true" tabindex="-1"></a>| <span class="at">:rownames</span> | <span class="at">:sepal-length</span> | <span class="at">:sepal-width</span> | <span class="at">:petal-length</span> | <span class="at">:petal-width</span> |   <span class="at">:species</span> |</span>
<span id="cb5-220"><a href="#cb5-220" aria-hidden="true" tabindex="-1"></a>|----------:|--------------:|-------------:|--------------:|-------------:|------------|</span>
<span id="cb5-221"><a href="#cb5-221" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">27</span> |           <span class="fl">5.0</span> |          <span class="fl">3.4</span> |           <span class="fl">1.6</span> |          <span class="fl">0.4</span> |     setosa |</span>
<span id="cb5-222"><a href="#cb5-222" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">97</span> |           <span class="fl">5.7</span> |          <span class="fl">2.9</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb5-223"><a href="#cb5-223" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">127</span> |           <span class="fl">6.2</span> |          <span class="fl">2.8</span> |           <span class="fl">4.8</span> |          <span class="fl">1.8</span> |  virginica |</span>
<span id="cb5-224"><a href="#cb5-224" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">92</span> |           <span class="fl">6.1</span> |          <span class="fl">3.0</span> |           <span class="fl">4.6</span> |          <span class="fl">1.4</span> | versicolor |</span>
<span id="cb5-225"><a href="#cb5-225" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">7</span> |           <span class="fl">4.6</span> |          <span class="fl">3.4</span> |           <span class="fl">1.4</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb5-226"><a href="#cb5-226" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">95</span> |           <span class="fl">5.6</span> |          <span class="fl">2.7</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb5-227"><a href="#cb5-227" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">125</span> |           <span class="fl">6.7</span> |          <span class="fl">3.3</span> |           <span class="fl">5.7</span> |          <span class="fl">2.1</span> |  virginica |</span>
<span id="cb5-228"><a href="#cb5-228" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">61</span> |           <span class="fl">5.0</span> |          <span class="fl">2.0</span> |           <span class="fl">3.5</span> |          <span class="fl">1.0</span> | versicolor |</span>
<span id="cb5-229"><a href="#cb5-229" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">73</span> |           <span class="fl">6.3</span> |          <span class="fl">2.5</span> |           <span class="fl">4.9</span> |          <span class="fl">1.5</span> | versicolor |</span>
<span id="cb5-230"><a href="#cb5-230" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">42</span> |           <span class="fl">4.5</span> |          <span class="fl">2.3</span> |           <span class="fl">1.3</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb5-231"><a href="#cb5-231" aria-hidden="true" tabindex="-1"></a>,</span>
<span id="cb5-232"><a href="#cb5-232" aria-hidden="true" tabindex="-1"></a>  :=background <span class="st">"rgb(235,235,235)"</span>,</span>
<span id="cb5-233"><a href="#cb5-233" aria-hidden="true" tabindex="-1"></a>  :=theta <span class="at">:com.rpl.specter.impl/NONE</span>,</span>
<span id="cb5-234"><a href="#cb5-234" aria-hidden="true" tabindex="-1"></a>  :=y0-after-stat :=y0,</span>
<span id="cb5-235"><a href="#cb5-235" aria-hidden="true" tabindex="-1"></a>  :=y-after-stat :=y,</span>
<span id="cb5-236"><a href="#cb5-236" aria-hidden="true" tabindex="-1"></a>  :=predictors [:=x],</span>
<span id="cb5-237"><a href="#cb5-237" aria-hidden="true" tabindex="-1"></a>  :=marker-size-key #function[clojure.lang.AFunction/<span class="dv">1</span>],</span>
<span id="cb5-238"><a href="#cb5-238" aria-hidden="true" tabindex="-1"></a>  :=meanline-visible <span class="at">:com.rpl.specter.impl/NONE</span>},</span>
<span id="cb5-239"><a href="#cb5-239" aria-hidden="true" tabindex="-1"></a> <span class="at">:kindly/f</span> <span class="va">#'scicloj.tableplot.v1.plotly/plotly-xform</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This template has all the necessary knowledge, including the substitution keys, to turn into a plot. This happens when your visual tool (e.g., Clay) displays the plot. The tool knows what to do thanks to the Kindly metadata and a special function attached to the plot. For example, the metadata lets Clay know that the template should be transformed into a specification with template keys and values replaced with what Plotly.js needs.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb6"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">meta</span> example1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>#<span class="at">:kindly</span>{<span class="at">:kind</span> <span class="at">:kind/fn</span>, <span class="at">:options</span> <span class="va">nil</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb8"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(<span class="at">:kindly/f</span> example1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="va">#'scicloj.tableplot.v1.plotly/plotly-xform</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="realizing-the-plot-and-further-customization" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="realizing-the-plot-and-further-customization"><span class="header-section-number">2.5</span> Realizing the plot and further customization</h2>
<p>If you wish to see the resulting EDN plot specification before displaying it as a plot, you can use the <code>plot</code> function. You can also use this specification for customizations that might not be supported by the Plotly Hanami keys mentioned above.</p>
<p>In this case, it generates a Plotly.js plot:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb10"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example1</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    plotly/plot</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:data</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a> [{<span class="at">:y</span> [<span class="fl">5.0</span> <span class="fl">4.6</span> <span class="fl">4.5</span>],</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"setosa"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#1B9E77"</span>, <span class="at">:size</span> <span class="dv">20</span>},</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>   <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>   <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>   <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>   <span class="at">:opacity</span> <span class="fl">0.6</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.3</span>],</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>   <span class="at">:text</span> <span class="va">nil</span>}</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:y</span> [<span class="fl">5.7</span> <span class="fl">6.1</span> <span class="fl">5.6</span> <span class="fl">5.0</span> <span class="fl">6.3</span>],</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>   <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"versicolor"</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#D95F02"</span>, <span class="at">:size</span> <span class="dv">20</span>},</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>   <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>   <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>   <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>   <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>   <span class="at">:opacity</span> <span class="fl">0.6</span>,</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">2.9</span> <span class="fl">3.0</span> <span class="fl">2.7</span> <span class="fl">2.0</span> <span class="fl">2.5</span>],</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>   <span class="at">:text</span> <span class="va">nil</span>}</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:y</span> [<span class="fl">6.2</span> <span class="fl">6.7</span>],</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>   <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"virginica"</span>,</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#7570B3"</span>, <span class="at">:size</span> <span class="dv">20</span>},</span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>   <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>   <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>   <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>   <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>   <span class="at">:opacity</span> <span class="fl">0.6</span>,</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">2.8</span> <span class="fl">3.3</span>],</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>   <span class="at">:text</span> <span class="va">nil</span>}],</span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a> <span class="at">:layout</span></span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a> {<span class="at">:width</span> <span class="dv">500</span>,</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">:height</span> <span class="dv">400</span>,</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">:margin</span> {<span class="at">:t</span> <span class="dv">25</span>},</span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">:automargin</span> <span class="va">false</span>,</span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">:plot</span>_bgcolor <span class="st">"rgb(235,235,235)"</span>,</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">:xaxis</span></span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:gridcolor</span> <span class="st">"rgb(255,255,255)"</span>, <span class="at">:title</span> <span class="at">:sepal-width</span>, <span class="at">:showgrid</span> <span class="va">true</span>},</span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">:yaxis</span></span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:gridcolor</span> <span class="st">"rgb(255,255,255)"</span>,</span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a>   <span class="at">:title</span> <span class="at">:sepal-length</span>,</span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a>   <span class="at">:showgrid</span> <span class="va">true</span>},</span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">:title</span> <span class="va">nil</span>}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It is annotated as <code>kind/plotly</code>, so that visual tools know how to render it.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb12"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example1</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    plotly/plot</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">meta</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb13"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>#<span class="at">:kindly</span>{<span class="at">:kind</span> <span class="at">:kind/plotly</span>, <span class="at">:options</span> {<span class="at">:style</span> {<span class="at">:height</span> <span class="at">:auto</span>}}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can manipulate the resulting Plotly EDN specification with arbitrary Clojure functions. In Kindly-compatible tools like Clay, by default this will then cause the modified EDN to be used to generate a plot.</p>
<p>As a simple illustration, let us change the background colour this way.<br>
We can use <code>assoc-in</code> to modify the value of <code>:plot_bgcolor</code> nested near the end of the <code>example1</code> map displayed above. (One could also do this using the <code>:=background</code> Hanami key.)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb14"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example1</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    plotly/plot</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc-in</span> [<span class="at">:layout</span> <span class="at">:plot</span>_bgcolor] <span class="st">"#eeeedd"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.0,4.6,4.5],"r":null,"name":"setosa","marker":{"color":"#1B9E77","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[3.4,3.4,2.3],"text":null},{"y":[5.7,6.1,5.6,5.0,6.3],"r":null,"name":"versicolor","marker":{"color":"#D95F02","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[2.9,3.0,2.7,2.0,2.5],"text":null},{"y":[6.2,6.7],"r":null,"name":"virginica","marker":{"color":"#7570B3","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[2.8,3.3],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"#eeeedd","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
<p>Manipulating the Plotly EDN allows customizations that might not yet be supported by the Tableplot Plotly API. The next example compresses distances in the <code>y</code> direction, using a <a href="https://plotly.com/javascript/reference/layout/xaxis/#layout-xaxis-scaleanchor">capability of Plotly.js</a> that isnâ€™t directly supported using Tableplotâ€™s Hanami keys.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb15"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example1</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    plotly/plot</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc-in</span> [<span class="at">:layout</span> <span class="at">:yaxis</span> <span class="at">:scaleanchor</span>] <span class="at">:x</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc-in</span> [<span class="at">:layout</span> <span class="at">:yaxis</span> <span class="at">:scaleratio</span>] <span class="fl">0.25</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.0,4.6,4.5],"r":null,"name":"setosa","marker":{"color":"#1B9E77","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[3.4,3.4,2.3],"text":null},{"y":[5.7,6.1,5.6,5.0,6.3],"r":null,"name":"versicolor","marker":{"color":"#D95F02","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[2.9,3.0,2.7,2.0,2.5],"text":null},{"y":[6.2,6.7],"r":null,"name":"virginica","marker":{"color":"#7570B3","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.6,"lon":null,"lat":null,"x":[2.8,3.3],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true,"scaleanchor":"x","scaleratio":0.25},"title":null}, {});</script></div>
</section>
<section id="field-type-inference" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="field-type-inference"><span class="header-section-number">2.6</span> Field type inference</h2>
<p>Tableplot infers the type of relevant fields from the data.</p>
<p>The example above was colored as it were since <code>:species</code> column was nominal, so it was assigned distinct colours.</p>
<p>In the following example, the coloring is by a quantitative column, so a color gradient is used:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb16"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-mtcars)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:mpg</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:disp</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      :=color <span class="at">:cyl</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[160.0,160.0,108.0,258.0,360.0,225.0,360.0,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472.0,460.0,440.0,78.7,75.7,71.1,120.1,318.0,304.0,350.0,400.0,79.0,120.3,95.1,351.0,145.0,301.0,121.0],"r":null,"name":"","marker":{"color":[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4],"size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[21.0,21.0,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26.0,30.4,15.8,19.7,15.0,21.4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"mpg","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"disp","showgrid":true},"title":null}, {});</script></div>
<p>We can override the inferred types and thus affect the generated plot:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb17"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-mtcars)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:mpg</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:disp</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>      :=color <span class="at">:cyl</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>      :=color-type <span class="at">:nominal</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[160.0,160.0,258.0,225.0,167.6,167.6,145.0],"r":null,"name":"6","marker":{"color":"#1B9E77","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[21.0,21.0,21.4,18.1,19.2,17.8,19.7],"text":null},{"y":[108.0,146.7,140.8,78.7,75.7,71.1,120.1,79.0,120.3,95.1,121.0],"r":null,"name":"4","marker":{"color":"#D95F02","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[22.8,24.4,22.8,32.4,30.4,33.9,21.5,27.3,26.0,30.4,21.4],"text":null},{"y":[360.0,360.0,275.8,275.8,275.8,472.0,460.0,440.0,318.0,304.0,350.0,400.0,351.0,301.0],"r":null,"name":"8","marker":{"color":"#7570B3","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[18.7,14.3,16.4,17.3,15.2,10.4,10.4,14.7,15.5,15.2,13.3,19.2,15.8,15.0],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"mpg","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"disp","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="more-examples" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="more-examples"><span class="header-section-number">2.7</span> More examples</h2>
<section id="boxplot" class="level3" data-number="2.7.1">
<h3 data-number="2.7.1" class="anchored" data-anchor-id="boxplot"><span class="header-section-number">2.7.1</span> Boxplot</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb18"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-mtcars)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-boxplot</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:cyl</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:disp</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[160.0,160.0,108.0,258.0,360.0,225.0,360.0,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472.0,460.0,440.0,78.7,75.7,71.1,120.1,318.0,304.0,350.0,400.0,79.0,120.3,95.1,351.0,145.0,301.0,121.0],"r":null,"name":"","fill":null,"mode":null,"width":null,"type":"box","theta":null,"z":null,"lon":null,"lat":null,"x":[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"cyl","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"disp","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="area-chart" class="level3" data-number="2.7.2">
<h3 data-number="2.7.2" class="anchored" data-anchor-id="area-chart"><span class="header-section-number">2.7.2</span> Area chart</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb19"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-mtcars)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    (tc/group-by [<span class="at">:cyl</span>])</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    (tc/aggregate {<span class="at">:total-disp</span> #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:disp</span> tcc/sum)})</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    (tc/order-by [<span class="at">:cyl</span>])</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:cyl</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>      :=mark-fill <span class="at">:tozeroy</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:total-disp</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[1156.5,1283.2,4943.4],"r":null,"name":"","fill":"tozeroy","mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[4,6,8],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"cyl","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"total-disp","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="bar-chart" class="level3" data-number="2.7.3">
<h3 data-number="2.7.3" class="anchored" data-anchor-id="bar-chart"><span class="header-section-number">2.7.3</span> Bar chart</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb20"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-mtcars)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    (tc/group-by [<span class="at">:cyl</span>])</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    (tc/aggregate {<span class="at">:total-disp</span> #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:disp</span> tcc/sum)})</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-bar</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:cyl</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:total-disp</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[1283.2,1156.5,4943.4],"r":null,"name":"","fill":null,"mode":null,"width":null,"type":"bar","theta":null,"z":null,"lon":null,"lat":null,"x":[6,4,8],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"cyl","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"total-disp","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb21"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-mtcars)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    (tc/group-by [<span class="at">:cyl</span>])</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    (tc/aggregate {<span class="at">:total-disp</span> #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:disp</span> tcc/sum)})</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:bar-width</span> <span class="fl">0.5</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-bar</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:cyl</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>      :=bar-width <span class="at">:bar-width</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:total-disp</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[1283.2,1156.5,4943.4],"r":null,"name":"","fill":null,"mode":null,"width":[0.5,0.5,0.5],"type":"bar","theta":null,"z":null,"lon":null,"lat":null,"x":[6,4,8],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"cyl","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"total-disp","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="text" class="level3" data-number="2.7.4">
<h3 data-number="2.7.4" class="anchored" data-anchor-id="text"><span class="header-section-number">2.7.4</span> Text</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb22"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-mtcars)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-text</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:mpg</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:disp</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>      :=text <span class="at">:cyl</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[160.0,160.0,108.0,258.0,360.0,225.0,360.0,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472.0,460.0,440.0,78.7,75.7,71.1,120.1,318.0,304.0,350.0,400.0,79.0,120.3,95.1,351.0,145.0,301.0,121.0],"r":null,"name":"","marker":{"size":20},"fill":null,"mode":"text","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[21.0,21.0,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26.0,30.4,15.8,19.7,15.0,21.4],"text":[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4]}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"mpg","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"disp","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb23"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-mtcars)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-text</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:mpg</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:disp</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>      :=text <span class="at">:cyl</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>      :=textfont {<span class="at">:family</span> <span class="st">"Courier New, monospace"</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">:size</span> <span class="dv">16</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">:color</span> <span class="at">:purple</span>}</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[160.0,160.0,108.0,258.0,360.0,225.0,360.0,146.7,140.8,167.6,167.6,275.8,275.8,275.8,472.0,460.0,440.0,78.7,75.7,71.1,120.1,318.0,304.0,350.0,400.0,79.0,120.3,95.1,351.0,145.0,301.0,121.0],"r":null,"name":"","marker":{"size":20},"fill":null,"mode":"text","width":null,"type":"scatter","theta":null,"textfont":{"family":"Courier New, monospace","size":16,"color":"purple"},"z":null,"lon":null,"lat":null,"x":[21.0,21.0,22.8,21.4,18.7,18.1,14.3,24.4,22.8,19.2,17.8,16.4,17.3,15.2,10.4,10.4,14.7,32.4,30.4,33.9,21.5,15.5,15.2,13.3,19.2,27.3,26.0,30.4,15.8,19.7,15.0,21.4],"text":[6,6,4,6,8,6,8,4,4,6,6,8,8,8,8,8,8,4,4,4,4,8,8,8,8,4,4,4,8,6,8,4]}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"mpg","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"disp","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="segment-plot" class="level3" data-number="2.7.5">
<h3 data-number="2.7.5" class="anchored" data-anchor-id="segment-plot"><span class="header-section-number">2.7.5</span> Segment plot</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb24"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-segment</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>     {:=x0 <span class="at">:sepal-width</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>      :=y0 <span class="at">:sepal-length</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>      :=x1 <span class="at">:petal-width</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>      :=y1 <span class="at">:petal-length</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.4</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">3</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>      :=color <span class="at">:species</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,1.4,null,4.9,1.4,null,4.7,1.3,null,4.6,1.5,null,5.0,1.4,null,5.4,1.7,null,4.6,1.4,null,5.0,1.5,null,4.4,1.4,null,4.9,1.5,null,5.4,1.5,null,4.8,1.6,null,4.8,1.4,null,4.3,1.1,null,5.8,1.2,null,5.7,1.5,null,5.4,1.3,null,5.1,1.4,null,5.7,1.7,null,5.1,1.5,null,5.4,1.7,null,5.1,1.5,null,4.6,1.0,null,5.1,1.7,null,4.8,1.9,null,5.0,1.6,null,5.0,1.6,null,5.2,1.5,null,5.2,1.4,null,4.7,1.6,null,4.8,1.6,null,5.4,1.5,null,5.2,1.5,null,5.5,1.4,null,4.9,1.5,null,5.0,1.2,null,5.5,1.3,null,4.9,1.4,null,4.4,1.3,null,5.1,1.5,null,5.0,1.3,null,4.5,1.3,null,4.4,1.3,null,5.0,1.6,null,5.1,1.9,null,4.8,1.4,null,5.1,1.6,null,4.6,1.4,null,5.3,1.5,null,5.0,1.4,null],"r":null,"name":"setosa","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#1B9E77","width":3},"opacity":0.4,"lon":null,"lat":null,"x":[3.5,0.2,null,3.0,0.2,null,3.2,0.2,null,3.1,0.2,null,3.6,0.2,null,3.9,0.4,null,3.4,0.3,null,3.4,0.2,null,2.9,0.2,null,3.1,0.1,null,3.7,0.2,null,3.4,0.2,null,3.0,0.1,null,3.0,0.1,null,4.0,0.2,null,4.4,0.4,null,3.9,0.4,null,3.5,0.3,null,3.8,0.3,null,3.8,0.3,null,3.4,0.2,null,3.7,0.4,null,3.6,0.2,null,3.3,0.5,null,3.4,0.2,null,3.0,0.2,null,3.4,0.4,null,3.5,0.2,null,3.4,0.2,null,3.2,0.2,null,3.1,0.2,null,3.4,0.4,null,4.1,0.1,null,4.2,0.2,null,3.1,0.2,null,3.2,0.2,null,3.5,0.2,null,3.6,0.1,null,3.0,0.2,null,3.4,0.2,null,3.5,0.3,null,2.3,0.3,null,3.2,0.2,null,3.5,0.6,null,3.8,0.4,null,3.0,0.3,null,3.8,0.2,null,3.2,0.2,null,3.7,0.2,null,3.3,0.2,null],"text":null},{"y":[7.0,4.7,null,6.4,4.5,null,6.9,4.9,null,5.5,4.0,null,6.5,4.6,null,5.7,4.5,null,6.3,4.7,null,4.9,3.3,null,6.6,4.6,null,5.2,3.9,null,5.0,3.5,null,5.9,4.2,null,6.0,4.0,null,6.1,4.7,null,5.6,3.6,null,6.7,4.4,null,5.6,4.5,null,5.8,4.1,null,6.2,4.5,null,5.6,3.9,null,5.9,4.8,null,6.1,4.0,null,6.3,4.9,null,6.1,4.7,null,6.4,4.3,null,6.6,4.4,null,6.8,4.8,null,6.7,5.0,null,6.0,4.5,null,5.7,3.5,null,5.5,3.8,null,5.5,3.7,null,5.8,3.9,null,6.0,5.1,null,5.4,4.5,null,6.0,4.5,null,6.7,4.7,null,6.3,4.4,null,5.6,4.1,null,5.5,4.0,null,5.5,4.4,null,6.1,4.6,null,5.8,4.0,null,5.0,3.3,null,5.6,4.2,null,5.7,4.2,null,5.7,4.2,null,6.2,4.3,null,5.1,3.0,null,5.7,4.1,null],"r":null,"name":"versicolor","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#D95F02","width":3},"opacity":0.4,"lon":null,"lat":null,"x":[3.2,1.4,null,3.2,1.5,null,3.1,1.5,null,2.3,1.3,null,2.8,1.5,null,2.8,1.3,null,3.3,1.6,null,2.4,1.0,null,2.9,1.3,null,2.7,1.4,null,2.0,1.0,null,3.0,1.5,null,2.2,1.0,null,2.9,1.4,null,2.9,1.3,null,3.1,1.4,null,3.0,1.5,null,2.7,1.0,null,2.2,1.5,null,2.5,1.1,null,3.2,1.8,null,2.8,1.3,null,2.5,1.5,null,2.8,1.2,null,2.9,1.3,null,3.0,1.4,null,2.8,1.4,null,3.0,1.7,null,2.9,1.5,null,2.6,1.0,null,2.4,1.1,null,2.4,1.0,null,2.7,1.2,null,2.7,1.6,null,3.0,1.5,null,3.4,1.6,null,3.1,1.5,null,2.3,1.3,null,3.0,1.3,null,2.5,1.3,null,2.6,1.2,null,3.0,1.4,null,2.6,1.2,null,2.3,1.0,null,2.7,1.3,null,3.0,1.2,null,2.9,1.3,null,2.9,1.3,null,2.5,1.1,null,2.8,1.3,null],"text":null},{"y":[6.3,6.0,null,5.8,5.1,null,7.1,5.9,null,6.3,5.6,null,6.5,5.8,null,7.6,6.6,null,4.9,4.5,null,7.3,6.3,null,6.7,5.8,null,7.2,6.1,null,6.5,5.1,null,6.4,5.3,null,6.8,5.5,null,5.7,5.0,null,5.8,5.1,null,6.4,5.3,null,6.5,5.5,null,7.7,6.7,null,7.7,6.9,null,6.0,5.0,null,6.9,5.7,null,5.6,4.9,null,7.7,6.7,null,6.3,4.9,null,6.7,5.7,null,7.2,6.0,null,6.2,4.8,null,6.1,4.9,null,6.4,5.6,null,7.2,5.8,null,7.4,6.1,null,7.9,6.4,null,6.4,5.6,null,6.3,5.1,null,6.1,5.6,null,7.7,6.1,null,6.3,5.6,null,6.4,5.5,null,6.0,4.8,null,6.9,5.4,null,6.7,5.6,null,6.9,5.1,null,5.8,5.1,null,6.8,5.9,null,6.7,5.7,null,6.7,5.2,null,6.3,5.0,null,6.5,5.2,null,6.2,5.4,null,5.9,5.1,null],"r":null,"name":"virginica","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#7570B3","width":3},"opacity":0.4,"lon":null,"lat":null,"x":[3.3,2.5,null,2.7,1.9,null,3.0,2.1,null,2.9,1.8,null,3.0,2.2,null,3.0,2.1,null,2.5,1.7,null,2.9,1.8,null,2.5,1.8,null,3.6,2.5,null,3.2,2.0,null,2.7,1.9,null,3.0,2.1,null,2.5,2.0,null,2.8,2.4,null,3.2,2.3,null,3.0,1.8,null,3.8,2.2,null,2.6,2.3,null,2.2,1.5,null,3.2,2.3,null,2.8,2.0,null,2.8,2.0,null,2.7,1.8,null,3.3,2.1,null,3.2,1.8,null,2.8,1.8,null,3.0,1.8,null,2.8,2.1,null,3.0,1.6,null,2.8,1.9,null,3.8,2.0,null,2.8,2.2,null,2.8,1.5,null,2.6,1.4,null,3.0,2.3,null,3.4,2.4,null,3.1,1.8,null,3.0,1.8,null,3.1,2.1,null,3.1,2.4,null,3.1,2.3,null,2.7,1.9,null,3.2,2.3,null,3.3,2.5,null,3.0,2.3,null,2.5,1.9,null,3.0,2.0,null,3.4,2.3,null,3.0,1.8,null],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y","showgrid":true},"title":null}, {});</script></div>
</section>
</section>
<section id="varying-color-and-size" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="varying-color-and-size"><span class="header-section-number">2.8</span> Varying color and size</h2>
<div class="sourceClojure">
<div class="sourceCode" id="cb25"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:x</span> (<span class="kw">range</span> <span class="dv">10</span>)}</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    tc/dataset</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=x <span class="at">:x</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:x</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>                         :=mark-size (<span class="kw">range</span> <span class="dv">15</span> <span class="dv">65</span> <span class="dv">5</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>                         :=mark-color [<span class="st">"#bebada"</span>, <span class="st">"#fdb462"</span>, <span class="st">"#fb8072"</span>, <span class="st">"#d9d9d9"</span>, <span class="st">"#bc80bd"</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"#b3de69"</span>, <span class="st">"#8dd3c7"</span>, <span class="st">"#80b1d3"</span>, <span class="st">"#fccde5"</span>, <span class="st">"#ffffb3"</span>]}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[0,1,2,3,4,5,6,7,8,9],"r":null,"name":"","marker":{"color":["#bebada","#fdb462","#fb8072","#d9d9d9","#bc80bd","#b3de69","#8dd3c7","#80b1d3","#fccde5","#ffffb3"],"size":[15,20,25,30,35,40,45,50,55,60]},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[0,1,2,3,4,5,6,7,8,9],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"x","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb26"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:ABCD</span> (<span class="kw">range</span> <span class="dv">1</span> <span class="dv">11</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">:EFGH</span> [<span class="dv">5</span> <span class="fl">2.5</span> <span class="dv">5</span> <span class="fl">7.5</span> <span class="dv">5</span> <span class="fl">2.5</span> <span class="fl">7.5</span> <span class="fl">4.5</span> <span class="fl">5.5</span> <span class="dv">5</span>]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">:IJKL</span> [<span class="at">:A</span> <span class="at">:A</span> <span class="at">:A</span> <span class="at">:A</span> <span class="at">:A</span> <span class="at">:B</span> <span class="at">:B</span> <span class="at">:B</span> <span class="at">:B</span> <span class="at">:B</span>]</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">:MNOP</span> [<span class="at">:C</span> <span class="at">:D</span> <span class="at">:C</span> <span class="at">:D</span> <span class="at">:C</span> <span class="at">:D</span> <span class="at">:C</span> <span class="at">:D</span> <span class="at">:C</span> <span class="at">:D</span>]}</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    tc/dataset</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=title <span class="st">"IJKLMNOP"</span>})</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=x <span class="at">:ABCD</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:EFGH</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>                         :=color <span class="at">:IJKL</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>                         :=size <span class="at">:MNOP</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"QRST1"</span>})</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>     {:=title <span class="st">"IJKL MNOP"</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>      :=x <span class="at">:ABCD</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:ABCD</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>      :=name <span class="st">"QRST2"</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>      :=mark-color <span class="st">"magenta"</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.2</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.0,5.0,5.0],"r":null,"name":"QRST1 :A :C","marker":{"color":"#1B9E77","size":5},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[1,3,5],"text":null},{"y":[2.5,7.5],"r":null,"name":"QRST1 :A :D","marker":{"color":"#1B9E77","size":7},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[2,4],"text":null},{"y":[2.5,4.5,5.0],"r":null,"name":"QRST1 :B :D","marker":{"color":"#D95F02","size":7},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[6,8,10],"text":null},{"y":[7.5,5.5],"r":null,"name":"QRST1 :B :C","marker":{"color":"#D95F02","size":5},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[7,9],"text":null},{"y":[1,2,3,4,5,6,7,8,9,10],"r":null,"name":"QRST2","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"magenta","width":20},"opacity":0.2,"lon":null,"lat":null,"x":[1,2,3,4,5,6,7,8,9,10],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"ABCD","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"ABCD","showgrid":true},"title":"IJKLMNOP"}, {});</script></div>
</section>
<section id="time-series" class="level2" data-number="2.9">
<h2 data-number="2.9" class="anchored" data-anchor-id="time-series"><span class="header-section-number">2.9</span> Time series</h2>
<p>Date and time fields are handle appropriately. Let us, for example, draw the time series of unemployment counts.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb27"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>     {:=x <span class="at">:date</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>      :=y <span class="at">:value</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>      :=mark-color <span class="st">"purple"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"purple"},"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="multiple-layers" class="level2" data-number="2.10">
<h2 data-number="2.10" class="anchored" data-anchor-id="multiple-layers"><span class="header-section-number">2.10</span> Multiple layers</h2>
<p>We can draw more than one layer:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb28"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=x <span class="at">:date</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:value</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>                         :=mark-color <span class="st">"green"</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">20</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>                         :=mark-opacity <span class="fl">0.5</span>})</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line {:=x <span class="at">:date</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>                        :=y <span class="at">:value</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>                        :=mark-color <span class="st">"purple"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"","marker":{"color":"green","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null},{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"purple"},"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value","showgrid":true},"title":null}, {});</script></div>
<p>We can also use the <code>base</code> function for the common parameters across layers:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb29"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:date</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:value</span>})</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">20</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>                         :=mark-opacity <span class="fl">0.5</span>})</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line {:=mark-color <span class="st">"purple"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"","marker":{"color":"green","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null},{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"purple"},"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value","showgrid":true},"title":null}, {});</script></div>
<p>Layers can be named:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb30"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:date</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:value</span>})</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">20</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                         :=mark-opacity <span class="fl">0.5</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"points"</span>})</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line {:=mark-color <span class="st">"purple"</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>                        :=name <span class="st">"line"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"points","marker":{"color":"green","size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null},{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"line","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"purple"},"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="updating-data" class="level2" data-number="2.11">
<h2 data-number="2.11" class="anchored" data-anchor-id="updating-data"><span class="header-section-number">2.11</span> Updating data</h2>
<p>We can use the <code>update-data</code> function to vary the dataset along a plotting pipeline, affecting the layers that follow.</p>
<p>This functionality is inspired by <a href="https://github.com/mjskay/ggbuilder">ggbuilder</a> and <a href="https://github.com/scicloj/metamorph">metamorph</a>.</p>
<p>Here, for example, we draw a line, then sample 5 data rows, and draw them as points:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb31"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:date</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:value</span>})</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line {:=mark-color <span class="st">"purple"</span>})</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    (plotly/update-data tc/random <span class="dv">5</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">15</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>                         :=mark-opacity <span class="fl">0.5</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"purple"},"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null},{"y":[6797.0,4986.0,6032.0,5651.0,7518.0],"r":null,"name":"","marker":{"color":"green","size":15},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":["1990-04-01","1971-01-01","1998-12-01","2000-06-01","1976-08-01"],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="overriding-layer-data" class="level2" data-number="2.12">
<h2 data-number="2.12" class="anchored" data-anchor-id="overriding-layer-data"><span class="header-section-number">2.12</span> Overriding layer data</h2>
<div class="sourceClojure">
<div class="sourceCode" id="cb32"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (tc/dataset {<span class="at">:x</span> (<span class="kw">range</span> <span class="dv">4</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">:y</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">5</span> <span class="dv">9</span>]})</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    tc/dataset</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    (tc/sq <span class="at">:y</span> <span class="at">:x</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-size <span class="dv">20</span>})</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line {:=dataset (tc/dataset {<span class="at">:x</span> [<span class="dv">0</span> <span class="dv">3</span>]</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">:y</span> [<span class="dv">1</span> <span class="dv">10</span>]})</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>                        :=mark-size <span class="dv">5</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[0,1,4,9],"r":null,"name":"","marker":{"size":20},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[0,1,2,3],"text":null},{"y":[1,10],"r":null,"name":"","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"width":5},"lon":null,"lat":null,"x":[0,3],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="smoothing" class="level2" data-number="2.13">
<h2 data-number="2.13" class="anchored" data-anchor-id="smoothing"><span class="header-section-number">2.13</span> Smoothing</h2>
<p><code>layer-smooth</code> is a layer that applies statistical regression methods to the dataset to model it as a smooth shape. It is inspired by ggplotâ€™s <a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb33"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:sepal-width</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"Actual"</span>})</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-smooth {:=mark-color <span class="st">"orange"</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>                          :=name <span class="st">"Predicted"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0,7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"Actual","marker":{"color":"green"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null},{"y":[6.0795004286346845,6.034828216408704,6.034828216408704,6.034828216408704,6.012492110295715,6.012492110295715,6.012492110295715,6.012492110295715,5.990156004182724,5.990156004182724,5.990156004182724,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.945483791956744,5.945483791956744,5.945483791956744,5.945483791956744,5.945483791956744,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.789131049165814,5.789131049165814,5.789131049165814,5.789131049165814,5.789131049165814,5.789131049165814,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.722122730826844,5.722122730826844,5.722122730826844,5.722122730826844,5.699786624713854,5.699786624713854,5.699786624713854,5.677450518600864,5.677450518600864,5.677450518600864,5.677450518600864,5.677450518600864,5.677450518600864,5.655114412487874,5.655114412487874,5.632778306374885,5.610442200261894,5.5881060941489045,5.543433881922924],"r":null,"name":"Predicted","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"orange"},"lon":null,"lat":null,"x":[2.0,2.2,2.2,2.2,2.3,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.3,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.6,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.8,3.8,3.9,3.9,4.0,4.1,4.2,4.4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
<p>By default, the regression is computed with only one predictor variable, which is <code>:=x</code>. But this can be overriden using the <code>:=predictors</code> key. We may compute a regression with more than one predictor.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb34"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:sepal-width</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"Actual"</span>})</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-smooth {:=predictors [<span class="at">:petal-width</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">:petal-length</span>]</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>                          :=mark-opacity <span class="fl">0.5</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>                          :=name <span class="st">"Predicted"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0,7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"Actual","marker":{"color":"green"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null},{"y":[5.767251906091401,6.149253779506226,6.038140482961453,6.420142356376278,5.942275314766285,6.158986176262327,4.79902756031856,5.658896475343379,5.875607336839422,5.658896475343379,5.897829996148376,6.085343667376113,6.757698911173195,5.942275314766285,5.464408273156291,6.292322132116054,5.952007711522386,6.365964641002268,6.260367076050998,6.190941232327384,5.767251906091401,7.193878499962031,6.777163704685398,5.974230370831341,6.3464998474900645,6.442365015685233,6.3464998474900645,6.092318198335464,6.270099472807099,5.92005265545733,6.050630745514306,6.454855278238086,5.856142543327218,6.353474378449415,5.942275314766285,6.2034314948802365,6.213163891636338,6.2159217574330885,7.181388237409178,6.206189360676987,6.186724567164784,6.88827700123017,5.996453030140295,6.47432007175029,6.5534783122300055,6.343741981693313,6.521523256164949,6.267341607010348,6.289564266319303,4.885160331757627,7.0285874880432475,6.649343480425173,6.104808460888316,6.050630745514306,6.149253779506226,6.104808460888316,5.725564453270243,4.885160331757627,4.917115387822683,4.754582241700652,4.993515762505648,4.830982616383617,4.853205275692571,5.986720633384194,6.149253779506226,6.127031120197271,6.356232244246166,6.149253779506226,5.996453030140295,6.235386550945292,6.082585801579363,6.716011458352037,6.629878686912971,7.095255465970111,6.499300596855995,6.5951657650511635,6.270099472807099,6.821609023303307,6.760456776969946,6.2159217574330885,6.272857338603851,6.36872250679902,6.378454903555121,4.993515762505648,6.5951657650511635,4.971293103196693,6.445122881481985,4.9393380471316375,6.365964641002268,4.9393380471316375,6.257609210254246,6.21867962322984,6.127031120197271,6.457613144034837,6.866054341921216,6.652101346221925,4.776804901009606,4.830982616383617,4.993515762505648,4.885160331757627,6.2159217574330885,6.314544791425009,6.289564266319303,6.149253779506226,6.327035053977862,4.830982616383617,6.543745915473904,4.885160331757627,6.225654154189191,6.607656027604016,6.479835803343792,6.642368949465824,4.95182830968449,4.853205275692571,4.9393380471316375,4.993515762505648,4.885160331757627,4.929605650375535,4.875427935001525,5.15604890862768,5.047693477879658,4.9393380471316375,6.117298723441169,6.3812127693518725,6.457613144034837,4.830982616383617,4.9393380471316375,4.885160331757627,4.853205275692571,4.865695538245424,4.79902756031856,6.6965466648398335,4.668449470261584,4.885160331757627,4.917115387822683,4.9393380471316375,4.875427935001525,4.9393380471316375,4.907382991066581,5.015738421814603,4.993515762505648,5.092138796497568,7.018855091287146,7.1174781252790655,4.983783365749546,4.767072504253504,4.776804901009606,4.971293103196693,4.885160331757627,4.875427935001525],"r":null,"name":"Predicted","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":[2.0,2.2,2.2,2.2,2.3,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.3,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.6,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.8,3.8,3.9,3.9,4.0,4.1,4.2,4.4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
<p>We can also specify the predictor columns as expressions through the <code>:=design-matrix</code> key. Here, we use the design matrix functionality of <a href="https://github.com/scicloj/metamorph.ml">Metamorph.ml</a>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb35"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:sepal-width</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"Actual"</span>})</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-smooth {:=design-matrix [[<span class="at">:sepal-width</span> '(<span class="kw">identity</span> <span class="at">:sepal-width</span>)]</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>                                           [<span class="at">:sepal-width-2</span> '(<span class="kw">*</span> <span class="at">:sepal-width</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>                                                               <span class="at">:sepal-width</span>)]]</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>                          :=mark-opacity <span class="fl">0.5</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>                          :=name <span class="st">"Predicted"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0,7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"Actual","marker":{"color":"green"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null},{"y":[5.623357228968141,5.752929009412405,5.752929009412405,5.752929009412405,5.804976768473557,5.804976768473557,5.804976768473557,5.804976768473557,5.848532440094056,5.848532440094056,5.848532440094056,5.883596024273904,5.883596024273904,5.883596024273904,5.883596024273904,5.883596024273904,5.883596024273904,5.883596024273904,5.883596024273904,5.910167521013097,5.910167521013097,5.910167521013097,5.910167521013097,5.910167521013097,5.928246930311639,5.928246930311639,5.928246930311639,5.928246930311639,5.928246930311639,5.928246930311639,5.928246930311639,5.928246930311639,5.928246930311639,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.937834252169527,5.938929486586762,5.938929486586762,5.938929486586762,5.938929486586762,5.938929486586762,5.938929486586762,5.938929486586762,5.938929486586762,5.938929486586762,5.938929486586762,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.931532633563345,5.915643693099275,5.915643693099275,5.915643693099275,5.915643693099275,5.915643693099275,5.915643693099275,5.915643693099275,5.915643693099275,5.915643693099275,5.915643693099275,5.915643693099275,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.891262665194551,5.858389549849177,5.858389549849177,5.858389549849177,5.858389549849177,5.858389549849177,5.858389549849177,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.817024347063148,5.767167056836467,5.767167056836467,5.767167056836467,5.767167056836467,5.767167056836467,5.767167056836467,5.708817679169131,5.708817679169131,5.708817679169131,5.708817679169131,5.641976214061144,5.641976214061144,5.641976214061144,5.566642661512503,5.566642661512503,5.566642661512503,5.566642661512503,5.566642661512503,5.566642661512503,5.482817021523212,5.482817021523212,5.3904992940932654,5.289689479222666,5.180387576911414,4.936307509966953],"r":null,"name":"Predicted","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":[2.0,2.2,2.2,2.2,2.3,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.3,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.6,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.8,3.8,3.9,3.9,4.0,4.1,4.2,4.4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
<p>Inspired by Sami Kallinenâ€™s <a href="https://2024.heartofclojure.eu/talks/sailing-with-scicloj-a-bayesian-adventure/">Heart of Clojure talk</a>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb36"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:sepal-width</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"Actual"</span>})</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-smooth {:=design-matrix [[<span class="at">:sepal-width</span> '(<span class="kw">identity</span> <span class="at">:sepal-width</span>)]</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>                                           [<span class="at">:sepal-width-2</span> '(<span class="kw">*</span> <span class="at">:sepal-width</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>                                                               <span class="at">:sepal-width</span>)]</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>                                           [<span class="at">:sepal-width-3</span> '(<span class="kw">*</span> <span class="at">:sepal-width</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>                                                               <span class="at">:sepal-width</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>                                                               <span class="at">:sepal-width</span>)]]</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>                          :=mark-opacity <span class="fl">0.5</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>                          :=name <span class="st">"Predicted"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0,7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"Actual","marker":{"color":"green"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null},{"y":[4.820520496666514,5.445547049443327,5.445547049443327,5.445547049443327,5.666009864680454,5.666009864680454,5.666009864680454,5.666009864680454,5.832200401345943,5.832200401345943,5.832200401345943,5.949439681086687,5.949439681086687,5.949439681086687,5.949439681086687,5.949439681086687,5.949439681086687,5.949439681086687,5.949439681086687,6.023048725549629,6.023048725549629,6.023048725549629,6.023048725549629,6.023048725549629,6.058348556381649,6.058348556381649,6.058348556381649,6.058348556381649,6.058348556381649,6.058348556381649,6.058348556381649,6.058348556381649,6.058348556381649,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.060660195229662,6.035304663740593,6.035304663740593,6.035304663740593,6.035304663740593,6.035304663740593,6.035304663740593,6.035304663740593,6.035304663740593,6.035304663740593,6.035304663740593,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.987602983561352,5.922876176338814,5.922876176338814,5.922876176338814,5.922876176338814,5.922876176338814,5.922876176338814,5.922876176338814,5.922876176338814,5.922876176338814,5.922876176338814,5.922876176338814,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.846445263719939,5.763631267351599,5.763631267351599,5.763631267351599,5.763631267351599,5.763631267351599,5.763631267351599,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.679755208880742,5.600138109954223,5.600138109954223,5.600138109954223,5.600138109954223,5.600138109954223,5.600138109954223,5.530100992218998,5.530100992218998,5.530100992218998,5.530100992218998,5.474964877321959,5.474964877321959,5.474964877321959,5.440050786910014,5.440050786910014,5.440050786910014,5.440050786910014,5.440050786910014,5.440050786910014,5.43067974263009,5.43067974263009,5.452172766129088,5.5098508790539,5.609035103051468,5.953205970852451],"r":null,"name":"Predicted","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":[2.0,2.2,2.2,2.2,2.3,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.3,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.6,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.8,3.8,3.9,3.9,4.0,4.1,4.2,4.4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
<p>One can also provide the regression model details through <code>:=model-options</code> and use any regression model and parameters registered by Metamorph.ml.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb37"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">require</span> <span class="at">'scicloj.ml.tribuo</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb38"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> regression-tree-options</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:model-type</span> <span class="at">:scicloj.ml.tribuo/regression</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:tribuo-components</span> [{<span class="at">:name</span> <span class="st">"cart"</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">:type</span> <span class="st">"org.tribuo.regression.rtree.CARTRegressionTrainer"</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">:properties</span> {<span class="at">:maxDepth</span> <span class="st">"8"</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">:fractionFeaturesInSplit</span> <span class="st">"1.0"</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">:seed</span> <span class="st">"12345"</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">:impurity</span> <span class="st">"mse"</span>}}</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                       {<span class="at">:name</span> <span class="st">"mse"</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">:type</span> <span class="st">"org.tribuo.regression.rtree.impurity.MeanSquaredError"</span>}]</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>   <span class="at">:tribuo-trainer-name</span> <span class="st">"cart"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb39"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:sepal-width</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-color <span class="st">"green"</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"Actual"</span>})</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-smooth {:=model-options regression-tree-options</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>                          :=mark-opacity <span class="fl">0.5</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>                          :=name <span class="st">"Predicted"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0,7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"Actual","marker":{"color":"green"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null},{"y":[5.0,6.066666603088379,6.066666603088379,6.066666603088379,5.325000047683716,5.325000047683716,5.325000047683716,5.325000047683716,5.300000031789144,5.300000031789144,5.300000031789144,5.762499988079071,5.762499988079071,5.762499988079071,5.762499988079071,5.762499988079071,5.762499988079071,5.762499988079071,5.762499988079071,6.15999994277954,6.15999994277954,6.15999994277954,6.15999994277954,6.15999994277954,5.855555640326605,5.855555640326605,5.855555640326605,5.855555640326605,5.855555640326605,5.855555640326605,5.855555640326605,5.855555640326605,5.855555640326605,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.335714272090366,6.059999990463257,6.059999990463257,6.059999990463257,6.059999990463257,6.059999990463257,6.059999990463257,6.059999990463257,6.059999990463257,6.059999990463257,6.059999990463257,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.015384600712703,6.0363636450334015,6.0363636450334015,6.0363636450334015,6.0363636450334015,6.0363636450334015,6.0363636450334015,6.0363636450334015,6.0363636450334015,6.0363636450334015,6.0363636450334015,6.0363636450334015,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,5.884615384615384,6.016666650772095,6.016666650772095,6.016666650772095,6.016666650772095,6.016666650772095,6.016666650772095,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.316666682561239,5.149999936421712,5.149999936421712,5.149999936421712,5.149999936421712,5.149999936421712,5.149999936421712,5.424999952316284,5.424999952316284,5.424999952316284,5.424999952316284,5.266666730244954,5.266666730244954,5.266666730244954,6.099999904632568,6.099999904632568,6.099999904632568,6.099999904632568,6.099999904632568,6.099999904632568,5.400000095367432,5.400000095367432,5.800000190734863,5.299999872843425,5.299999872843425,5.699999809265137],"r":null,"name":"Predicted","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":[2.0,2.2,2.2,2.2,2.3,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.3,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.6,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.8,3.8,3.9,3.9,4.0,4.1,4.2,4.4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
<p>An example inspired by Plotlyâ€™s <a href="https://plotly.com/python/ml-regression/">ML Regressoin in Python</a> example.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb40"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defonce</span><span class="fu"> tips</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> <span class="st">"https://raw.githubusercontent.com/plotly/datasets/master/tips.csv"</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>      (tc/dataset {<span class="at">:key-fn</span> <span class="kw">keyword</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb41"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> tips</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>    (tc/split <span class="at">:holdout</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:total</span>_bill</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:tip</span>})</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=color :$split-name})</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    (plotly/update-data (<span class="kw">fn</span> [ds]</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>                          (<span class="kw">-&gt;</span> ds</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>                              (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> :$split-name (<span class="kw">=</span> <span class="at">:train</span>))))))</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-smooth {:=model-options regression-tree-options</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>                          :=name <span class="st">"prediction"</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>                          :=mark-color <span class="st">"purple"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[2.56,3.15,3.5,2.0,2.55,2.0,2.5,4.0,3.48,5.0,2.0,5.0,1.0,3.71,10.0,4.0,5.16,3.0,7.58,4.34,2.0,2.05,1.83,5.14,2.83,2.0,2.92,6.5,1.5,3.09,5.0,3.11,5.17,1.45,2.0,2.24,2.0,3.0,1.66,2.5,2.0,3.0,1.47,5.0,6.73,3.0,2.0,2.0,3.5,2.0,4.0,1.0,1.68,2.5,3.18,2.0,3.0,5.85,1.5,2.02,3.0,2.5,3.48,4.73,3.0,5.0,3.0,3.25,3.0,3.0,3.21,3.5,2.0,3.08,3.4,2.24,1.5,1.44,2.0,3.31,3.23,3.6,2.5,2.54,4.0,2.3,5.0,3.48,1.36,1.1,1.5,3.35,3.12,2.0,3.5,3.0,2.0,1.8,3.5,3.76,6.7,3.92,1.0,3.14,5.0,1.57,5.6,4.08,2.5,3.0,1.71,1.63,2.45,2.31,4.67,1.58,1.76,4.0,1.5,2.0,2.88,2.01,4.29,6.5,3.0,3.68,1.64,2.64,2.0,2.72,4.0,1.25,2.5,2.01,3.07,9.0,3.75,1.25,2.0,2.2,1.97,2.0,3.0,2.74,3.51,2.23,3.5,1.5,3.0,2.23,1.61,3.0,3.06,4.2,4.5,2.0,2.5,3.0,2.0,4.71,2.0,5.0],"r":null,"name":":train","marker":{"color":"#1B9E77"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[28.44,20.08,17.47,14.52,23.95,14.48,44.3,18.28,22.42,31.27,12.26,25.28,3.07,16.29,50.81,25.71,25.89,17.51,39.42,25.56,16.21,28.55,10.07,29.85,20.27,22.67,24.08,28.17,19.08,30.14,48.17,32.9,34.83,9.55,10.34,20.76,10.09,21.01,10.34,14.07,27.18,19.44,10.77,20.69,48.27,18.78,19.77,13.81,22.49,16.49,23.1,7.25,13.42,18.35,31.85,8.77,15.38,24.71,12.46,15.48,38.73,16.27,24.52,40.17,20.45,32.68,18.04,22.75,28.97,38.01,20.29,21.5,15.95,17.92,16.66,16.04,26.41,7.74,13.0,23.68,16.47,24.06,12.66,17.46,16.58,16.43,35.26,13.42,18.64,12.9,11.17,20.65,26.88,14.15,16.97,15.98,17.89,12.43,45.35,18.29,34.3,21.58,5.75,26.86,22.23,15.42,30.4,17.92,16.4,18.29,10.27,11.87,20.69,18.69,35.83,13.42,11.24,18.71,10.65,16.31,22.12,20.23,25.21,23.17,40.55,34.65,15.36,17.59,10.63,13.28,27.28,8.51,13.27,12.74,16.93,48.33,25.0,10.07,13.51,14.73,12.02,13.0,28.15,17.26,19.49,15.77,17.31,8.35,15.53,12.76,10.59,14.0,13.94,29.8,31.71,30.06,12.54,17.07,13.37,25.29,24.01,27.05],"text":null},{"y":[2.34,3.18,6.0,3.0,2.03,1.01,1.25,5.2,1.73,3.16,5.07,1.5,4.19,3.23,2.03,4.06,2.0,4.0,1.0,2.0,2.0,2.31,2.09,3.0,2.18,1.98,1.75,2.0,2.0,3.5,2.47,5.15,3.5,3.76,2.5,2.0,3.39,4.0,3.0,2.0,3.27,2.71,4.0,1.44,4.0,1.5,3.61,1.56,2.75,2.5,5.65,2.0,2.0,2.75,1.48,3.0,3.41,4.0,2.61,2.52,4.08,2.0,5.92,3.5,2.2,1.96,3.25,1.17,1.92,4.3,3.55,1.32,3.0,5.0,1.67,4.0,3.0,3.02,2.6,1.5,4.3,5.0],"r":null,"name":":test","marker":{"color":"#D95F02"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[17.81,19.82,32.4,19.65,15.98,16.99,10.51,34.81,9.78,15.81,29.93,15.69,19.81,14.78,24.27,20.49,30.46,9.6,12.6,10.33,13.13,11.69,15.01,15.06,22.82,11.02,17.82,13.03,13.81,18.15,16.45,7.25,21.01,18.24,14.26,16.0,11.61,27.2,15.69,24.55,17.78,17.29,14.31,7.56,20.53,12.03,24.59,9.94,13.16,11.35,23.33,7.51,12.69,20.29,8.52,22.76,26.59,16.82,13.39,12.48,20.92,11.38,29.03,20.9,12.16,15.04,18.26,32.83,8.58,16.32,34.63,9.68,18.43,41.19,10.33,38.07,21.16,14.83,10.29,11.59,21.7,43.11],"text":null},{"y":[1.0,1.0,1.0,1.4075000286102295,1.4075000286102295,1.4075000286102295,2.0,1.495000034570694,1.495000034570694,1.495000034570694,2.0,1.7816666762034097,1.7816666762034097,1.7816666762034097,1.7816666762034097,1.7816666762034097,1.4925000071525574,1.4925000071525574,1.4925000071525574,1.7742857081549508,1.7742857081549508,1.7742857081549508,1.7742857081549508,1.7742857081549508,1.7742857081549508,2.5,2.5,2.0833333333333335,2.0833333333333335,1.550000011920929,1.550000011920929,1.550000011920929,2.5733333428700766,2.5733333428700766,2.1480000019073486,2.1480000019073486,2.1480000019073486,2.1480000019073486,2.0,2.0,2.9049999713897705,2.9049999713897705,2.9049999713897705,2.0,2.0,2.0,2.200000047683716,1.6399999856948853,3.0,1.7200000286102295,1.7200000286102295,2.4957142898014615,2.4957142898014615,2.4957142898014615,2.4957142898014615,2.4957142898014615,2.4957142898014615,2.9033333460489907,2.9033333460489907,2.0,2.6324999928474426,2.6324999928474426,2.6324999928474426,2.0,4.0,3.3425000309944153,3.3425000309944153,3.3425000309944153,3.039999995912824,3.039999995912824,3.039999995912824,3.039999995912824,3.039999995912824,3.039999995912824,2.426666736602783,2.426666736602783,3.5799999237060547,3.5799999237060547,3.0,3.689999997615814,3.689999997615814,3.689999997615814,2.167499989271164,2.167499989271164,2.167499989271164,4.0,2.5,2.5,2.7857142857142856,2.7857142857142856,2.7857142857142856,2.7857142857142856,2.7857142857142856,2.7857142857142856,3.3700000047683716,3.3700000047683716,3.3700000047683716,3.3700000047683716,3.3700000047683716,2.493333339691162,2.493333339691162,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,3.8596000003814703,2.907499998807907,2.907499998807907,2.907499998807907,2.907499998807907,2.907499998807907,2.907499998807907,2.907499998807907,6.5,2.5424999594688416,2.5424999594688416,2.5424999594688416,4.199999809265137,5.139999866485596,2.363333304723104,2.363333304723104,5.399999936421712,5.399999936421712,4.057999992370606,4.057999992370606,4.057999992370606,4.057999992370606,6.699999809265137,4.440000057220459,4.440000057220459,4.440000057220459,4.440000057220459,3.0,3.0,6.629999955495198,6.629999955495198,3.0,3.0,3.0,5.0,8.115000009536743,8.115000009536743,8.115000009536743],"r":null,"name":"prediction","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"purple"},"lon":null,"lat":null,"x":[3.07,5.75,7.25,7.74,8.35,8.51,8.77,9.55,10.07,10.07,10.09,10.27,10.34,10.34,10.59,10.63,10.65,10.77,11.17,11.24,11.87,12.02,12.26,12.43,12.46,12.54,12.66,12.74,12.76,12.9,13.0,13.0,13.27,13.28,13.37,13.42,13.42,13.42,13.51,13.81,13.94,14.0,14.07,14.15,14.48,14.52,14.73,15.36,15.38,15.42,15.48,15.53,15.77,15.95,15.98,16.04,16.21,16.27,16.29,16.31,16.4,16.43,16.47,16.49,16.58,16.66,16.93,16.97,17.07,17.26,17.31,17.46,17.47,17.51,17.59,17.89,17.92,17.92,18.04,18.28,18.29,18.29,18.35,18.64,18.69,18.71,18.78,19.08,19.44,19.49,19.77,20.08,20.23,20.27,20.29,20.45,20.65,20.69,20.69,20.76,21.01,21.5,21.58,22.12,22.23,22.42,22.49,22.67,22.75,23.1,23.17,23.68,23.95,24.01,24.06,24.08,24.52,24.71,25.0,25.21,25.28,25.29,25.56,25.71,25.89,26.41,26.86,26.88,27.05,27.18,27.28,28.15,28.17,28.44,28.55,28.97,29.8,29.85,30.06,30.14,30.4,31.27,31.71,31.85,32.68,32.9,34.3,34.65,34.83,35.26,35.83,38.01,38.73,39.42,40.17,40.55,44.3,45.35,48.17,48.27,48.33,50.81],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"total_bill","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"tip","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="grouping" class="level2" data-number="2.14">
<h2 data-number="2.14" class="anchored" data-anchor-id="grouping"><span class="header-section-number">2.14</span> Grouping</h2>
<p>The regression computed by <code>layer-smooth</code> is affected by the inferred grouping of the data.</p>
<p>For example, here we recieve three regression lines, each for every species.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb42"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=title <span class="st">"dummy"</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                  :=color <span class="at">:species</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>                  :=x <span class="at">:sepal-width</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    plotly/layer-point</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    plotly/layer-smooth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0],"r":null,"name":"setosa","marker":{"color":"#1B9E77"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"text":null},{"y":[7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7],"r":null,"name":"versicolor","marker":{"color":"#D95F02"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"text":null},{"y":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"virginica","marker":{"color":"#7570B3"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null},{"y":[4.227127599136462,4.6414214293830245,4.710470401090785,4.710470401090785,4.710470401090785,4.710470401090785,4.710470401090785,4.710470401090785,4.779519372798546,4.779519372798546,4.779519372798546,4.779519372798546,4.848568344506306,4.848568344506306,4.848568344506306,4.848568344506306,4.848568344506306,4.917617316214066,4.917617316214066,4.986666287921827,4.986666287921827,4.986666287921827,4.986666287921827,4.986666287921827,4.986666287921827,4.986666287921827,4.986666287921827,4.986666287921827,5.055715259629588,5.055715259629588,5.055715259629588,5.055715259629588,5.055715259629588,5.055715259629588,5.124764231337348,5.124764231337348,5.124764231337348,5.193813203045109,5.193813203045109,5.193813203045109,5.26286217475287,5.26286217475287,5.26286217475287,5.26286217475287,5.33191114646063,5.33191114646063,5.40096011816839,5.470009089876151,5.539058061583912,5.677156004999433],"r":null,"name":"setosa","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#1B9E77"},"lon":null,"lat":null,"x":[2.3,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.9,3.9,4.0,4.1,4.2,4.4],"text":null},{"y":[5.269890155440414,5.442905699481864,5.442905699481864,5.52941347150259,5.52941347150259,5.52941347150259,5.6159212435233155,5.6159212435233155,5.6159212435233155,5.70242901554404,5.70242901554404,5.70242901554404,5.70242901554404,5.788936787564766,5.788936787564766,5.788936787564766,5.875444559585491,5.875444559585491,5.875444559585491,5.875444559585491,5.875444559585491,5.961952331606216,5.961952331606216,5.961952331606216,5.961952331606216,5.961952331606216,5.961952331606216,6.048460103626942,6.048460103626942,6.048460103626942,6.048460103626942,6.048460103626942,6.048460103626942,6.048460103626942,6.134967875647667,6.134967875647667,6.134967875647667,6.134967875647667,6.134967875647667,6.134967875647667,6.134967875647667,6.134967875647667,6.221475647668393,6.221475647668393,6.221475647668393,6.307983419689117,6.307983419689117,6.307983419689117,6.394491191709843,6.480998963730569],"r":null,"name":"versicolor","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#D95F02"},"lon":null,"lat":null,"x":[2.0,2.2,2.2,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.2,3.2,3.2,3.3,3.4],"text":null},{"y":[5.890212315058276,6.160672658058943,6.160672658058943,6.160672658058943,6.160672658058943,6.2508261057258325,6.2508261057258325,6.340979553392722,6.340979553392722,6.340979553392722,6.340979553392722,6.43113300105961,6.43113300105961,6.43113300105961,6.43113300105961,6.43113300105961,6.43113300105961,6.43113300105961,6.43113300105961,6.521286448726499,6.521286448726499,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.611439896393389,6.701593344060278,6.701593344060278,6.701593344060278,6.701593344060278,6.791746791727167,6.791746791727167,6.791746791727167,6.791746791727167,6.791746791727167,6.8819002393940565,6.8819002393940565,6.8819002393940565,6.972053687060945,6.972053687060945,7.152360582394723,7.332667477728501,7.332667477728501],"r":null,"name":"virginica","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#7570B3"},"lon":null,"lat":null,"x":[2.2,2.5,2.5,2.5,2.5,2.6,2.6,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.4,3.4,3.6,3.8,3.8],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":"dummy"}, {});</script></div>
<p>This happened because the <code>:color</code> field was <code>:species</code>, which is of <code>:nominal</code> type.</p>
<p>But we may override this using the <code>:group</code> key. For example, let us avoid grouping:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb43"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=title <span class="st">"dummy"</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                  :=color <span class="at">:species</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                  :=group []</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>                  :=x <span class="at">:sepal-width</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    plotly/layer-point</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    plotly/layer-smooth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0],"r":null,"name":"setosa","marker":{"color":"#1B9E77"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"text":null},{"y":[7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7],"r":null,"name":"versicolor","marker":{"color":"#D95F02"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"text":null},{"y":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"virginica","marker":{"color":"#7570B3"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null},{"y":[6.0795004286346845,6.034828216408704,6.034828216408704,6.012492110295715,6.012492110295715,6.012492110295715,5.990156004182724,5.990156004182724,5.990156004182724,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.945483791956744,5.945483791956744,5.945483791956744,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.833803261391794,5.833803261391794,5.833803261391794,5.811467155278804,5.811467155278804,5.811467155278804,5.789131049165814,5.766794943052824],"r":null,"name":"versicolor","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#D95F02"},"lon":null,"lat":null,"x":[2.0,2.2,2.2,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.2,3.2,3.2,3.3,3.4],"text":null},{"y":[6.034828216408704,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.945483791956744,5.945483791956744,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.878475473617774,5.878475473617774,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.789131049165814,5.789131049165814,5.789131049165814,5.766794943052824,5.766794943052824,5.722122730826844,5.677450518600864,5.677450518600864],"r":null,"name":"virginica","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#7570B3"},"lon":null,"lat":null,"x":[2.2,2.5,2.5,2.5,2.5,2.6,2.6,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.4,3.4,3.6,3.8,3.8],"text":null},{"y":[6.012492110295715,5.878475473617774,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.789131049165814,5.789131049165814,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.722122730826844,5.722122730826844,5.722122730826844,5.699786624713854,5.699786624713854,5.699786624713854,5.677450518600864,5.677450518600864,5.677450518600864,5.677450518600864,5.655114412487874,5.655114412487874,5.632778306374885,5.610442200261894,5.5881060941489045,5.543433881922924],"r":null,"name":"setosa","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#1B9E77"},"lon":null,"lat":null,"x":[2.3,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.9,3.9,4.0,4.1,4.2,4.4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":"dummy"}, {});</script></div>
<p>Alternatively, we may assign the <code>:=color</code> only to the points layer without affecting the smoothing layer.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb44"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=title <span class="st">"dummy"</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>                  :=x <span class="at">:sepal-width</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:sepal-length</span>})</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=color <span class="at">:species</span>})</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-smooth {:=name <span class="st">"Predicted"</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>                          :=mark-color <span class="st">"blue"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0],"r":null,"name":"setosa","marker":{"color":"#1B9E77"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"text":null},{"y":[7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7],"r":null,"name":"versicolor","marker":{"color":"#D95F02"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"text":null},{"y":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"virginica","marker":{"color":"#7570B3"},"fill":null,"mode":"markers","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null},{"y":[6.0795004286346845,6.034828216408704,6.034828216408704,6.034828216408704,6.012492110295715,6.012492110295715,6.012492110295715,6.012492110295715,5.990156004182724,5.990156004182724,5.990156004182724,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.967819898069735,5.945483791956744,5.945483791956744,5.945483791956744,5.945483791956744,5.945483791956744,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.923147685843754,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.900811579730765,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.878475473617774,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.856139367504785,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.833803261391794,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.811467155278804,5.789131049165814,5.789131049165814,5.789131049165814,5.789131049165814,5.789131049165814,5.789131049165814,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.766794943052824,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.744458836939835,5.722122730826844,5.722122730826844,5.722122730826844,5.722122730826844,5.699786624713854,5.699786624713854,5.699786624713854,5.677450518600864,5.677450518600864,5.677450518600864,5.677450518600864,5.677450518600864,5.677450518600864,5.655114412487874,5.655114412487874,5.632778306374885,5.610442200261894,5.5881060941489045,5.543433881922924],"r":null,"name":"Predicted","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"blue"},"lon":null,"lat":null,"x":[2.0,2.2,2.2,2.2,2.3,2.3,2.3,2.3,2.4,2.4,2.4,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.6,2.6,2.6,2.6,2.6,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.7,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.8,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,2.9,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.1,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.2,3.3,3.3,3.3,3.3,3.3,3.3,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.4,3.5,3.5,3.5,3.5,3.5,3.5,3.6,3.6,3.6,3.6,3.7,3.7,3.7,3.8,3.8,3.8,3.8,3.8,3.8,3.9,3.9,4.0,4.1,4.2,4.4],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":"dummy"}, {});</script></div>
</section>
<section id="example-out-of-sample-predictions" class="level2" data-number="2.15">
<h2 data-number="2.15" class="anchored" data-anchor-id="example-out-of-sample-predictions"><span class="header-section-number">2.15</span> Example: out-of-sample predictions</h2>
<p>Here is a slighly more elaborate example inpired by the London Clojurians <a href="https://www.youtube.com/watch?v=eUFf3-og_-Y">talk</a> mentioned in the preface.</p>
<p>Assume we wish to predict the unemployment rate for 96 months. Let us add those months to our dataset, and mark them as <code>Future</code> (considering the original data as <code>Past</code>):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb45"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:relative-time</span> <span class="st">"Past"</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    (tc/concat (tc/dataset {<span class="at">:date</span> (<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">:date</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="kw">last</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>                                      (datetime/plus-temporal-amount (<span class="kw">range</span> <span class="dv">96</span>) <span class="at">:days</span>))</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">:relative-time</span> <span class="st">"Future"</span>}))</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    (print/print-range <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>https://vincentarelbundock.github.io/Rdatasets/csv/ggplot2/economics_long.csv [670 6]:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 15%">
<col style="width: 17%">
<col style="width: 15%">
<col style="width: 11%">
<col style="width: 17%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">:rownames</th>
<th>:date</th>
<th>:variable</th>
<th style="text-align: right;">:value</th>
<th style="text-align: right;">:value-01</th>
<th>:relative-time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2297</td>
<td>1967-07-01</td>
<td>unemploy</td>
<td style="text-align: right;">2944.0</td>
<td style="text-align: right;">0.02044683</td>
<td>Past</td>
</tr>
<tr class="even">
<td style="text-align: right;">2298</td>
<td>1967-08-01</td>
<td>unemploy</td>
<td style="text-align: right;">2945.0</td>
<td style="text-align: right;">0.02052578</td>
<td>Past</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2299</td>
<td>1967-09-01</td>
<td>unemploy</td>
<td style="text-align: right;">2958.0</td>
<td style="text-align: right;">0.02155206</td>
<td>Past</td>
</tr>
<tr class="even">
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td>2015-07-02</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td>2015-07-03</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td>2015-07-04</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td>2015-07-05</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
</tr>
</tbody>
</table>
</div>
<p>Let us represent our dates as numbers, so that we can use them in linear regression:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb46"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:relative-time</span> <span class="st">"Past"</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    (tc/concat (tc/dataset {<span class="at">:date</span> (<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">:date</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="kw">last</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>                                      (datetime/plus-temporal-amount (<span class="kw">range</span> <span class="dv">96</span>) <span class="at">:months</span>))</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">:relative-time</span> <span class="st">"Future"</span>}))</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:year</span> #(datetime/long-temporal-field <span class="at">:years</span> (<span class="at">:date</span> <span class="va">%</span>)))</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:month</span> #(datetime/long-temporal-field <span class="at">:months</span> (<span class="at">:date</span> <span class="va">%</span>)))</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    (tc/map-columns <span class="at">:yearmonth</span> [<span class="at">:year</span> <span class="at">:month</span>] (<span class="kw">fn</span> [y m] (<span class="kw">+</span> m (<span class="kw">*</span> <span class="dv">12</span> y))))</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    (print/print-range <span class="dv">6</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="clay-dataset">
<p>https://vincentarelbundock.github.io/Rdatasets/csv/ggplot2/economics_long.csv [670 9]:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 16%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">:rownames</th>
<th>:date</th>
<th>:variable</th>
<th style="text-align: right;">:value</th>
<th style="text-align: right;">:value-01</th>
<th>:relative-time</th>
<th style="text-align: right;">:year</th>
<th style="text-align: right;">:month</th>
<th style="text-align: right;">:yearmonth</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2297</td>
<td>1967-07-01</td>
<td>unemploy</td>
<td style="text-align: right;">2944.0</td>
<td style="text-align: right;">0.02044683</td>
<td>Past</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">23611</td>
</tr>
<tr class="even">
<td style="text-align: right;">2298</td>
<td>1967-08-01</td>
<td>unemploy</td>
<td style="text-align: right;">2945.0</td>
<td style="text-align: right;">0.02052578</td>
<td>Past</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">23612</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2299</td>
<td>1967-09-01</td>
<td>unemploy</td>
<td style="text-align: right;">2958.0</td>
<td style="text-align: right;">0.02155206</td>
<td>Past</td>
<td style="text-align: right;">1967</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">23613</td>
</tr>
<tr class="even">
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
<td>â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td>â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
<td style="text-align: right;">â€¦</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td>2022-12-01</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
<td style="text-align: right;">2022</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">24276</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td>2023-01-01</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">24277</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td>2023-02-01</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">24278</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td>2023-03-01</td>
<td></td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td>Future</td>
<td style="text-align: right;">2023</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">24279</td>
</tr>
</tbody>
</table>
</div>
<p>Let us use the same regression line for the <code>Past</code> and <code>Future</code> groups. To do this, we avoid grouping by assigning <code>[]</code> to <code>:=group</code>. The line is affected only by the past, since in the Future, <code>:=y</code> is missing. We use the numerical field <code>:yearmonth</code> as the regression predictor, but for plotting, we still use the <code>:temporal</code> field <code>:date</code>.</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb47"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    (tc/select-rows #(<span class="kw">-&gt;</span> <span class="va">%</span> <span class="at">:variable</span> (<span class="kw">=</span> <span class="st">"unemploy"</span>)))</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:relative-time</span> <span class="st">"Past"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    (tc/concat (tc/dataset {<span class="at">:date</span> (<span class="kw">-&gt;</span> (rdatasets/ggplot2-economics_long)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">:date</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>                                      <span class="kw">last</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>                                      (datetime/plus-temporal-amount (<span class="kw">range</span> <span class="dv">96</span>) <span class="at">:months</span>))</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>                            <span class="at">:relative-time</span> <span class="st">"Future"</span>}))</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:year</span> #(datetime/long-temporal-field <span class="at">:years</span> (<span class="at">:date</span> <span class="va">%</span>)))</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    (tc/add-column <span class="at">:month</span> #(datetime/long-temporal-field <span class="at">:months</span> (<span class="at">:date</span> <span class="va">%</span>)))</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    (tc/map-columns <span class="at">:yearmonth</span> [<span class="at">:year</span> <span class="at">:month</span>] (<span class="kw">fn</span> [y m] (<span class="kw">+</span> m (<span class="kw">*</span> <span class="dv">12</span> y))))</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=x <span class="at">:date</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>                  :=y <span class="at">:value</span>})</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-smooth {:=color <span class="at">:relative-time</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>                          :=mark-size <span class="dv">15</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>                          :=group []</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>                          :=predictors [<span class="at">:yearmonth</span>]})</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">;; Keep only the past for the following layer:</span></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    (plotly/update-data (<span class="kw">fn</span> [dataset]</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>                          (<span class="kw">-&gt;</span> dataset</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>                              (tc/select-rows (<span class="kw">fn</span> [row]</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>                                                (<span class="kw">-&gt;</span> row <span class="at">:relative-time</span> (<span class="kw">=</span> <span class="st">"Past"</span>)))))))</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-line {:=mark-color <span class="st">"purple"</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>                        :=mark-size <span class="dv">3</span></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>                        :=name <span class="st">"Actual"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[4820.148032116267,4830.448772334115,4840.749512551964,4851.050252769812,4861.35099298766,4871.651733205508,4881.952473423356,4892.253213641205,4902.553953859053,4912.854694076901,4923.155434294749,4933.4561745125975,4943.756914730446,4954.057654948294,4964.358395166142,4974.65913538399,4984.959875601839,4995.260615819687,5005.561356037535,5015.862096255354,5026.162836473202,5036.463576691051,5046.764316908899,5057.065057126747,5067.365797344595,5077.666537562443,5087.967277780292,5098.26801799814,5108.568758215988,5118.869498433836,5129.1702386516845,5139.470978869533,5149.771719087381,5160.072459305229,5170.373199523077,5180.673939740926,5190.974679958774,5201.275420176622,5211.57616039447,5221.876900612318,5232.177640830167,5242.478381048015,5252.779121265863,5263.079861483711,5273.3806017015595,5283.681341919408,5293.982082137256,5304.282822355104,5314.583562572952,5324.884302790801,5335.185043008649,5345.485783226497,5355.786523444345,5366.087263662164,5376.388003880013,5386.688744097861,5396.989484315709,5407.290224533557,5417.590964751405,5427.891704969254,5438.192445187102,5448.49318540495,5458.793925622798,5469.0946658406465,5479.395406058495,5489.696146276343,5499.996886494191,5510.297626712039,5520.598366929888,5530.899107147736,5541.199847365584,5551.500587583432,5561.80132780128,5572.102068019129,5582.402808236977,5592.703548454825,5603.004288672673,5613.3050288905215,5623.60576910837,5633.906509326218,5644.207249544066,5654.507989761914,5664.808729979763,5675.109470197611,5685.410210415459,5695.710950633307,5706.011690851155,5716.312431069004,5726.613171286823,5736.913911504671,5747.214651722519,5757.515391940367,5767.816132158216,5778.116872376064,5788.417612593912,5798.71835281176,5809.0190930296085,5819.319833247457,5829.620573465305,5839.921313683153,5850.222053901001,5860.52279411885,5870.823534336698,5881.124274554546,5891.425014772394,5901.725754990242,5912.026495208091,5922.327235425939,5932.627975643787,5942.928715861635,5953.2294560794835,5963.530196297332,5973.83093651518,5984.131676733028,5994.432416950876,6004.733157168725,6015.033897386573,6025.334637604421,6035.635377822269,6045.936118040117,6056.236858257966,6066.537598475814,6076.838338693633,6087.139078911481,6097.439819129329,6107.740559347178,6118.041299565026,6128.342039782874,6138.642780000722,6148.9435202185705,6159.244260436419,6169.545000654267,6179.845740872115,6190.146481089963,6200.447221307812,6210.74796152566,6221.048701743508,6231.349441961356,6241.650182179204,6251.950922397053,6262.251662614901,6272.552402832749,6282.853143050597,6293.1538832684455,6303.454623486294,6313.755363704142,6324.05610392199,6334.356844139838,6344.657584357687,6354.958324575535,6365.259064793383,6375.559805011231,6385.860545229079,6396.161285446928,6406.462025664776,6416.762765882624,6427.063506100472,6437.364246318291,6447.66498653614,6457.965726753988,6468.266466971836,6478.567207189684,6488.8679474075325,6499.168687625381,6509.469427843229,6519.770168061077,6530.070908278925,6540.371648496774,6550.672388714622,6560.97312893247,6571.273869150318,6581.574609368166,6591.875349586015,6602.176089803863,6612.476830021711,6622.777570239559,6633.0783104574075,6643.379050675256,6653.679790893104,6663.980531110952,6674.2812713288,6684.582011546649,6694.882751764497,6705.183491982345,6715.484232200193,6725.784972418041,6736.08571263589,6746.386452853738,6756.687193071586,6766.987933289434,6777.2886735072825,6787.589413725102,6797.89015394295,6808.190894160798,6818.491634378646,6828.7923745964945,6839.093114814343,6849.393855032191,6859.694595250039,6869.995335467887,6880.296075685736,6890.596815903584,6900.897556121432,6911.19829633928,6921.499036557128,6931.799776774977,6942.100516992825,6952.401257210673,6962.701997428521,6973.0027376463695,6983.303477864218,6993.604218082066,7003.904958299914,7014.205698517762,7024.506438735611,7034.807178953459,7045.107919171307,7055.408659389155,7065.709399607003,7076.010139824852,7086.3108800427,7096.611620260548,7106.912360478396,7117.2131006962445,7127.513840914093,7137.814581131912,7148.11532134976,7158.416061567608,7168.7168017854565,7179.017542003305,7189.318282221153,7199.619022439001,7209.919762656849,7220.220502874698,7230.521243092546,7240.821983310394,7251.122723528242,7261.42346374609,7271.724203963939,7282.024944181787,7292.325684399635,7302.626424617483,7312.9271648353315,7323.22790505318,7333.528645271028,7343.829385488876,7354.130125706724,7364.430865924573,7374.731606142421,7385.032346360269,7395.333086578117,7405.633826795965,7415.934567013814,7426.235307231662,7436.53604744951,7446.836787667358,7457.1375278852065,7467.438268103055,7477.739008320903,7488.039748538751,7498.34048875657,7508.6412289744185,7518.941969192267,7529.242709410115,7539.543449627963,7549.844189845811,7560.14493006366,7570.445670281508,7580.746410499356,7591.047150717204,7601.347890935052,7611.648631152901,7621.949371370749,7632.250111588597,7642.550851806445,7652.8515920242935,7663.152332242142,7673.45307245999,7683.753812677838,7694.054552895686,7704.355293113535,7714.656033331383,7724.956773549231,7735.257513767079,7745.558253984927,7755.858994202776,7766.159734420624,7776.460474638472,7786.76121485632,7797.0619550741685,7807.362695292017,7817.663435509865,7827.964175727713,7838.264915945561,7848.5656561633805,7858.866396381229,7869.167136599077,7879.467876816925,7889.768617034773,7900.069357252622,7910.37009747047,7920.670837688318,7930.971577906166,7941.272318124014,7951.573058341863,7961.873798559711,7972.174538777559,7982.475278995407,7992.7760192132555,8003.076759431104,8013.377499648952,8023.6782398668,8033.978980084648,8044.279720302497,8054.580460520345,8064.881200738193,8075.181940956041,8085.482681173889,8095.783421391738,8106.084161609586,8116.384901827434,8126.685642045282,8136.9863822631305,8147.287122480979,8157.587862698827,8167.888602916675,8178.189343134523,8188.490083352372,8198.79082357022,8209.091563788039,8219.392304005887,8229.693044223735,8239.993784441584,8250.294524659432,8260.59526487728,8270.896005095128,8281.196745312976,8291.497485530825,8301.798225748673,8312.098965966521,8322.39970618437,8332.700446402217,8343.001186620066,8353.301926837914,8363.602667055762,8373.90340727361,8384.204147491459,8394.504887709307,8404.805627927155,8415.106368145003,8425.407108362851,8435.7078485807,8446.008588798548,8456.309329016396,8466.610069234244,8476.910809452093,8487.21154966994,8497.512289887789,8507.813030105637,8518.113770323485,8528.414510541334,8538.715250759182,8549.01599097703,8559.31673119485,8569.617471412697,8579.918211630546,8590.218951848394,8600.519692066242,8610.82043228409,8621.121172501938,8631.421912719787,8641.722652937635,8652.023393155483,8662.324133373331,8672.62487359118,8682.925613809028,8693.226354026876,8703.527094244724,8713.827834462572,8724.12857468042,8734.429314898269,8744.730055116117,8755.030795333965,8765.331535551813,8775.632275769662,8785.93301598751,8796.233756205358,8806.534496423206,8816.835236641055,8827.135976858903,8837.436717076751,8847.7374572946,8858.038197512447,8868.338937730296,8878.639677948144,8888.940418165992,8899.24115838384,8909.541898601688,8919.842638819508,8930.143379037356,8940.444119255204,8950.744859473052,8961.0455996909,8971.346339908749,8981.647080126597,8991.947820344445,9002.248560562293,9012.549300780141,9022.85004099799,9033.150781215838,9043.451521433686,9053.752261651534,9064.053001869383,9074.35374208723,9084.654482305079,9094.955222522927,9105.255962740775,9115.556702958624,9125.857443176472,9136.15818339432,9146.458923612168,9156.759663830017,9167.060404047865,9177.361144265713,9187.661884483561,9197.96262470141,9208.263364919258,9218.564105137106,9228.864845354954,9239.165585572802,9249.46632579065,9259.767066008499,9270.067806226318,9280.368546444166,9290.669286662014,9300.970026879862,9311.27076709771,9321.571507315559,9331.872247533407,9342.172987751255,9352.473727969103,9362.774468186952,9373.0752084048,9383.375948622648,9393.676688840496,9403.977429058345,9414.278169276193,9424.578909494041,9434.87964971189,9445.180389929737,9455.481130147586,9465.781870365434,9476.082610583282,9486.38335080113,9496.684091018979,9506.984831236827,9517.285571454675,9527.586311672523,9537.887051890371,9548.18779210822,9558.488532326068,9568.789272543916,9579.090012761764,9589.390752979612,9599.69149319746,9609.992233415309,9620.292973633128,9630.593713850976,9640.894454068824,9651.195194286673,9661.49593450452,9671.796674722369,9682.097414940217,9692.398155158065,9702.698895375914,9712.999635593762,9723.30037581161,9733.601116029458,9743.901856247307,9754.202596465155,9764.503336683003,9774.804076900851,9785.1048171187,9795.405557336548,9805.706297554396,9816.007037772244,9826.307777990092,9836.60851820794,9846.909258425789,9857.209998643637,9867.510738861485,9877.811479079333,9888.112219297182,9898.41295951503,9908.713699732878,9919.014439950726,9929.315180168574,9939.615920386423,9949.91666060427,9960.217400822119,9970.518141039967,9980.818881257786,9991.119621475635,10001.420361693483,10011.721101911331,10022.02184212918,10032.322582347027,10042.623322564876,10052.924062782724,10063.224803000572,10073.52554321842,10083.826283436269,10094.127023654117,10104.427763871965,10114.728504089813,10125.029244307661,10135.32998452551,10145.630724743358,10155.931464961206,10166.232205179054,10176.532945396903,10186.83368561475,10197.134425832599,10207.435166050447,10217.735906268295,10228.036646486144,10238.337386703992,10248.63812692184,10258.938867139688,10269.239607357536,10279.540347575385,10289.841087793233,10300.141828011081,10310.44256822893,10320.743308446778,10331.044048664597,10341.344788882445,10351.645529100293,10361.946269318141,10372.24700953599,10382.547749753838,10392.848489971686,10403.149230189534,10413.449970407382,10423.75071062523,10434.051450843079,10444.352191060927,10454.652931278775,10464.953671496623,10475.254411714472,10485.55515193232,10495.855892150168,10506.156632368016,10516.457372585865,10526.758112803713,10537.058853021561,10547.35959323941,10557.660333457257,10567.961073675106,10578.261813892954,10588.562554110802,10598.86329432865,10609.164034546498,10619.464774764347,10629.765514982195,10640.066255200043,10650.366995417891,10660.66773563574,10670.968475853588,10681.269216071436,10691.569956289255,10701.870696507103,10712.171436724951,10722.4721769428],"r":null,"name":"Past","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#1B9E77","width":15},"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null},{"y":[10722.4721769428,10732.772917160648,10743.073657378496,10753.374397596344,10763.675137814193,10773.97587803204,10784.276618249889,10794.577358467737,10804.878098685585,10815.178838903434,10825.479579121282,10835.78031933913,10846.081059556978,10856.381799774827,10866.682539992675,10876.983280210523,10887.284020428371,10897.58476064622,10907.885500864068,10918.186241081916,10928.486981299764,10938.787721517612,10949.08846173546,10959.389201953309,10969.689942171157,10979.990682389005,10990.291422606853,11000.592162824702,11010.89290304255,11021.193643260398,11031.494383478246,11041.795123696065,11052.095863913913,11062.396604131762,11072.69734434961,11082.998084567458,11093.298824785306,11103.599565003155,11113.900305221003,11124.201045438851,11134.5017856567,11144.802525874547,11155.103266092396,11165.404006310244,11175.704746528092,11186.00548674594,11196.306226963789,11206.606967181637,11216.907707399485,11227.208447617333,11237.509187835181,11247.80992805303,11258.110668270878,11268.411408488726,11278.712148706574,11289.012888924422,11299.31362914227,11309.614369360119,11319.915109577967,11330.215849795815,11340.516590013664,11350.817330231512,11361.11807044936,11371.418810667208,11381.719550885056,11392.020291102905,11402.321031320724,11412.621771538572,11422.92251175642,11433.223251974268,11443.523992192117,11453.824732409965,11464.125472627813,11474.426212845661,11484.72695306351,11495.027693281358,11505.328433499206,11515.629173717054,11525.929913934902,11536.23065415275,11546.531394370599,11556.832134588447,11567.132874806295,11577.433615024143,11587.734355241992,11598.03509545984,11608.335835677688,11618.636575895536,11628.937316113384,11639.238056331233,11649.53879654908,11659.839536766929,11670.140276984777,11680.441017202626,11690.741757420474,11701.042497638322],"r":null,"name":"Future","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#D95F02","width":15},"lon":null,"lat":null,"x":["2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01","2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01","2019-08-01","2019-09-01","2019-10-01","2019-11-01","2019-12-01","2020-01-01","2020-02-01","2020-03-01","2020-04-01","2020-05-01","2020-06-01","2020-07-01","2020-08-01","2020-09-01","2020-10-01","2020-11-01","2020-12-01","2021-01-01","2021-02-01","2021-03-01","2021-04-01","2021-05-01","2021-06-01","2021-07-01","2021-08-01","2021-09-01","2021-10-01","2021-11-01","2021-12-01","2022-01-01","2022-02-01","2022-03-01","2022-04-01","2022-05-01","2022-06-01","2022-07-01","2022-08-01","2022-09-01","2022-10-01","2022-11-01","2022-12-01","2023-01-01","2023-02-01","2023-03-01"],"text":null},{"y":[2944.0,2945.0,2958.0,3143.0,3066.0,3018.0,2878.0,3001.0,2877.0,2709.0,2740.0,2938.0,2883.0,2768.0,2686.0,2689.0,2715.0,2685.0,2718.0,2692.0,2712.0,2758.0,2713.0,2816.0,2868.0,2856.0,3040.0,3049.0,2856.0,2884.0,3201.0,3453.0,3635.0,3797.0,3919.0,4071.0,4175.0,4256.0,4456.0,4591.0,4898.0,5076.0,4986.0,4903.0,4987.0,4959.0,4996.0,4949.0,5035.0,5134.0,5042.0,4954.0,5161.0,5154.0,5019.0,4928.0,5038.0,4959.0,4922.0,4923.0,4913.0,4939.0,4849.0,4875.0,4602.0,4543.0,4326.0,4452.0,4394.0,4459.0,4329.0,4363.0,4305.0,4305.0,4350.0,4144.0,4396.0,4489.0,4644.0,4731.0,4634.0,4618.0,4705.0,4927.0,5063.0,5022.0,5437.0,5523.0,6140.0,6636.0,7501.0,7520.0,7978.0,8210.0,8433.0,8220.0,8127.0,7928.0,7923.0,7897.0,7794.0,7744.0,7534.0,7326.0,7230.0,7330.0,7053.0,7322.0,7490.0,7518.0,7380.0,7430.0,7620.0,7545.0,7280.0,7443.0,7307.0,7059.0,6911.0,7134.0,6829.0,6925.0,6751.0,6763.0,6815.0,6386.0,6489.0,6318.0,6337.0,6180.0,6127.0,6028.0,6309.0,6080.0,6125.0,5947.0,6077.0,6228.0,6109.0,6173.0,6109.0,6069.0,5840.0,5959.0,5996.0,6320.0,6190.0,6296.0,6238.0,6325.0,6683.0,6702.0,6729.0,7358.0,7984.0,8098.0,8363.0,8281.0,8021.0,8088.0,8023.0,7718.0,8071.0,8051.0,7982.0,7869.0,8174.0,8098.0,7863.0,8036.0,8230.0,8646.0,9029.0,9267.0,9397.0,9705.0,9895.0,10244.0,10335.0,10538.0,10849.0,10881.0,11217.0,11529.0,11938.0,12051.0,11534.0,11545.0,11408.0,11268.0,11154.0,11246.0,10548.0,10623.0,10282.0,9887.0,9499.0,9331.0,9008.0,8791.0,8746.0,8762.0,8456.0,8226.0,8537.0,8519.0,8367.0,8381.0,8198.0,8358.0,8423.0,8321.0,8339.0,8395.0,8302.0,8460.0,8513.0,8196.0,8248.0,8298.0,8128.0,8138.0,7795.0,8402.0,8383.0,8364.0,8439.0,8508.0,8319.0,8135.0,8310.0,8243.0,8159.0,7883.0,7892.0,7865.0,7862.0,7542.0,7574.0,7398.0,7268.0,7261.0,7102.0,7227.0,7035.0,6936.0,6953.0,6929.0,6876.0,6601.0,6779.0,6546.0,6605.0,6843.0,6604.0,6568.0,6537.0,6518.0,6682.0,6359.0,6205.0,6468.0,6375.0,6577.0,6495.0,6511.0,6590.0,6630.0,6725.0,6667.0,6752.0,6651.0,6598.0,6797.0,6742.0,6590.0,6922.0,7188.0,7368.0,7459.0,7764.0,7901.0,8015.0,8265.0,8586.0,8439.0,8736.0,8692.0,8586.0,8666.0,8722.0,8842.0,8931.0,9198.0,9283.0,9454.0,9460.0,9415.0,9744.0,10040.0,9850.0,9787.0,9781.0,9398.0,9565.0,9557.0,9325.0,9183.0,9056.0,9110.0,9149.0,9121.0,8930.0,8763.0,8714.0,8750.0,8542.0,8477.0,8630.0,8583.0,8470.0,8331.0,7915.0,7927.0,7946.0,7933.0,7734.0,7632.0,7375.0,7230.0,7375.0,7187.0,7153.0,7645.0,7430.0,7427.0,7527.0,7484.0,7478.0,7328.0,7426.0,7423.0,7491.0,7313.0,7318.0,7415.0,7423.0,7095.0,7337.0,6882.0,6979.0,7031.0,7236.0,7253.0,7158.0,7102.0,7000.0,6873.0,6655.0,6799.0,6655.0,6608.0,6656.0,6454.0,6308.0,6476.0,6368.0,6306.0,6422.0,5941.0,6047.0,6212.0,6259.0,6179.0,6300.0,6280.0,6100.0,6032.0,5976.0,6111.0,5783.0,6004.0,5796.0,5951.0,6025.0,5838.0,5915.0,5778.0,5716.0,5653.0,5708.0,5858.0,5733.0,5481.0,5758.0,5651.0,5747.0,5853.0,5625.0,5534.0,5639.0,5634.0,6023.0,6089.0,6141.0,6271.0,6226.0,6484.0,6583.0,7042.0,7142.0,7694.0,8003.0,8258.0,8182.0,8215.0,8304.0,8599.0,8399.0,8393.0,8390.0,8304.0,8251.0,8307.0,8520.0,8640.0,8520.0,8618.0,8588.0,8842.0,8957.0,9266.0,9011.0,8896.0,8921.0,8732.0,8576.0,8317.0,8370.0,8167.0,8491.0,8170.0,8212.0,8286.0,8136.0,7990.0,7927.0,8061.0,7932.0,7934.0,7784.0,7980.0,7737.0,7672.0,7651.0,7524.0,7406.0,7345.0,7553.0,7453.0,7566.0,7279.0,7064.0,7184.0,7072.0,7120.0,6980.0,7001.0,7175.0,7091.0,6847.0,6727.0,6872.0,6762.0,7116.0,6927.0,6731.0,6850.0,6766.0,6979.0,7149.0,7067.0,7170.0,7237.0,7240.0,7645.0,7685.0,7497.0,7822.0,7637.0,8395.0,8575.0,8937.0,9438.0,9494.0,10074.0,10538.0,11286.0,12058.0,12898.0,13426.0,13853.0,14499.0,14707.0,14601.0,14814.0,15009.0,15352.0,15219.0,15098.0,15046.0,15113.0,15202.0,15325.0,14849.0,14474.0,14512.0,14648.0,14579.0,14516.0,15081.0,14348.0,14013.0,13820.0,13737.0,13957.0,13855.0,13962.0,13763.0,13818.0,13948.0,13594.0,13302.0,13093.0,12797.0,12813.0,12713.0,12646.0,12660.0,12692.0,12656.0,12471.0,12115.0,12124.0,12005.0,12298.0,12471.0,11950.0,11689.0,11760.0,11654.0,11751.0,11335.0,11279.0,11270.0,11136.0,10787.0,10404.0,10202.0,10349.0,10380.0,9702.0,9859.0,9460.0,9608.0,9599.0,9262.0,8990.0,9090.0,8717.0,8903.0,8610.0,8504.0,8526.0],"r":null,"name":"Actual","fill":null,"mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"purple","width":3},"lon":null,"lat":null,"x":["1967-07-01","1967-08-01","1967-09-01","1967-10-01","1967-11-01","1967-12-01","1968-01-01","1968-02-01","1968-03-01","1968-04-01","1968-05-01","1968-06-01","1968-07-01","1968-08-01","1968-09-01","1968-10-01","1968-11-01","1968-12-01","1969-01-01","1969-02-01","1969-03-01","1969-04-01","1969-05-01","1969-06-01","1969-07-01","1969-08-01","1969-09-01","1969-10-01","1969-11-01","1969-12-01","1970-01-01","1970-02-01","1970-03-01","1970-04-01","1970-05-01","1970-06-01","1970-07-01","1970-08-01","1970-09-01","1970-10-01","1970-11-01","1970-12-01","1971-01-01","1971-02-01","1971-03-01","1971-04-01","1971-05-01","1971-06-01","1971-07-01","1971-08-01","1971-09-01","1971-10-01","1971-11-01","1971-12-01","1972-01-01","1972-02-01","1972-03-01","1972-04-01","1972-05-01","1972-06-01","1972-07-01","1972-08-01","1972-09-01","1972-10-01","1972-11-01","1972-12-01","1973-01-01","1973-02-01","1973-03-01","1973-04-01","1973-05-01","1973-06-01","1973-07-01","1973-08-01","1973-09-01","1973-10-01","1973-11-01","1973-12-01","1974-01-01","1974-02-01","1974-03-01","1974-04-01","1974-05-01","1974-06-01","1974-07-01","1974-08-01","1974-09-01","1974-10-01","1974-11-01","1974-12-01","1975-01-01","1975-02-01","1975-03-01","1975-04-01","1975-05-01","1975-06-01","1975-07-01","1975-08-01","1975-09-01","1975-10-01","1975-11-01","1975-12-01","1976-01-01","1976-02-01","1976-03-01","1976-04-01","1976-05-01","1976-06-01","1976-07-01","1976-08-01","1976-09-01","1976-10-01","1976-11-01","1976-12-01","1977-01-01","1977-02-01","1977-03-01","1977-04-01","1977-05-01","1977-06-01","1977-07-01","1977-08-01","1977-09-01","1977-10-01","1977-11-01","1977-12-01","1978-01-01","1978-02-01","1978-03-01","1978-04-01","1978-05-01","1978-06-01","1978-07-01","1978-08-01","1978-09-01","1978-10-01","1978-11-01","1978-12-01","1979-01-01","1979-02-01","1979-03-01","1979-04-01","1979-05-01","1979-06-01","1979-07-01","1979-08-01","1979-09-01","1979-10-01","1979-11-01","1979-12-01","1980-01-01","1980-02-01","1980-03-01","1980-04-01","1980-05-01","1980-06-01","1980-07-01","1980-08-01","1980-09-01","1980-10-01","1980-11-01","1980-12-01","1981-01-01","1981-02-01","1981-03-01","1981-04-01","1981-05-01","1981-06-01","1981-07-01","1981-08-01","1981-09-01","1981-10-01","1981-11-01","1981-12-01","1982-01-01","1982-02-01","1982-03-01","1982-04-01","1982-05-01","1982-06-01","1982-07-01","1982-08-01","1982-09-01","1982-10-01","1982-11-01","1982-12-01","1983-01-01","1983-02-01","1983-03-01","1983-04-01","1983-05-01","1983-06-01","1983-07-01","1983-08-01","1983-09-01","1983-10-01","1983-11-01","1983-12-01","1984-01-01","1984-02-01","1984-03-01","1984-04-01","1984-05-01","1984-06-01","1984-07-01","1984-08-01","1984-09-01","1984-10-01","1984-11-01","1984-12-01","1985-01-01","1985-02-01","1985-03-01","1985-04-01","1985-05-01","1985-06-01","1985-07-01","1985-08-01","1985-09-01","1985-10-01","1985-11-01","1985-12-01","1986-01-01","1986-02-01","1986-03-01","1986-04-01","1986-05-01","1986-06-01","1986-07-01","1986-08-01","1986-09-01","1986-10-01","1986-11-01","1986-12-01","1987-01-01","1987-02-01","1987-03-01","1987-04-01","1987-05-01","1987-06-01","1987-07-01","1987-08-01","1987-09-01","1987-10-01","1987-11-01","1987-12-01","1988-01-01","1988-02-01","1988-03-01","1988-04-01","1988-05-01","1988-06-01","1988-07-01","1988-08-01","1988-09-01","1988-10-01","1988-11-01","1988-12-01","1989-01-01","1989-02-01","1989-03-01","1989-04-01","1989-05-01","1989-06-01","1989-07-01","1989-08-01","1989-09-01","1989-10-01","1989-11-01","1989-12-01","1990-01-01","1990-02-01","1990-03-01","1990-04-01","1990-05-01","1990-06-01","1990-07-01","1990-08-01","1990-09-01","1990-10-01","1990-11-01","1990-12-01","1991-01-01","1991-02-01","1991-03-01","1991-04-01","1991-05-01","1991-06-01","1991-07-01","1991-08-01","1991-09-01","1991-10-01","1991-11-01","1991-12-01","1992-01-01","1992-02-01","1992-03-01","1992-04-01","1992-05-01","1992-06-01","1992-07-01","1992-08-01","1992-09-01","1992-10-01","1992-11-01","1992-12-01","1993-01-01","1993-02-01","1993-03-01","1993-04-01","1993-05-01","1993-06-01","1993-07-01","1993-08-01","1993-09-01","1993-10-01","1993-11-01","1993-12-01","1994-01-01","1994-02-01","1994-03-01","1994-04-01","1994-05-01","1994-06-01","1994-07-01","1994-08-01","1994-09-01","1994-10-01","1994-11-01","1994-12-01","1995-01-01","1995-02-01","1995-03-01","1995-04-01","1995-05-01","1995-06-01","1995-07-01","1995-08-01","1995-09-01","1995-10-01","1995-11-01","1995-12-01","1996-01-01","1996-02-01","1996-03-01","1996-04-01","1996-05-01","1996-06-01","1996-07-01","1996-08-01","1996-09-01","1996-10-01","1996-11-01","1996-12-01","1997-01-01","1997-02-01","1997-03-01","1997-04-01","1997-05-01","1997-06-01","1997-07-01","1997-08-01","1997-09-01","1997-10-01","1997-11-01","1997-12-01","1998-01-01","1998-02-01","1998-03-01","1998-04-01","1998-05-01","1998-06-01","1998-07-01","1998-08-01","1998-09-01","1998-10-01","1998-11-01","1998-12-01","1999-01-01","1999-02-01","1999-03-01","1999-04-01","1999-05-01","1999-06-01","1999-07-01","1999-08-01","1999-09-01","1999-10-01","1999-11-01","1999-12-01","2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01","2000-11-01","2000-12-01","2001-01-01","2001-02-01","2001-03-01","2001-04-01","2001-05-01","2001-06-01","2001-07-01","2001-08-01","2001-09-01","2001-10-01","2001-11-01","2001-12-01","2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01"],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"date","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"value","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="histograms" class="level2" data-number="2.16">
<h2 data-number="2.16" class="anchored" data-anchor-id="histograms"><span class="header-section-number">2.16</span> Histograms</h2>
<p>Histograms can also be represented as layers with statistical processing:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb48"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-histogram {:=x <span class="at">:sepal-width</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[4,7,22,24,37,31,10,11,2,2],"r":null,"name":"","fill":null,"mode":null,"width":[0.2400000000000002,0.23999999999999977,0.2400000000000002,0.23999999999999977,0.2400000000000002,0.2400000000000002,0.23999999999999977,0.2400000000000002,0.23999999999999977,0.2400000000000002],"type":"bar","theta":null,"z":null,"lon":null,"lat":null,"x":[2.12,2.3600000000000003,2.6,2.84,3.08,3.3200000000000003,3.5600000000000005,3.8000000000000003,4.04,4.28],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"count","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb49"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-histogram {:=x <span class="at">:sepal-width</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>                             :=histogram-nbins <span class="dv">30</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[1,0,3,4,0,3,8,5,9,0,14,10,26,11,0,13,6,12,6,0,4,3,6,2,0,1,1,1,0,1],"r":null,"name":"","fill":null,"mode":null,"width":[0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.07999999999999963,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.07999999999999963,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.07999999999999963,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.07999999999999963,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007,0.08000000000000007],"type":"bar","theta":null,"z":null,"lon":null,"lat":null,"x":[2.04,2.12,2.2,2.2800000000000002,2.3600000000000003,2.44,2.52,2.6,2.68,2.76,2.84,2.92,3.0,3.08,3.16,3.24,3.3200000000000003,3.4000000000000004,3.4800000000000004,3.5600000000000005,3.64,3.72,3.8000000000000003,3.8800000000000003,3.96,4.04,4.12,4.2,4.28,4.36],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"count","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb50"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-histogram {:=x <span class="at">:sepal-width</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                             :=color <span class="at">:species</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>                             :=mark-opacity <span class="fl">0.5</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[1,0,1,10,7,15,6,6,2,2],"r":null,"name":"setosa","marker":{"color":"#1B9E77"},"fill":null,"mode":null,"width":[0.20999999999999996,0.20999999999999996,0.20999999999999996,0.2100000000000004,0.20999999999999996,0.20999999999999996,0.20999999999999996,0.2100000000000004,0.20999999999999996,0.20999999999999996],"type":"bar","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":[2.405,2.6149999999999998,2.8249999999999997,3.035,3.245,3.455,3.665,3.875,4.085000000000001,4.295],"text":null},{"y":[1,2,6,4,3,11,7,11,3,2],"r":null,"name":"versicolor","marker":{"color":"#D95F02"},"fill":null,"mode":null,"width":[0.14000000000000012,0.13999999999999968,0.14000000000000012,0.14000000000000012,0.14000000000000012,0.13999999999999968,0.14000000000000012,0.14000000000000012,0.13999999999999968,0.14000000000000012],"type":"bar","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":[2.0700000000000003,2.21,2.3499999999999996,2.49,2.63,2.77,2.91,3.05,3.19,3.33],"text":null},{"y":[1,4,2,12,2,16,8,2,1,2],"r":null,"name":"virginica","marker":{"color":"#7570B3"},"fill":null,"mode":null,"width":[0.16000000000000014,0.1599999999999997,0.16000000000000014,0.1599999999999997,0.16000000000000014,0.16000000000000014,0.1599999999999997,0.16000000000000014,0.1599999999999997,0.16000000000000014],"type":"bar","theta":null,"z":null,"opacity":0.5,"lon":null,"lat":null,"x":[2.2800000000000002,2.4400000000000004,2.6,2.76,2.92,3.08,3.24,3.4,3.5599999999999996,3.7199999999999998],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"count","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="density" class="level2" data-number="2.17">
<h2 data-number="2.17" class="anchored" data-anchor-id="density"><span class="header-section-number">2.17</span> Density</h2>
<p>(experimental)</p>
<p>Density estimates are handled similarly to Histograms:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb51"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-density {:=x <span class="at">:sepal-width</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[3.656813784843768E-16,6.141305614516718E-16,1.0269517627145644E-15,1.7099005394702274E-15,2.834804568414352E-15,4.679579918575382E-15,7.691695504991614E-15,1.2588348800503554E-14,2.051383805008311E-14,3.328561206159559E-14,5.37771326011959E-14,8.651077578558296E-14,1.3857160310051265E-13,2.2100889129387185E-13,3.509754346864799E-13,5.549772304078456E-13,8.73785995739442E-13,1.3698293419599568E-12,2.13825412892895E-12,3.3236246789047103E-12,5.143637045077064E-12,7.926114734374266E-12,1.216135911800985E-11,1.8579568061993938E-11,2.8263170572489972E-11,4.280928147178772E-11,6.456346337625981E-11,9.695440671107374E-11,1.4497067960358635E-10,2.158364164517319E-10,3.1996408649730325E-10,4.722910967076546E-10,6.941452269544155E-10,1.0158346840522258E-9,1.4802255704483959E-9,2.147657387488609E-9,3.102661519770659E-9,4.463095446410427E-9,6.392495148314818E-9,9.123370059142394E-9,1.2956370240704086E-8,1.8320897132895465E-8,2.5795609698969867E-8,3.616437060084487E-8,5.0483852636517324E-8,7.017153623179913E-8,9.711959959580538E-8,1.3384147700256248E-7,1.836593650145408E-7,2.509527175742783E-7,3.4142525640782546E-7,4.6253043134396105E-7,6.23916930346367E-7,8.380230540758056E-7,1.1208020860897434E-6,1.492611525255723E-6,1.9792961389812627E-6,2.6134983796308504E-6,3.4362332185239316E-6,4.498774407892064E-6,5.864858917432351E-6,7.61333870510144E-6,9.841222577409412E-6,1.2667227313524212E-5,1.6235855479118063E-5,2.0722045313947038E-5,2.633642778767101E-5,3.333121726480895E-5,4.20067506156343E-5,5.271869813705353E-5,6.588580128210458E-5,8.199839033930941E-5,1.0162725656401615E-4,1.2543304193775615E-4,1.5417593184226063E-4,1.8872551627481038E-4,2.3007064039157646E-4,2.7932903686198014E-4,3.3775650743420006E-4,4.067554144433184E-4,4.878821440906871E-4,5.828534394478261E-4,6.935511341182125E-4,8.22025189714994E-4,9.70494774964645E-4,0.0011413472366815379,0.0013371348688670875,0.0015605694653663628,0.0018145147336864774,0.00210197677671087,0.0024260927863793266,0.0027901186835422595,0.0031974157973860685,0.003651437477483937,0.004155716211189948,0.004713851998409213,0.005329502739585533,0.006006377374837751,0.006748232450085337,0.007558872719327667,0.00844215595406217,0.009402002701948629,0.010442410271133436,0.011567471071155291,0.012781394479346724,0.014088531279278402,0.015493399366241375,0.01700070911258575,0.018615386524584943,0.020342592152070803,0.022187733398215413,0.024156468391860846,0.02625469882991461,0.028488550194079858,0.030864337626158107,0.03338851633688934,0.03606761596391742,0.038908158948834405,0.04191656372881729,0.04509903438883761,0.04846143865876437,0.05200917838000341,0.05574705490502724,0.0596791346525352,0.06380861921143317,0.06813772501622192,0.0726675775935442,0.07739812518838839,0.08232807615904301,0.08745486392072545,0.09277464215467913,0.09828231257277993,0.10397158543002448,0.1098350726045405,0.11586441128234022,0.12205041518619031,0.12838324910233018,0.13485262144641286,0.1414479888050727,0.148158765879028,0.15497453373601103,0.16188524005264662,0.16888138427421162,0.17595418235516888,0.18309570610596296,0.19029899355949223,0.19755812812509377,0.20486828579058494,0.21222575116126483,0.21962790462442378,0.22707318417726216,0.23456102691029276,0.24209179555581517,0.2496666965131634,0.25728769571535676,0.26495743860557214,0.27267917993231877,0.280456728174638,0.28829440820809316,0.29619704441986533,0.3041699646475011,0.31221902430970694,0.3203506474350669,0.3285718807548322,0.33689045519254635,0.3453148482743332,0.35385434034747754,0.36251905729678374,0.37131999268662125,0.3802690029435838,0.38937877015921196,0.39866272880969794,0.4081349539071,0.4178100103927123,0.42770276525185214,0.43782816577196065,0.4482009890503142,0.4588355692765817,0.4697455103666433,0.48094339214652027,0.49244047835026367,0.5042464345085367,0.516369062677663,0.5288140589489378,0.541584797905856,0.5546821463804138,0.5681043068742873,0.581846689056029,0.5959018059582492,0.610259190024168,0.6249053230583135,0.6398235737353234,0.6549941362122758,0.6703939642783541,0.6859966967114285,0.7017725714510428,0.7176883285800896,0.7337071048415701,0.7497883253337942,0.7658876009569309,0.7819566427847847,0.7979432071384128,0.8137910863782563,0.8294401618186487,0.8448265349749325,0.8598827525121702,0.8745381383249844,0.8887192432657168,0.9023504192252738,0.915354519700445,0.9276537238146043,0.9391704753331213,0.9498285225544292,0.959554039675597,0.9682768052815878,0.9759314094559869,0.9824584578039428,0.9878057386225668,0.9919293186799587,0.994794533641422,0.9963768411135073,0.9966625075007807,0.9956491042577869,0.9933457944910986,0.989773396991958,0.9849642214017513,0.9789616750507193,0.9718196487851416,0.9636016955400077,0.9543800212804293,0.944234313018371,0.9332504327520924,0.9215190092616756,0.9091339616719311,0.8961909895556679,0.8827860641415447,0.8690139539944485,0.8549668164704869,0.8407328834523539,0.8263952664973182,0.8120309027348447,0.7977096587840721,0.7834936057606093,0.769436474227267,0.7555832938086806,0.7419702182533732,0.7286245328777384,0.715564838010793,0.7028013986625401,0.6903366478467139,0.6781658283409986,0.6662777553855634,0.6546556808582692,0.643278237844363,0.6321204432540227,0.6211547353180424,0.6103520221881386,0.5996827181236913,0.589117743927908,0.5786294694282952,0.5681925771819095,0.5577848285386474,0.5473877156091433,0.536986985527828,0.5265730266140795,0.5161411095793944,0.5056914805485564,0.49522930666327364,0.4847644786669513,0.47431127868780515,0.4638879248613893,0.45351600757117727,0.44321983478611116,0.43302570616463165,0.42296113719910916,0.41305405579080456,0.40333199366829,0.393821295415013,0.38454636633949757,0.37552897938645186,0.366787659159158,0.35833715871436866,0.3501880419815777,0.34234638155871805,0.3348135783284733,0.3275863059967819,0.3206565800367646,0.314011947532153,0.3076357908624232,0.30150773547828774,0.29560414931326146,0.28989871915379506,0.28436308748781514,0.27896753202481145,0.2736816692430151,0.26847516314738123,0.26331842025140434,0.25818325324177044,0.2530434962686776,0.24787555696490987,0.24265889220246042,0.23737639703125746,0.23201469891030355,0.22656435218022783,0.2210199306217785,0.21538001906554738,0.2096471071891839,0.20382739241486145,0.19793049997519946,0.19196913103025268,0.1859586510840196,0.17991663220363102,0.17386236329599733,0.16781634297886397,0.16179976938421806,0.1558340407553185,0.14994027923141787,0.14413888963760943,0.13844916260070175,0.13288892997707674,0.12747427836658923,0.12221932442856014,0.11713605363291273,0.11223422207151248,0.10752131903196896,0.1030025867542647,0.09868109110911547,0.09455783797025931,0.09063192685111021,0.08690073431201634,0.08336011885362826,0.08000463913552659,0.07682777767410288,0.07382216273367398,0.07097978187273886,0.06829218170235839,0.06575064897645795,0.06334637015130455,0.06107056678599033,0.05891460590905583,0.05687008535921908,0.054928895144077096,0.053083256735745675,0.05132574294374007,0.049649281528074005,0.04804714626832875,0.04651293878186775,0.04504056542989493,0.043624212346454,0.04225832200612867,0.04093757401910762,0.039656872309547266,0.03841134018928348,0.037196324157699516,0.036007406563432945,0.034840426687996355,0.0336915089679494,0.03255709700517606,0.03143399114850259,0.030319387454791808,0.02921091558803868,0.028106673224249815,0.027005254652657146,0.025905771505894612,0.02480786387326145,0.02371170065160529,0.02261796792542019,0.02152784565187553,0.020442972421525138,0.0193653992267999,0.0182975333932342,0.017242074259996257,0.01620194251127036,0.015180205283550713,0.014179999288914853,0.013204454299869323,0.012256619023266888,0.011339391674727282,0.010455456865720336,0.0096072304225613,0.008796813311963352,0.008025955500220358,0.007296030199299508,0.006608018586344798,0.005962504731870066,0.005359680209211441,0.004799357442693973,0.004280990902946376,0.0038037048195937945,0.003366326161710689,0.00296742152780479,0.002605336605144152,0.002278236912697368,0.0019841486357408756,0.0017209984809749461,0.0014866516605502081,0.0012789471757024486,0.0010957299159365147,9.348790699525529E-4,7.943326254245638E-4,6.721078399452585E-4,5.663177041475871E-4,4.751835310376394E-4,3.9704389808662804E-4,3.30360229472781E-4,2.7371943578333017E-4,2.2583381094817926E-4,1.8553884065075155E-4,1.5178910822912292E-4,1.2365277063398802E-4,1.003049463573612E-4,8.102034321662708E-5,6.516541814467519E-5,5.219032252816602E-5,4.16208448920946E-5,3.305053964088475E-5,2.6133143195936908E-5,2.057543326261489E-5,1.6130561893354175E-5,1.259192648474747E-5,9.787598256517359E-6,7.575312172101855E-6,5.838007126662648E-6,4.479893618583933E-6,3.4230176542382636E-6,2.6042841029416363E-6,1.9728988961986957E-6,1.4881889066295176E-6,1.1177575558924123E-6,8.359360931510068E-7,6.224924360391733E-7,4.615622456702842E-7,3.4077000597500493E-7,2.505111410889902E-7,1.8336946468301203E-7,1.3364759336584077E-7,9.699048805244387E-8,7.008592702801601E-8,5.042733196498219E-8,3.6127214884522796E-8,2.5771289034637377E-8,1.8305046131688003E-8,1.2946083697976874E-8,9.116723243401938E-9,6.392495148314818E-9,4.463095446410474E-9,3.1026615197706917E-9,2.1476573874886513E-9,1.4802255704483806E-9,1.0158346840522258E-9,6.941452269544203E-10,4.722910967076647E-10,3.1996408649729984E-10,2.158364164517319E-10,1.4497067960358736E-10,9.695440671107546E-11,6.456346337625913E-11,4.280928147178772E-11,2.826317057249017E-11,1.857956806199427E-11,1.2161359118010151E-11,7.926114734374266E-12,5.143637045077119E-12,3.323624678904769E-12,2.1383821205461082E-12,1.3699045766388177E-12,8.738300295314693E-13,5.550028921166456E-13,3.5099032543495426E-13,2.210174948689534E-13,1.3857655273180204E-13,8.651361108033524E-14,5.377874976886231E-14,3.328653048587169E-14,2.0514357403663568E-14,1.2588641225420899E-14,7.691859449582075E-15,4.679671437577526E-15,2.8348554378514195E-15,1.7099286930781031E-15,1.0269672773885197E-15],"r":null,"name":"","fill":"tozeroy","mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[0.79,0.8,0.81,0.8200000000000001,0.8300000000000001,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.9400000000000001,0.9500000000000001,0.96,0.97,0.98,0.99,1.0,1.01,1.02,1.03,1.04,1.05,1.06,1.07,1.08,1.09,1.1,1.11,1.12,1.1300000000000001,1.1400000000000001,1.1500000000000001,1.16,1.17,1.18,1.19,1.2,1.21,1.22,1.23,1.24,1.25,1.26,1.27,1.28,1.29,1.3,1.31,1.32,1.33,1.34,1.35,1.36,1.37,1.3800000000000001,1.3900000000000001,1.4000000000000001,1.41,1.42,1.43,1.44,1.45,1.46,1.47,1.48,1.49,1.5,1.51,1.52,1.53,1.54,1.55,1.56,1.57,1.58,1.59,1.6,1.61,1.62,1.6300000000000001,1.6400000000000001,1.6500000000000001,1.6600000000000001,1.67,1.68,1.69,1.7,1.71,1.72,1.73,1.74,1.75,1.76,1.77,1.78,1.79,1.8,1.81,1.82,1.83,1.84,1.85,1.86,1.87,1.8800000000000001,1.8900000000000001,1.9000000000000001,1.9100000000000001,1.92,1.93,1.94,1.95,1.96,1.97,1.98,1.99,2.0,2.0100000000000002,2.02,2.0300000000000002,2.04,2.05,2.06,2.07,2.08,2.09,2.1,2.11,2.12,2.13,2.14,2.15,2.16,2.17,2.18,2.19,2.2,2.21,2.22,2.23,2.24,2.25,2.2600000000000002,2.27,2.2800000000000002,2.29,2.3000000000000003,2.31,2.32,2.33,2.34,2.35,2.36,2.37,2.38,2.39,2.4,2.41,2.42,2.43,2.44,2.45,2.46,2.47,2.48,2.49,2.5,2.5100000000000002,2.52,2.5300000000000002,2.54,2.5500000000000003,2.56,2.57,2.58,2.59,2.6,2.61,2.62,2.63,2.64,2.65,2.66,2.67,2.68,2.69,2.7,2.71,2.72,2.73,2.74,2.75,2.7600000000000002,2.77,2.7800000000000002,2.79,2.8000000000000003,2.81,2.82,2.83,2.84,2.85,2.86,2.87,2.88,2.89,2.9,2.91,2.92,2.93,2.94,2.95,2.96,2.97,2.98,2.99,3.0,3.0100000000000002,3.02,3.0300000000000002,3.04,3.0500000000000003,3.06,3.0700000000000003,3.08,3.09,3.1,3.11,3.12,3.13,3.14,3.15,3.16,3.17,3.18,3.19,3.2,3.21,3.22,3.23,3.24,3.25,3.2600000000000002,3.27,3.2800000000000002,3.29,3.3000000000000003,3.31,3.3200000000000003,3.33,3.34,3.35,3.36,3.37,3.38,3.39,3.4,3.41,3.42,3.43,3.44,3.45,3.46,3.47,3.48,3.49,3.5,3.5100000000000002,3.52,3.5300000000000002,3.54,3.5500000000000003,3.56,3.5700000000000003,3.58,3.59,3.6,3.61,3.62,3.63,3.64,3.65,3.66,3.67,3.68,3.69,3.7,3.71,3.72,3.73,3.74,3.75,3.7600000000000002,3.77,3.7800000000000002,3.79,3.8000000000000003,3.81,3.8200000000000003,3.83,3.84,3.85,3.86,3.87,3.88,3.89,3.9,3.91,3.92,3.93,3.94,3.95,3.96,3.97,3.98,3.99,4.0,4.01,4.0200000000000005,4.03,4.04,4.05,4.0600000000000005,4.07,4.08,4.09,4.1,4.11,4.12,4.13,4.14,4.15,4.16,4.17,4.18,4.19,4.2,4.21,4.22,4.23,4.24,4.25,4.26,4.2700000000000005,4.28,4.29,4.3,4.3100000000000005,4.32,4.33,4.34,4.3500000000000005,4.36,4.37,4.38,4.39,4.4,4.41,4.42,4.43,4.44,4.45,4.46,4.47,4.48,4.49,4.5,4.51,4.5200000000000005,4.53,4.54,4.55,4.5600000000000005,4.57,4.58,4.59,4.6000000000000005,4.61,4.62,4.63,4.64,4.65,4.66,4.67,4.68,4.69,4.7,4.71,4.72,4.73,4.74,4.75,4.76,4.7700000000000005,4.78,4.79,4.8,4.8100000000000005,4.82,4.83,4.84,4.8500000000000005,4.86,4.87,4.88,4.89,4.9,4.91,4.92,4.93,4.94,4.95,4.96,4.97,4.98,4.99,5.0,5.01,5.0200000000000005,5.03,5.04,5.05,5.0600000000000005,5.07,5.08,5.09,5.1000000000000005,5.11,5.12,5.13,5.14,5.15,5.16,5.17,5.18,5.19,5.2,5.21,5.22,5.23,5.24,5.25,5.26,5.2700000000000005,5.28,5.29,5.3,5.3100000000000005,5.32,5.33,5.34,5.3500000000000005,5.36,5.37,5.38,5.39,5.4,5.41,5.42,5.43,5.44,5.45,5.46,5.47,5.48,5.49,5.5,5.51,5.5200000000000005,5.53,5.54,5.55,5.5600000000000005,5.57,5.58,5.59],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"density","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb52"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-density {:=x <span class="at">:sepal-width</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                           :=density-bandwidth <span class="fl">0.05</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[3.595328782500036E-129,4.456952589059277E-127,5.308424413005012E-125,6.074653098816646E-123,6.678909318424126E-121,7.055338134778671E-119,7.16074715336079E-117,6.982759207298128E-115,6.542202971734733E-113,5.889103439012425E-111,5.093338872508883E-109,4.232375403767016E-107,3.3790452886882677E-105,2.5919824940791646E-103,1.910285750866113E-101,1.3526730241175698E-99,9.202705893503744E-98,6.015427226064055E-96,3.7778580201916227E-94,2.2795703944037463E-92,1.32156523171549E-90,7.361264482879685E-89,3.9395304328788307E-87,2.025651446394826E-85,1.0007214248607025E-83,4.7499594053352287E-82,2.166181382364811E-80,9.491349385652537E-79,3.995667330897422E-77,1.6161397265438425E-75,6.280536004120155E-74,2.3449993901268054E-72,8.412343140805463E-71,2.8994755123990306E-69,9.601744203625488E-68,3.054984698266099E-66,9.338909512425306E-65,2.7429097373714827E-63,7.7402517420383E-62,2.0985865063687402E-60,5.466720714443981E-59,1.368217430389205E-57,3.2901187354207924E-56,7.601446521254835E-55,1.6873653954730025E-53,3.598738192517718E-52,7.374279399792555E-51,1.4518346071036288E-49,2.746268029878575E-48,4.99110743984682E-47,8.715235700424877E-46,1.462142079185295E-44,2.3568298803380684E-43,3.650018923140463E-42,5.431130236703872E-41,7.764500799648758E-40,1.0665103676009385E-38,1.4074884669937786E-37,1.7846490656724345E-36,2.1741476464529223E-35,2.5447988461824576E-34,2.861844980884203E-33,3.092195703008156E-32,3.210081509119022E-31,3.2017938666780026E-30,3.068307611797475E-29,2.8250923380124717E-28,2.499163203122395E-27,2.1241481769345916E-26,1.734615493231884E-25,1.3609740792408133E-24,1.025946483560856E-23,7.430666696960921E-23,5.1708159089959475E-22,3.457152934800568E-21,2.2207840431732386E-20,1.370636476222522E-19,8.12767750608334E-19,4.6306169980883435E-18,2.5347753838773207E-17,1.3331171664662906E-16,6.736361444715953E-16,3.270473714261956E-15,1.525541986906871E-14,6.837004849062363E-14,2.9439866175162487E-13,1.2179627211153009E-12,4.841282002389153E-12,1.848906658887072E-11,6.784187042193378E-11,2.3917118772854445E-10,8.101177133097759E-10,2.6364261874993544E-9,8.243494000221617E-9,2.476482459407399E-8,7.148047126265705E-8,1.9822926863137673E-7,5.281732121384229E-7,1.3521136087361984E-6,3.3256628386991646E-6,7.85907570100532E-6,1.7844030102658417E-5,3.892625677546531E-5,8.158692403042543E-5,1.6429588919810676E-4,3.1787842715637934E-4,5.909131228097002E-4,0.001055393549238616,0.0018110626199586296,0.0029859375761713733,0.004729946430344579,0.007198797965445594,0.010526695682734438,0.014789469354424632,0.0199637363793081,0.025891688439469884,0.032263357958242936,0.03862712489267537,0.04443400346702241,0.049112662633659966,0.05216260404718162,0.05324583938430185,0.05225581517941869,0.0493474791198132,0.04492293377899577,0.03957946157096304,0.03403629555228686,0.029059767328643484,0.025402258288142354,0.02376055959674482,0.02474796193226216,0.028866560691128612,0.03646572196955883,0.04768064367098576,0.06235930666985,0.0800015436868385,0.09974345010463934,0.12041765823352212,0.14070244379255356,0.15934337006717864,0.17539936583875032,0.18844347690229069,0.19864848762142315,0.20671398699989116,0.21363892739544751,0.2203972523935035,0.22761386631394562,0.23534706097027847,0.24305480392287238,0.24976350137023876,0.2543888803503163,0.2561047465261709,0.2546374273879098,0.2503896241622736,0.24435845311245008,0.2378861489216556,0.2323403783708217,0.22884194160260077,0.22813263841361764,0.23061472329503552,0.23651947068800447,0.24610521811355054,0.25976859486792886,0.27798534840338446,0.30106914676277813,0.3288216072427579,0.36021099280817753,0.3932321943734654,0.4250553026269939,0.45247580806709914,0.4725684467577365,0.4833607828722565,0.48431729315414457,0.4764742188077338,0.4621754927549056,0.4444918928339215,0.42651044808822014,0.4107193513552345,0.3986705115219188,0.39099377391830975,0.38770496168761676,0.3886444042175644,0.39384345712355284,0.40365820409644565,0.4186156410509374,0.4390467134815749,0.46468135142701233,0.49441126651771705,0.5263706728212528,0.5583604932155595,0.5884939265563608,0.615829067683714,0.6407267946009648,0.6647487690394492,0.6900705252204855,0.7185723351561388,0.7509139918134873,0.7859384630653337,0.8206596758606901,0.8508964391227857,0.8723850001512802,0.8820225522414835,0.8788341602061626,0.8643434573857283,0.8422341689059089,0.8174391132867531,0.7949914493877018,0.7790433449595552,0.7723720267023123,0.7764843568683288,0.7921792784308972,0.8202317571230713,0.86180233669854,0.9182830318112787,0.9905293064673342,1.0777115827509969,1.1762366667780302,1.2792459260963303,1.3770548753344576,1.458595102208191,1.513558113765701,1.534656412593082,1.5193237814534857,1.4703203236713418,1.3950444568402005,1.30376444185463,1.2073172073455232,1.1149623381087712,1.032979863619372,0.9643082246182649,0.909148917675855,0.8661538960020371,0.8336669973689758,0.8105495689555937,0.7963442452610496,0.7908237482394902,0.7932198993985401,0.8015424920151397,0.8123441362384183,0.8210956757786346,0.8230869953928681,0.8145575628981351,0.7936683349657403,0.7609824491631487,0.7192998267944134,0.6729189002753357,0.6265898472508076,0.5845088169450026,0.5496560516108402,0.5236277655688911,0.5069158575716872,0.49942708551370746,0.5009637268660979,0.511432772147379,0.5306881887935783,0.5580844126530193,0.591960061597653,0.629323008203701,0.6659492400041512,0.6969585400102826,0.7177456186374774,0.7249965549167752,0.7174659948297937,0.696254123254478,0.6644825480537769,0.6264662840770818,0.5866420417325944,0.5485822886919871,0.5143780313179236,0.4845328033254658,0.458331361789424,0.4344951645457696,0.41186420698045195,0.3898699043021179,0.3686682306048155,0.3489410939408228,0.33149370826972596,0.3168353251421328,0.3049147603882329,0.29510426801848444,0.28642035306515856,0.27787957505270194,0.2688437142078456,0.25922414599497184,0.24947920018894132,0.24042269633825541,0.23293307555583154,0.22768406304041064,0.2249996416411807,0.22487773071246697,0.22715281052930164,0.2317076302838387,0.2386219995564553,0.24817161023815193,0.26065279336995584,0.27608603664735787,0.2939117357598397,0.3128109220598908,0.33075147797435434,0.345286043747454,0.3540376900869058,0.35523702781794037,0.3481477344967944,0.33324771183438023,0.3121099233958376,0.28702243344321887,0.26046674978889817,0.23460976764818167,0.21094726803642022,0.19017609534048013,0.17229277271123053,0.15684755702368802,0.14324692085421142,0.13100201203474712,0.11985830864493081,0.10979445043235192,0.10092547457709165,0.09337189508421061,0.0871555355291924,0.08216038393170393,0.07816377164874605,0.07491360129986799,0.07221168649100294,0.06996554584758342,0.06818814289230661,0.06694884892602482,0.06629945528126134,0.06620859365204416,0.06653341208726199,0.06704129074720117,0.06747352792095354,0.06762558885473638,0.06741138157253257,0.0668847273465719,0.06620740080447354,0.06557353574209326,0.06511703434905344,0.06483556392727012,0.06455930666946166,0.06397705907156073,0.06271250424217514,0.06042678926905602,0.05691575738704052,0.05217353546895991,0.046406657656447775,0.039999340517510355,0.03344478774288926,0.0272648174497869,0.021939045303279944,0.017856977164097496,0.015295562379485048,0.014415435910403803,0.015264492801155593,0.017778707727253647,0.021776076781355052,0.02694739572021218,0.03285387462129754,0.03894349027582531,0.044594267706262514,0.04918428054130069,0.05217795475659564,0.05321014889374474,0.05214688517826636,0.04910601110445717,0.044431299184338094,0.03862606854625109,0.03226296149970582,0.02589154547852763,0.019963686849659282,0.014789452867436631,0.010526690409882064,0.0071987963452102306,0.0047299459520022975,0.0029859374404876005,0.0018110625829804966,0.0010553935492386294,5.909131228097159E-4,3.1787842715637484E-4,1.6429588919810676E-4,8.158692403042673E-5,3.8926256775466625E-5,1.78440301026581E-5,7.85907570100532E-6,3.3256628386992294E-6,1.3521136087362537E-6,5.281732121384566E-7,1.9822926863137673E-7,7.14804712626587E-8,2.476482459407518E-8,8.24349400022223E-9,2.6364261874993544E-9,8.101177133097992E-10,2.3917118772855717E-10,6.784187042193956E-11,1.848906658887072E-11,4.841282002389156E-12,1.21796272111534E-12,2.943986617516437E-13,6.837004849062119E-14,1.525541986906871E-14,3.270473714262072E-15,6.736361444716431E-16,1.3331171664662524E-16,2.5347753838773207E-17,4.630616998088475E-18,8.127677506083975E-19,1.3706364762224735E-19,2.2207840431732386E-20,3.457152934800691E-21,5.170815908996389E-22,7.430666696961978E-23,1.025946483560856E-23,1.3609740792408713E-24,1.7346154932320441E-25,2.1241481769349087E-26,2.499163203122395E-27,2.8250923380125717E-28,3.06830761179778E-29,3.2017938666785036E-30,3.210081509119022E-31,3.092195703008288E-32,2.8618449808843243E-33,2.5447988461827476E-34,2.1741476464528293E-35,1.7846490656724345E-36,1.4074884669938385E-37,1.0665103676010597E-38,7.764500799648429E-40,5.431130236703872E-41,3.650018923140671E-42,2.3568298803383695E-43,1.4621420791852118E-44,8.715235700424877E-46,4.991107439847104E-47,2.746268029878926E-48,1.451834607103938E-49,7.374279399792555E-51,3.5987381925179224E-52,1.6873653954732426E-53,7.601446521256563E-55,3.2901187354207924E-56,1.3682174303892827E-57,5.4667207144449135E-59,2.0985865063692772E-60,7.7402517420383E-62,2.7429097373716387E-63,9.338909512425837E-65,3.054984698266446E-66,9.601744203624941E-68,2.8994755123990306E-69,8.412343140806182E-71,2.344999390127272E-72,6.280536004119618E-74,1.6161397265438425E-75,3.9956673308976485E-77,9.491349385653883E-79,2.1661813823646877E-80,4.7499594053352287E-82,1.0007214248607876E-83,2.0256514463952868E-85,3.939530432879951E-87,7.361264482879685E-89,1.3215652317155652E-90,2.279570394404135E-92,3.777858020192803E-94,6.015427226064055E-96,9.202705893503744E-98,1.3526730241178772E-99,1.9102857508665472E-101,2.5919824940791646E-103,3.3790452886882677E-105,4.232375403767618E-107,5.093338872509607E-109,5.889103439012425E-111,6.542202971734733E-113,6.982759207299717E-115,7.160747153362417E-117,7.055338134778671E-119,6.678909318424126E-121,6.074653098817336E-123,5.308424413005917E-125],"r":null,"name":"","fill":"tozeroy","mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[0.79,0.8,0.81,0.8200000000000001,0.8300000000000001,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.9400000000000001,0.9500000000000001,0.96,0.97,0.98,0.99,1.0,1.01,1.02,1.03,1.04,1.05,1.06,1.07,1.08,1.09,1.1,1.11,1.12,1.1300000000000001,1.1400000000000001,1.1500000000000001,1.16,1.17,1.18,1.19,1.2,1.21,1.22,1.23,1.24,1.25,1.26,1.27,1.28,1.29,1.3,1.31,1.32,1.33,1.34,1.35,1.36,1.37,1.3800000000000001,1.3900000000000001,1.4000000000000001,1.41,1.42,1.43,1.44,1.45,1.46,1.47,1.48,1.49,1.5,1.51,1.52,1.53,1.54,1.55,1.56,1.57,1.58,1.59,1.6,1.61,1.62,1.6300000000000001,1.6400000000000001,1.6500000000000001,1.6600000000000001,1.67,1.68,1.69,1.7,1.71,1.72,1.73,1.74,1.75,1.76,1.77,1.78,1.79,1.8,1.81,1.82,1.83,1.84,1.85,1.86,1.87,1.8800000000000001,1.8900000000000001,1.9000000000000001,1.9100000000000001,1.92,1.93,1.94,1.95,1.96,1.97,1.98,1.99,2.0,2.0100000000000002,2.02,2.0300000000000002,2.04,2.05,2.06,2.07,2.08,2.09,2.1,2.11,2.12,2.13,2.14,2.15,2.16,2.17,2.18,2.19,2.2,2.21,2.22,2.23,2.24,2.25,2.2600000000000002,2.27,2.2800000000000002,2.29,2.3000000000000003,2.31,2.32,2.33,2.34,2.35,2.36,2.37,2.38,2.39,2.4,2.41,2.42,2.43,2.44,2.45,2.46,2.47,2.48,2.49,2.5,2.5100000000000002,2.52,2.5300000000000002,2.54,2.5500000000000003,2.56,2.57,2.58,2.59,2.6,2.61,2.62,2.63,2.64,2.65,2.66,2.67,2.68,2.69,2.7,2.71,2.72,2.73,2.74,2.75,2.7600000000000002,2.77,2.7800000000000002,2.79,2.8000000000000003,2.81,2.82,2.83,2.84,2.85,2.86,2.87,2.88,2.89,2.9,2.91,2.92,2.93,2.94,2.95,2.96,2.97,2.98,2.99,3.0,3.0100000000000002,3.02,3.0300000000000002,3.04,3.0500000000000003,3.06,3.0700000000000003,3.08,3.09,3.1,3.11,3.12,3.13,3.14,3.15,3.16,3.17,3.18,3.19,3.2,3.21,3.22,3.23,3.24,3.25,3.2600000000000002,3.27,3.2800000000000002,3.29,3.3000000000000003,3.31,3.3200000000000003,3.33,3.34,3.35,3.36,3.37,3.38,3.39,3.4,3.41,3.42,3.43,3.44,3.45,3.46,3.47,3.48,3.49,3.5,3.5100000000000002,3.52,3.5300000000000002,3.54,3.5500000000000003,3.56,3.5700000000000003,3.58,3.59,3.6,3.61,3.62,3.63,3.64,3.65,3.66,3.67,3.68,3.69,3.7,3.71,3.72,3.73,3.74,3.75,3.7600000000000002,3.77,3.7800000000000002,3.79,3.8000000000000003,3.81,3.8200000000000003,3.83,3.84,3.85,3.86,3.87,3.88,3.89,3.9,3.91,3.92,3.93,3.94,3.95,3.96,3.97,3.98,3.99,4.0,4.01,4.0200000000000005,4.03,4.04,4.05,4.0600000000000005,4.07,4.08,4.09,4.1,4.11,4.12,4.13,4.14,4.15,4.16,4.17,4.18,4.19,4.2,4.21,4.22,4.23,4.24,4.25,4.26,4.2700000000000005,4.28,4.29,4.3,4.3100000000000005,4.32,4.33,4.34,4.3500000000000005,4.36,4.37,4.38,4.39,4.4,4.41,4.42,4.43,4.44,4.45,4.46,4.47,4.48,4.49,4.5,4.51,4.5200000000000005,4.53,4.54,4.55,4.5600000000000005,4.57,4.58,4.59,4.6000000000000005,4.61,4.62,4.63,4.64,4.65,4.66,4.67,4.68,4.69,4.7,4.71,4.72,4.73,4.74,4.75,4.76,4.7700000000000005,4.78,4.79,4.8,4.8100000000000005,4.82,4.83,4.84,4.8500000000000005,4.86,4.87,4.88,4.89,4.9,4.91,4.92,4.93,4.94,4.95,4.96,4.97,4.98,4.99,5.0,5.01,5.0200000000000005,5.03,5.04,5.05,5.0600000000000005,5.07,5.08,5.09,5.1000000000000005,5.11,5.12,5.13,5.14,5.15,5.16,5.17,5.18,5.19,5.2,5.21,5.22,5.23,5.24,5.25,5.26,5.2700000000000005,5.28,5.29,5.3,5.3100000000000005,5.32,5.33,5.34,5.3500000000000005,5.36,5.37,5.38,5.39,5.4,5.41,5.42,5.43,5.44,5.45,5.46,5.47,5.48,5.49,5.5,5.51,5.5200000000000005,5.53,5.54,5.55,5.5600000000000005,5.57,5.58,5.59],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"density","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb53"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-density {:=x <span class="at">:sepal-width</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>                           :=density-bandwidth <span class="dv">1</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[0.04166710171912144,0.04247965499421386,0.04330429099337671,0.044141100007687416,0.044990170896767094,0.045851591030583776,0.0467254462307934,0.04761182071164298,0.04851079702045364,0.04942245597771165,0.050346876616789216,0.05128413612331662,0.052234309774237715,0.053197470876567454,0.05417369070588278,0.05516303844457152,0.05616558111986842,0.057181383541706425,0.058210508240410345,0.05925301540426701,0.06030896281699658,0.06137840579516116,0.06246139712553748,0.06355798700248966,0.06466822296537197,0.06579214983599582,0.0669298096561938,0.06808124162551671,0.06924648203909713,0.07042556422571271,0.07161851848608883,0.07282537203147485,0.07404614892252867,0.0752808700085498,0.07652955286709692,0.07779221174402545,0.07906885749398879,0.08035949752143438,0.08166413572214211,0.0829827724253333,0.08431540433640218,0.08566202448029674,0.0870226221456002,0.08839718282934522,0.0897856881826051,0.09118811595689873,0.092604439951457,0.09403462996138146,0.09547865172674458,0.09693646688266774,0.09840803291041815,0.0998933030895679,0.10139222645125286,0.10290474773257434,0.10443080733218395,0.10597034126708832,0.1075232811307232,0.10908955405232465,0.11066908265764898,0.11226178503107337,0.11386757467911895,0.11548636049543912,0.11711804672730358,0.11876253294362725,0.1204197140045717,0.12208948003276346,0.1237717163861656,0.12546630363263667,0.12717311752621294,0.12889202898515664,0.13062290407179225,0.13236560397417899,0.13411998498964395,0.13588589851021318,0.13766319100996888,0.13945170403437185,0.14125127419157132,0.14306173314573806,0.14488290761244824,0.1467146193561433,0.14855668518969864,0.15040891697612604,0.15227112163242856,0.15414310113564372,0.156024652531089,0.15791556794283582,0.1598156345864356,0.16172463478391316,0.163642345981046,0.16556854076695815,0.16750298689602877,0.16944544731214606,0.17139568017530898,0.1733534388905985,0.17531847213952514,0.17729052391376462,0.17926933355129143,0.18125463577491427,0.1832461607332271,0.1852436340439728,0.18724677683982519,0.18925530581659997,0.1912689332838781,0.19328736721805714,0.19531031131781906,0.19733746506201616,0.1993685237699644,0.20140317866414012,0.20344111693527278,0.20548202180982322,0.20752557261983395,0.2095714448751457,0.2116193103379494,0.21366883709967932,0.21571968966021374,0.21777152900937,0.21982401271067287,0.22187679498737117,0.2239295268106839,0.22598185599024473,0.22803342726672426,0.23008388240659292,0.2321328602990039,0.23417999705475487,0.2362249261073056,0.23826727831580838,0.24030668207011754,0.24234276339774227,0.24437514607270303,0.2464034517262453,0.2484272999593798,0.2504463084571927,0.25246009310489265,0.254468268105536,0.2564704460993962,0.25846623828491677,0.2604552545412011,0.2624371035519911,0.264411392931076,0.2663777293490806,0.2683357186615739,0.2702849660384466,0.2722250760944979,0.274155653021164,0.27607630071934314,0.2779866229332467,0.27988622338521196,0.28177470591142145,0.28365167459845636,0.2855167339206301,0.28736948887801517,0.2892095451351263,0.2910365091601653,0.29284998836477355,0.294649591244217,0.2964349275179396,0.29820560827041276,0.29996124609220126,0.30170145522119,0.30342585168388647,0.3051340534367289,0.3068256805073372,0.30850035513561846,0.31015770191466496,0.31179734793135966,0.31341892290663564,0.31502205933529004,0.31660639262529455,0.3181715612365257,0.3197172068188381,0.3212429743494045,0.3227485122692558,0.3242334726189429,0.32569751117324475,0.3271402875748481,0.3285614654669354,0.3299607126245981,0.33133770108500776,0.33269210727626947,0.3340236121448899,0.335331901281789,0.33661666504678245,0.3378775986914694,0.33911440248045405,0.3403267818108253,0.34151444732984904,0.34267711505078463,0.34381450646677075,0.34492634866271193,0.34601237442511046,0.3470723223497687,0.3481059369473087,0.3491129687464565,0.35009317439501164,0.35104631675846065,0.35197216501617423,0.35287049475513466,0.35374108806113497,0.3545837336073968,0.355398226740568,0.35618436956403376,0.35694197101850694,0.3576708469598448,0.35837082023405276,0.35904172074941715,0.3596833855457494,0.36029565886068465,0.3608783921929993,0.3614314443629133,0.3619546815693497,0.36244797744410057,0.3629112131028884,0.36334427719328216,0.36374706593944667,0.3641194831836895,0.3644614404247965,0.36477285685313,0.3650536593824591,0.36530378267851893,0.36552316918428024,0.36571176914190207,0.36586954061137983,0.3659964494858576,0.3660924695036086,0.3661575822566711,0.36619177719614515,0.3661950516341416,0.36616741074237974,0.3661088675474493,0.36601944292272964,0.3658991655769729,0.36574807203956866,0.36556620664249107,0.3653536214989432,0.36511037647871386,0.36483653918026443,0.36453218489956374,0.36419739659568084,0.36383226485317866,0.3634368878413109,0.363011371270058,0.3625558283430339,0.36207037970728284,0.36155515340000416,0.36101028479223524,0.360435916529529,0.3598321984696621,0.35919928761741243,0.3585373480564404,0.35784655087832457,0.35712707410878897,0.3563791026311655,0.35560282810714267,0.35479844889484075,0.35396616996427593,0.35310620281024346,0.3522187653626908,0.3513040818946287,0.3503623829276223,0.34939390513493923,0.34839889124239737,0.3473775899269669,0.3463302557132049,0.3452571488675599,0.344158535290631,0.3430346864074175,0.3418858790556468,0.3407123953722363,0.33951452267794124,0.33829255336028247,0.3370467847547923,0.3357775190246611,0.33448506303885417,0.3331697282487552,0.3318318305634281,0.3304716902235331,0.32908963167400157,0.3276859834355208,0.3262610779749,0.32481525157440483,0.3233488442001052,0.321862199369335,0.32035566401731863,0.31882958836304026,0.3172843257744385,0.31572023263297816,0.31413766819768774,0.31253699446873023,0.3109185760505747,0.30928278001484966,0.3076299757629392,0.3059605348883988,0.3042748310392579,0.30257323978028927,0.3008561384553033,0.2991239060495438,0.2973769230522478,0.2956155713194493,0.29384023393708436,0.2920512950844695,0.29024913989821605,0.28843415433665853,0.28660672504483936,0.2847672392201384,0.2829160844785994,0.28105364872201266,0.27918032000582116,0.27729648640791377,0.2754025358983582,0.2734988562101327,0.27158583471092596,0.26966385827604433,0.2677333131624968,0.265794584884299,0.2638480580890707,0.26189411643594784,0.2599331424748899,0.25796551752741453,0.25599162156881183,0.25401183311189346,0.25202652909230233,0.25003608475545647,0.2480408735451423,0.24604126699381404,0.24403763461464356,0.24203034379534014,0.24001975969380465,0.23800624513562782,0.23599016051349164,0.23397186368848383,0.23195170989338001,0.2299300516379043,0.22790723861601242,0.2258836176152159,0.22385953242797352,0.22183532376518425,0.21981132917179216,0.21778788294453222,0.2157653160518355,0.21374395605591295,0.21172412703703364,0.20970614952001904,0.20769034040295395,0.20567701288814486,0.20366647641532,0.2016590365970992,0.19965499515672278,0.19765464986805864,0.1956582944978952,0.19366621875051226,0.1916787082145461,0.189696044312143,0.18771850425040162,0.18574636097510508,0.1837798831267383,0.18181933499879316,0.17986497649834263,0.17791706310889588,0.1759758458555061,0.1740415712721444,0.17211448137130844,0.1701948136158726,0.16828280089315323,0.1663786714911831,0.16448264907718016,0.1625949526781904,0.16071579666389296,0.15884539073154696,0.1569839398930579,0.15513164446415287,0.1532887000556339,0.1514552975666927,0.14963162318026274,0.14781785836038575,0.14601417985156417,0.14422075968008422,0.14243776515726816,0.14066535888464324,0.13890369876098993,0.1371529379912488,0.13541322509724485,0.13368470393021548,0.13196751368509854,0.1302617889165552,0.12856765955669314,0.1268852509344655,0.1252146837966971,0.12355607433072534,0.12190953418860223,0.12027517051283873,0.11865308596364757,0.11704337874765358,0.11544614264803414,0.11386146705605905,0.11228943700398561,0.11073013319928175,0.109183632060133,0.10765000575220379,0.10612932222661177,0.10462164525907738,0.10312703449021854,0.10164554546694254,0.10017722968490914,0.09872213463202065,0.09728030383290322,0.09585177689434184,0.09443658955163506,0.09303477371582707,0.09164635752178481,0.09027136537707835,0.08890981801163471,0.0875617325281188,0.08622712245301391,0.08490599778836118,0.0835983650641212,0.08230422739112346,0.08102358451456908,0.07975643286804636,0.07850276562803281,0.07726257276883855,0.07603584111796588,0.07482255441184242,0.07362269335190307,0.07243623566097926,0.07126315613996737,0.07010342672474142,0.06895701654328058,0.06782389197297421,0.06670401669808143,0.06559735176730588,0.06450385565146172,0.06342348430119565,0.062356191204742145,0.06130192744567532,0.06026064176063558,0.05923228059699952,0.05821678817046657,0.05721410652253663,0.05622417557785108,0.05524693320137257,0.05428231525537687,0.05333025565623532,0.05239068643096031,0.051463537773492524,0.05054873810070719,0.049646214108116676,0.0487558908252458,0.04787769167066475,0.047011538506650234,0.046157351693464826,0.04531505014322687,0.044484551373357724,0.04366577155958619,0.04285862558849223,0.042063027109575414,0.041278888586827836,0.04050612134980173,0.03974463564415087,0.0389943406816332,0.038255144689565444,0.03752695495970743,0.036809677896571594,0.0361032190651431,0.03540748323799469,0.03472237444179324,0.03404779600318055,0.033383650594023706,0.03272984027602162,0.032086266544661145,0.031452830372517025,0.030829432251881922,0.030215972236725116,0.0296123499839717,0.029018464794093736,0.02843421565101219,0.027859501261301444,0.027294220092692324,0.026738270411871344,0.026191550321571142,0.02565395779694896,0.025125390721251528],"r":null,"name":"","fill":"tozeroy","mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"lon":null,"lat":null,"x":[0.79,0.8,0.81,0.8200000000000001,0.8300000000000001,0.84,0.85,0.86,0.87,0.88,0.89,0.9,0.91,0.92,0.93,0.9400000000000001,0.9500000000000001,0.96,0.97,0.98,0.99,1.0,1.01,1.02,1.03,1.04,1.05,1.06,1.07,1.08,1.09,1.1,1.11,1.12,1.1300000000000001,1.1400000000000001,1.1500000000000001,1.16,1.17,1.18,1.19,1.2,1.21,1.22,1.23,1.24,1.25,1.26,1.27,1.28,1.29,1.3,1.31,1.32,1.33,1.34,1.35,1.36,1.37,1.3800000000000001,1.3900000000000001,1.4000000000000001,1.41,1.42,1.43,1.44,1.45,1.46,1.47,1.48,1.49,1.5,1.51,1.52,1.53,1.54,1.55,1.56,1.57,1.58,1.59,1.6,1.61,1.62,1.6300000000000001,1.6400000000000001,1.6500000000000001,1.6600000000000001,1.67,1.68,1.69,1.7,1.71,1.72,1.73,1.74,1.75,1.76,1.77,1.78,1.79,1.8,1.81,1.82,1.83,1.84,1.85,1.86,1.87,1.8800000000000001,1.8900000000000001,1.9000000000000001,1.9100000000000001,1.92,1.93,1.94,1.95,1.96,1.97,1.98,1.99,2.0,2.0100000000000002,2.02,2.0300000000000002,2.04,2.05,2.06,2.07,2.08,2.09,2.1,2.11,2.12,2.13,2.14,2.15,2.16,2.17,2.18,2.19,2.2,2.21,2.22,2.23,2.24,2.25,2.2600000000000002,2.27,2.2800000000000002,2.29,2.3000000000000003,2.31,2.32,2.33,2.34,2.35,2.36,2.37,2.38,2.39,2.4,2.41,2.42,2.43,2.44,2.45,2.46,2.47,2.48,2.49,2.5,2.5100000000000002,2.52,2.5300000000000002,2.54,2.5500000000000003,2.56,2.57,2.58,2.59,2.6,2.61,2.62,2.63,2.64,2.65,2.66,2.67,2.68,2.69,2.7,2.71,2.72,2.73,2.74,2.75,2.7600000000000002,2.77,2.7800000000000002,2.79,2.8000000000000003,2.81,2.82,2.83,2.84,2.85,2.86,2.87,2.88,2.89,2.9,2.91,2.92,2.93,2.94,2.95,2.96,2.97,2.98,2.99,3.0,3.0100000000000002,3.02,3.0300000000000002,3.04,3.0500000000000003,3.06,3.0700000000000003,3.08,3.09,3.1,3.11,3.12,3.13,3.14,3.15,3.16,3.17,3.18,3.19,3.2,3.21,3.22,3.23,3.24,3.25,3.2600000000000002,3.27,3.2800000000000002,3.29,3.3000000000000003,3.31,3.3200000000000003,3.33,3.34,3.35,3.36,3.37,3.38,3.39,3.4,3.41,3.42,3.43,3.44,3.45,3.46,3.47,3.48,3.49,3.5,3.5100000000000002,3.52,3.5300000000000002,3.54,3.5500000000000003,3.56,3.5700000000000003,3.58,3.59,3.6,3.61,3.62,3.63,3.64,3.65,3.66,3.67,3.68,3.69,3.7,3.71,3.72,3.73,3.74,3.75,3.7600000000000002,3.77,3.7800000000000002,3.79,3.8000000000000003,3.81,3.8200000000000003,3.83,3.84,3.85,3.86,3.87,3.88,3.89,3.9,3.91,3.92,3.93,3.94,3.95,3.96,3.97,3.98,3.99,4.0,4.01,4.0200000000000005,4.03,4.04,4.05,4.0600000000000005,4.07,4.08,4.09,4.1,4.11,4.12,4.13,4.14,4.15,4.16,4.17,4.18,4.19,4.2,4.21,4.22,4.23,4.24,4.25,4.26,4.2700000000000005,4.28,4.29,4.3,4.3100000000000005,4.32,4.33,4.34,4.3500000000000005,4.36,4.37,4.38,4.39,4.4,4.41,4.42,4.43,4.44,4.45,4.46,4.47,4.48,4.49,4.5,4.51,4.5200000000000005,4.53,4.54,4.55,4.5600000000000005,4.57,4.58,4.59,4.6000000000000005,4.61,4.62,4.63,4.64,4.65,4.66,4.67,4.68,4.69,4.7,4.71,4.72,4.73,4.74,4.75,4.76,4.7700000000000005,4.78,4.79,4.8,4.8100000000000005,4.82,4.83,4.84,4.8500000000000005,4.86,4.87,4.88,4.89,4.9,4.91,4.92,4.93,4.94,4.95,4.96,4.97,4.98,4.99,5.0,5.01,5.0200000000000005,5.03,5.04,5.05,5.0600000000000005,5.07,5.08,5.09,5.1000000000000005,5.11,5.12,5.13,5.14,5.15,5.16,5.17,5.18,5.19,5.2,5.21,5.22,5.23,5.24,5.25,5.26,5.2700000000000005,5.28,5.29,5.3,5.3100000000000005,5.32,5.33,5.34,5.3500000000000005,5.36,5.37,5.38,5.39,5.4,5.41,5.42,5.43,5.44,5.45,5.46,5.47,5.48,5.49,5.5,5.51,5.5200000000000005,5.53,5.54,5.55,5.5600000000000005,5.57,5.58,5.59],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"density","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb54"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-density {:=x <span class="at">:sepal-width</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>                           :=color <span class="at">:species</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[2.578745856131453E-9,3.5246079269131195E-9,4.80315726679375E-9,6.526142047000647E-9,8.84097088854562E-9,1.1941451559897729E-8,1.6081553674032514E-8,2.1592981388735495E-8,2.890752692644209E-8,3.8585398493333865E-8,5.135098320432058E-8,6.81378238871785E-8,9.014496575064516E-8,1.1890727301932165E-7,1.5638283536090302E-7,2.0506118811561984E-7,2.680967678527118E-7,3.4947282417753963E-7,4.542019178123303E-7,5.885701603300715E-7,7.604334971931018E-7,9.795756049370426E-7,1.2581383639092268E-6,1.6111373738329975E-6,2.0570765888687013E-6,2.618677843121674E-6,3.323742789844846E-6,4.206166551474616E-6,5.307124125790119E-6,6.676452256353617E-6,8.37425098006659E-6,1.0472730323932215E-5,1.3058328534789E-5,1.623412867255739E-5,2.0122600247327918E-5,2.4868691687547018E-5,3.064329763284096E-5,3.764712218369621E-5,4.611495513897999E-5,5.632037273839821E-5,6.858086733344722E-5,8.326340158327277E-5,1.0079037207879527E-4,1.21645954820912E-4,1.4638278910265038E-4,1.7562894297362518E-4,2.100950795152071E-4,2.5058172760072353E-4,2.9798653583237313E-4,3.5331136580458907E-4,4.176690564078496E-4,4.92289666240894E-4,5.785259768711445E-4,6.77858057043186E-4,7.918964001633411E-4,9.223838826679557E-4,0.0010711955872085078,0.0012403366552693538,0.001431937684489796,0.0016482473959610602,0.0018916222811612912,0.0021645129601146266,0.00246944701448737,0.002809008126745278,0.0031858112503530918,0.0036024740550967944,0.004061584252625163,0.004565663174480489,0.005117125682659873,0.005718236721220721,0.006371064911194999,0.007077433705526493,0.00783887073620866,0.008656556131708511,0.009531270477264374,0.010463343793103924,0.0114526060392702,0.0124983406304068,0.013599241975953835,0.01475337825236055,0.015958160591469307,0.017210319840792816,0.018505891992764076,0.01984021329859951,0.021207925907413668,0.022602994873824125,0.02401873695636715,0.025447861655132693,0.026882524580596385,0.028314393046486284,0.029734723522417367,0.031134450326707575,0.032504284687453415,0.03383482312262392,0.035116663439527386,0.036340527657543496,0.037497389089126566,0.03857860248687889,0.03957603504196422,0.04048219630333053,0.04129036504584698,0.04199471116826548,0.04259041080334157,0.0430737530108631,0.04344223634829014,0.04369465459506097,0.043831169975649835,0.04385337363744874,0.04376433278814332,0.04356862440215833,0.04327235567105816,0.04288317165072343,0.0424102508109422,0.041864289428139606,0.04125747583140372,0.040603455943505014,0.03991729115409079,0.03921541003453238,0.0385155551026516,0.03783672582965812,0.03719911891663614,0.03662406666419242,0.036133974011901424,0.035752254558859796,0.03550326546316498,0.03541224110228802,0.03550522457742215,0.035808996292087475,0.036350998292696494,0.037159252897583775,0.03826227393620444,0.03968896878859118,0.041468529355165026,0.04363031013101273,0.04620369150334197,0.04921792703806748,0.052701973089004366,0.0566843001136996,0.06119268514404099,0.06625398551109261,0.07189389449794031,0.07813668023605189,0.08500490983708903,0.09251916145362467,0.1006977275985736,0.10955631387369807,0.11910773763787735,0.1293616319318469,0.14032416031344624,0.1519977486610405,0.16438084023382366,0.1774676803738452,0.19124813717762892,0.20570756424621825,0.2208267112348589,0.23658168737234336,0.25294398239609556,0.2698805484795029,0.28735394570808165,0.3053225525197869,0.3237408412793964,0.34255971783411016,0.3617269225260693,0.381187488749171,0.4008842537638167,0.42075841516458445,0.4407501251530874,0.4607991136541614,0.48084533034150956,0.5008295948498813,0.5206942438656381,0.5403837634288117,0.5598453946639824,0.579029701295743,0.5978910877024227,0.6163882569186908,0.634484598906357,0.6521485005605758,0.6693535702862708,0.6860787715425901,0.7023084614815612,0.7180323326665213,0.7332452578079347,0.7479470394576153,0.7621420686133376,0.7758388981596186,0.7890497389617301,0.8017898881943122,0.8140771010805493,0.8259309186025547,0.837371964882248,0.8484212287926477,0.8590993449161851,0.8694258891992424,0.879418704547839,0.8890932711626351,0.8984621356246703,0.9075344116269904,0.9163153638202528,0.9248060845290782,0.9330032711347859,0.9408991097502953,0.9484812684821667,0.9557330011356255,0.9626333597279446,0.9691575116932146,0.9752771552481582,0.9809610241045752,0.9861754706176853,0.990885114605559,0.995053543512652,0.9986440483624104,1.0016203790846734,1.0039475023381086,1.0055923448909734,1.0065245059792354,1.0067169228222241,1.0061464746244269,1.004794511898632,1.0026472997716327,0.9996963660311171,0.9959387469857187,0.9913771266780876,0.9860198675475336,0.979880933216404,0.9729797066045887,0.9653407089931809,0.9569932278984611,0.9479708636240124,0.9383110060820167,0.9280542548732728,0.9172437966577168,0.9059247545122138,0.8941435242500484,0.8819471125680849,0.8693824914047379,0.8564959820571211,0.843332681450404,0.829935941516513,0.8163469109693166,0.8026041469114406,0.788743301729278,0.7747968886849824,0.7607941275547884,0.7467608696477048,0.7327195996203609,0.7186895097303833,0.7046866405847847,0.6907240810765082,0.6768122190894071,0.6629590337090885,0.6491704191154143,0.6354505300546478,0.6218021387901689,0.608226993697076,0.5947261701782034,0.5813004053109475,0.5679504085550873,0.5546771419264741,0.5414820642327131,0.5283673352356612,0.5153359769126974,0.5023919902957348,0.48954042763777095,0.47678742085794096,0.46414016831799404,0.45160688296090784,0.43919670567573904,0.4269195884272669,0.41478615219497544,0.4028075251000153,0.3909951662621425,0.3793606809280618,0.3679156322587897,0.35667135487169893,0.3456387748207451,0.3348282401867045,0.32424936586024,0.3139108954575611,0.3038205826345228,0.29398509338290746,0.28440993022375427,0.2750993785761579,0.2660564749930673,0.2572829964321446,0.2487794692808435,0.24054519648784325,0.23257830087232753,0.22487578248906676,0.21743358781876881,0.21024668852469927,0.20330916756063427,0.19661431052242218,0.1901547002947165,0.18392231324388034,0.17790861543514278,0.1721046575944004,0.16650116778073135,0.1610886409737915,0.15585742500124936,0.15079780239924206,0.1459000681696215,0.14115460288153975,0.13655194178795535,0.1320828394945171,0.127738330493157,0.12350978559614897,0.11938896431060365,0.11536806313677005,0.11143975970353763,0.10759725256140766,0.10383429650182473,0.10014523281546607,0.096525014528497,0.09296922590561402,0.08947409595068333,0.0860365054895284,0.08265398748480422,0.07932472030043031,0.07604751372554225,0.07282178765985305,0.06964754365960107,0.06652532917116652,0.06345619533725914,0.06044164846227356,0.05748359597644022,0.05458428766370949,0.05174625307340374,0.048972236137176925,0.04626512808931525,0.04362789983113274,0.04106353494064888,0.03857496438510698,0.03616500418152373,0.033836296937310585,0.031591258259113277,0.02943202884363077,0.027360432933564202,0.02537794366884653,0.023485655701122682,0.02168426522815511,0.019974057768203386,0.01835490280242672,0.016826256068596224,0.015387168253698737,0.014036299917730234,0.012771941955566928,0.011592040889925485,0.010494228231619815,0.009475853108593535,0.008534017323863559,0.007665612215523792,0.006867356071610497,0.006135832025013686,0.005467525220756698,0.004858858869368695,0.00430622860990347,0.003806034728817001,0.0033547118660127214,0.0029487559249525464,0.0025847479761751985,0.0022593751063865212,0.0019694479795358435,0.0017119153988400216,0.0014838757395307172,0.0012825854767030472,0.0011054649675958507,9.501016973232784E-4,8.142512217148513E-4,6.958360573011811E-4,5.929427658851567E-4,5.03817565875032E-4,4.268605382134407E-4,3.606189404549154E-4,3.0377965021859626E-4,2.5516104597858027E-4,2.1370450672435432E-4,1.7846570767937668E-4,1.4860586773942695E-4,1.2338308259078097E-4,1.021438392036614E-4,8.431491078494323E-5,6.939542316517993E-5,5.6949545833333874E-5,4.659952908172377E-5,3.801924795879056E-5,3.0928240906939626E-5,2.508624476925365E-5,2.0288218987145247E-5,1.6359844622022893E-5,1.3153472462955815E-5,1.0544532134919094E-5,8.428279631564304E-6,6.716988792659359E-6,5.3374492308672575E-6,4.22878644562603E-6,3.340566075764079E-6,2.6311534744543064E-6,2.066301138035961E-6,1.6179381449382136E-6,1.26313744723688E-6,9.83239673257836E-7,7.631112198837527E-7,5.905213344663921E-7,4.5561952014638366E-7,3.504997529930197E-7,2.6883851072199925E-7,2.055953748987085E-7,1.567664182517019E-7,1.1918190510283654E-7,9.034089379003976E-8,6.827728557116771E-8,5.144996087756261E-8,3.8655438038015366E-8,2.8956943525112207E-8,2.1627745055432518E-8,1.610593746544068E-8,1.195850451172912E-8,8.852861941713017E-9,6.534409338653903E-9,4.8087653469648335E-9],"r":null,"name":"setosa","fill":"tozeroy","mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#1B9E77"},"lon":null,"lat":null,"x":[1.24,1.25,1.26,1.27,1.28,1.29,1.3,1.31,1.32,1.33,1.34,1.35,1.36,1.37,1.3800000000000001,1.3900000000000001,1.4000000000000001,1.41,1.42,1.43,1.44,1.45,1.46,1.47,1.48,1.49,1.5,1.51,1.52,1.53,1.54,1.55,1.56,1.57,1.58,1.59,1.6,1.61,1.62,1.6300000000000001,1.6400000000000001,1.6500000000000001,1.6600000000000001,1.67,1.68,1.69,1.7,1.71,1.72,1.73,1.74,1.75,1.76,1.77,1.78,1.79,1.8,1.81,1.82,1.83,1.84,1.85,1.86,1.87,1.8800000000000001,1.8900000000000001,1.9000000000000001,1.9100000000000001,1.92,1.93,1.94,1.95,1.96,1.97,1.98,1.99,2.0,2.0100000000000002,2.02,2.0300000000000002,2.04,2.05,2.06,2.07,2.08,2.09,2.1,2.11,2.12,2.13,2.14,2.15,2.16,2.17,2.18,2.19,2.2,2.21,2.22,2.23,2.24,2.25,2.2600000000000002,2.27,2.2800000000000002,2.29,2.3000000000000003,2.31,2.32,2.33,2.34,2.35,2.36,2.37,2.38,2.39,2.4,2.41,2.42,2.43,2.44,2.45,2.46,2.47,2.48,2.49,2.5,2.5100000000000002,2.52,2.5300000000000002,2.54,2.5500000000000003,2.56,2.57,2.58,2.59,2.6,2.61,2.62,2.63,2.64,2.65,2.66,2.67,2.68,2.69,2.7,2.71,2.72,2.73,2.74,2.75,2.7600000000000002,2.77,2.7800000000000002,2.79,2.8000000000000003,2.81,2.82,2.83,2.84,2.85,2.86,2.87,2.88,2.89,2.9,2.91,2.92,2.93,2.94,2.95,2.96,2.97,2.98,2.99,3.0,3.0100000000000002,3.02,3.0300000000000002,3.04,3.0500000000000003,3.06,3.0700000000000003,3.08,3.09,3.1,3.11,3.12,3.13,3.14,3.15,3.16,3.17,3.18,3.19,3.2,3.21,3.22,3.23,3.24,3.25,3.2600000000000002,3.27,3.2800000000000002,3.29,3.3000000000000003,3.31,3.3200000000000003,3.33,3.34,3.35,3.36,3.37,3.38,3.39,3.4,3.41,3.42,3.43,3.44,3.45,3.46,3.47,3.48,3.49,3.5,3.5100000000000002,3.52,3.5300000000000002,3.54,3.5500000000000003,3.56,3.5700000000000003,3.58,3.59,3.6,3.61,3.62,3.63,3.64,3.65,3.66,3.67,3.68,3.69,3.7,3.71,3.72,3.73,3.74,3.75,3.7600000000000002,3.77,3.7800000000000002,3.79,3.8000000000000003,3.81,3.8200000000000003,3.83,3.84,3.85,3.86,3.87,3.88,3.89,3.9,3.91,3.92,3.93,3.94,3.95,3.96,3.97,3.98,3.99,4.0,4.01,4.0200000000000005,4.03,4.04,4.05,4.0600000000000005,4.07,4.08,4.09,4.1,4.11,4.12,4.13,4.14,4.15,4.16,4.17,4.18,4.19,4.2,4.21,4.22,4.23,4.24,4.25,4.26,4.2700000000000005,4.28,4.29,4.3,4.3100000000000005,4.32,4.33,4.34,4.3500000000000005,4.36,4.37,4.38,4.39,4.4,4.41,4.42,4.43,4.44,4.45,4.46,4.47,4.48,4.49,4.5,4.51,4.5200000000000005,4.53,4.54,4.55,4.5600000000000005,4.57,4.58,4.59,4.6000000000000005,4.61,4.62,4.63,4.64,4.65,4.66,4.67,4.68,4.69,4.7,4.71,4.72,4.73,4.74,4.75,4.76,4.7700000000000005,4.78,4.79,4.8,4.8100000000000005,4.82,4.83,4.84,4.8500000000000005,4.86,4.87,4.88,4.89,4.9,4.91,4.92,4.93,4.94,4.95,4.96,4.97,4.98,4.99,5.0,5.01,5.0200000000000005,5.03,5.04,5.05,5.0600000000000005,5.07,5.08,5.09,5.1000000000000005,5.11,5.12,5.13,5.14,5.15,5.16,5.17,5.18,5.19,5.2,5.21,5.22,5.23,5.24,5.25,5.26,5.2700000000000005,5.28,5.29,5.3,5.3100000000000005,5.32,5.33,5.34,5.3500000000000005,5.36,5.37,5.38,5.39,5.4,5.41,5.42,5.43,5.44],"text":null},{"y":[1.3245322182305848E-6,1.7889293504539138E-6,2.4057709722117236E-6,3.221413577537443E-6,4.295073022634855E-6,5.7020011553237706E-6,7.53733170090456E-6,9.920704476647226E-6,1.3001804553247005E-5,1.696684386546488E-5,2.2046344956241118E-5,2.8524079963291485E-5,3.674749527535882E-5,4.7139674032253545E-5,6.021296114496387E-5,7.658434297790626E-5,9.699264420518916E-5,1.223175649673108E-4,1.5360055870673392E-4,1.9206731482352332E-4,2.3915202724619937E-4,2.96522785005543E-4,3.6610804627752004E-4,4.501236516657532E-4,5.51099857158627E-4,6.719077450806273E-4,8.157842704274384E-4,9.863551082494417E-4,0.0011876544096003007,0.0014241404024309843,0.0017007060755180182,0.002022683685983654,0.002395842364494741,0.002826377924187602,0.003320894221558544,0.0038863756177245036,0.0045301503555417,0.00525984498734226,0.006083330389309251,0.007008660065792088,0.008044002521186555,0.009197568888960516,0.01047753837526909,0.011891983906956885,0.013448800855744961,0.015155641909815673,0.01701986127412529,0.01904847135629422,0.021248114962947245,0.023625055396968703,0.026185187146299038,0.028934067903510732,0.031876973010443885,0.03501897177170939,0.038365024217168156,0.04192009572387433,0.04568928575304685,0.04967796584336293,0.05389192104148847,0.05833748774581977,0.06302168127862665,0.06795230461262379,0.07313803105801293,0.07858845319860475,0.0843140912800475,0.0903263552403297,0.09663745594098909,0.10326026283566636,0.11020810730970779,0.11749453263494365,0.1251329948419367,0.13313651926195494,0.14151732129410213,0.1502864009453499,0.1594531226400243,0.16902479302868947,0.1790062503532463,0.1893994792519857,0.20020326470273347,0.21141289794423432,0.2230199462830325,0.2350120964495696,0.24737307950307535,0.26008268254792355,0.27311684992379315,0.28644787372591646,0.30004467072624375,0.3138731401057515,0.32789659399951443,0.3420762506424724,0.35637177854261787,0.37074187837819267,0.3851448890738481,0.3995394040279924,0.4138848838311195,0.4281422525385534,0.44227446568981843,0.45624703971237096,0.47002853402127276,0.48359097893281816,0.49691024435598224,0.5099663460134948,0.5227436876013863,0.5352312387462403,0.5474226498182746,0.559316305573232,0.5709153202176103,0.5822274768306858,0.5932651141621319,0.6040449637012848,0.6145879396402637,0.6249188839936535,0.6350662687598442,0.6450618566795066,0.6549403219236783,0.6647388319756868,0.6744965920907802,0.6842543540417949,0.6940538913869319,0.70393744420794,0.7139471371279807,0.7241243753791337,0.7345092246899547,0.7451397817383557,0.7560515427970221,0.7672767789244986,0.7788439265693781,0.7907770027150027,0.8030950536699412,0.8158116462956503,0.8289344098656758,0.8424646358975514,0.8563969422325939,0.8707190064169061,0.8854113721259083,0.900447331045836,0.9157928813506109,0.9314067627569028,0.9472405671602216,0.9632389230912196,0.9793397517078369,0.9954745917584017,1.0115689908962828,1.0275429608606792,1.043311494305809,1.058785141392797,1.0738706445767663,1.088471630243342,1.1024893558944975,1.1158235113817434,1.1283730721787222,1.1400372018381846,1.1507161995776445,1.1603124873975315,1.1687316292976688,1.175883373091641,1.1816827031186017,1.1860508899327933,1.1889165209428354,1.1902164941125417,1.1898969553605323,1.1879141593356168,1.184235232911052,1.1788388211206855,1.1717155964102242,1.162868614017544,1.1523134990086357,1.140078453920745,1.126204080004451,1.1107430095780908,1.0937593518491264,1.0753279595332488,1.0555335285163827,1.034469547457416,1.0122371184282102,0.9889436732573434,0.9647016130371587,0.9396269001558716,0.9138376331545225,0.8874526346520063,0.8605900815456243,0.8333662047376401,0.8058940828584726,0.7782825509863079,0.7506352413593462,0.7230497687161798,0.6956170683656122,0.6684208905614543,0.6415374504117198,0.615035228537842,0.5889749141451746,0.5634094791687222,0.5383843697820604,0.5139377998285847,0.49010112970567643,0.4668993136482289,0.4443513987146543,0.4224710591375516,0.40126715088333614,0.38074427254068016,0.3609033202201415,0.34174202583119123,0.32325546983596143,0.30543656128143043,0.28827647963764713,0.2717650742249129,0.25589121887957256,0.24064312023579904,0.22600857941169758,0.21197520771013226,0.19853059776908608,0.18566245228488948,0.17335867301796104,0.16160741327665826,0.1503970975799445,0.13971641227548762,0.1295542716461365,0.11989976373432872,0.11074208056996178,0.10207043741700043,0.09387398562979746,0.08614172357279017,0.07886240982209523,0.0720244825174147,0.06561598843571284,0.05962452444253314,0.05403719411498855,0.04884058093645602,0.044020739288861105,0.039563203621230426,0.03545301554337575,0.031674767974640416,0.02821266491825936,0.025050594938979452,0.022172216118983266,0.019561049710555424,0.01720058000621422,0.01507435737035173,0.013166101740180606,0.01145980392034657,0.009939822231565809,0.008590972360939092,0.007398608601663984,0.006348695021960859,0.005427865667272955,0.0046234727525026175,0.0039236231368826,0.0033172027116335815,0.002793889298006829,0.0023441546907124458,0.0019592567387685038,0.0016312225241728966,0.0013528238148051044,0.001117546004793674,9.19551989127152E-4,7.536417215432946E-4,6.152093428245161E-4,5.001984137548996E-4,4.050564961655572E-4,3.2668991467101836E-4,2.624194497628111E-4,2.0993758316933692E-4,1.6726778883548098E-4,1.327262065856318E-4,1.0488617973776925E-4,8.254522524989327E-5,6.469534880271528E-5,5.049601961020743E-5,3.925003438232196E-5,3.038210104772249E-5,2.3419990368244333E-5,1.797807773534136E-5,1.374308120347048E-5,1.0461753149549356E-5,7.930580929271932E-6,5.9866093902168285E-6,4.500177004043878E-6,3.3685929034109956E-6,2.5109343910985945E-6],"r":null,"name":"versicolor","fill":"tozeroy","mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#D95F02"},"lon":null,"lat":null,"x":[1.3,1.31,1.32,1.33,1.34,1.35,1.36,1.37,1.3800000000000001,1.3900000000000001,1.4000000000000001,1.41,1.42,1.43,1.44,1.45,1.46,1.47,1.48,1.49,1.5,1.51,1.52,1.53,1.54,1.55,1.56,1.57,1.58,1.59,1.6,1.61,1.62,1.6300000000000001,1.6400000000000001,1.6500000000000001,1.6600000000000001,1.67,1.68,1.69,1.7,1.71,1.72,1.73,1.74,1.75,1.76,1.77,1.78,1.79,1.8,1.81,1.82,1.83,1.84,1.85,1.86,1.87,1.8800000000000001,1.8900000000000001,1.9000000000000001,1.9100000000000001,1.92,1.93,1.94,1.95,1.96,1.97,1.98,1.99,2.0,2.0100000000000002,2.02,2.0300000000000002,2.04,2.05,2.06,2.07,2.08,2.09,2.1,2.11,2.12,2.13,2.14,2.15,2.16,2.17,2.18,2.19,2.2,2.21,2.22,2.23,2.24,2.25,2.2600000000000002,2.27,2.2800000000000002,2.29,2.3000000000000003,2.31,2.32,2.33,2.34,2.35,2.36,2.37,2.38,2.39,2.4,2.41,2.42,2.43,2.44,2.45,2.46,2.47,2.48,2.49,2.5,2.5100000000000002,2.52,2.5300000000000002,2.54,2.5500000000000003,2.56,2.57,2.58,2.59,2.6,2.61,2.62,2.63,2.64,2.65,2.66,2.67,2.68,2.69,2.7,2.71,2.72,2.73,2.74,2.75,2.7600000000000002,2.77,2.7800000000000002,2.79,2.8000000000000003,2.81,2.82,2.83,2.84,2.85,2.86,2.87,2.88,2.89,2.9,2.91,2.92,2.93,2.94,2.95,2.96,2.97,2.98,2.99,3.0,3.0100000000000002,3.02,3.0300000000000002,3.04,3.0500000000000003,3.06,3.0700000000000003,3.08,3.09,3.1,3.11,3.12,3.13,3.14,3.15,3.16,3.17,3.18,3.19,3.2,3.21,3.22,3.23,3.24,3.25,3.2600000000000002,3.27,3.2800000000000002,3.29,3.3000000000000003,3.31,3.3200000000000003,3.33,3.34,3.35,3.36,3.37,3.38,3.39,3.4,3.41,3.42,3.43,3.44,3.45,3.46,3.47,3.48,3.49,3.5,3.5100000000000002,3.52,3.5300000000000002,3.54,3.5500000000000003,3.56,3.5700000000000003,3.58,3.59,3.6,3.61,3.62,3.63,3.64,3.65,3.66,3.67,3.68,3.69,3.7,3.71,3.72,3.73,3.74,3.75,3.7600000000000002,3.77,3.7800000000000002,3.79,3.8000000000000003,3.81,3.8200000000000003,3.83,3.84,3.85,3.86,3.87,3.88,3.89,3.9,3.91,3.92,3.93,3.94,3.95,3.96,3.97,3.98,3.99,4.0,4.01,4.0200000000000005,4.03,4.04,4.05,4.0600000000000005,4.07,4.08],"text":null},{"y":[1.2706916017088315E-8,1.8575434324370462E-8,2.7024869736711743E-8,3.9130379344311963E-8,5.638847194004695E-8,8.087092584688758E-8,1.1543043408902275E-7,1.6397365246208328E-7,2.3182146399441335E-7,3.2618129623998616E-7,4.567623579254758E-7,6.365718155187236E-7,8.829383103171451E-7,1.2188478466887288E-6,1.6745024051409045E-6,2.2895397381820073E-6,3.1155647029582576E-6,4.219408773281435E-6,5.687124459633205E-6,7.6288705518409414E-6,1.0184840458881106E-5,1.3532398853987707E-5,1.789460197882728E-5,2.3550292568969356E-5,3.0845898125652354E-5,4.020922614037796E-5,5.2165263436571486E-5,6.735420844547463E-5,8.655177812675336E-5,1.1069181463751236E-4,1.4089113059589313E-4,1.784764314774641E-4,2.2501303247279492E-4,2.823349741515083E-4,3.525757943189205E-4,4.3819955148499613E-4,5.420307040661597E-4,6.672820060701351E-4,8.175789627788264E-4,9.969793451358683E-4,0.0012099860903334169,0.0014615518028474408,0.0017570730119661185,0.0021023724219966515,0.0025036670579400943,0.002967521611564171,0.003500784738738143,0.004110508246527119,0.004803848680362557,0.005587951820308956,0.006469821354916737,0.0074561739013861116,0.00855328351395499,0.009766819844079911,0.011101685061925336,0.01256185577576462,0.014150236761767136,0.015868534243074685,0.01771715675839518,0.019695151858947393,0.021800186676771624,0.02402857983015548,0.02637539113623305,0.028834574278549952,0.03139919504283355,0.03406171736849642,0.03681435392931816,0.039649477837777426,0.04256008746990546,0.04554031380461055,0.04858595659697993,0.051695032931245936,0.05486831931356172,0.05810986664854991,0.06142746609556316,0.06483304396093638,0.06834296353030941,0.0719782140152357,0.07576446887450387,0.07973199938741862,0.0839154337231108,0.08835335691867234,0.09308775296554792,0.09816329643777966,0.10362650720741097,0.1095247887297468,0.11590537516550586,0.12281421877213056,0.13029485262432364,0.13838726687294503,0.14712683826016448,0.15654335254412918,0.1666601577298093,0.1774934825537511,0.18905194942793874,0.2013363047674942,0.21433938118645612,0.2280462976619695,0.24243489398201792,0.2574763861784358,0.27313622017616496,0.28937509213165574,0.3061500963193743,0.3234159553732172,0.3411262834670293,0.35923483119890237,0.37769666102695476,0.39646920510359873,0.41551316230185054,0.43479319851504583,0.45427842340214003,0.47394262729263575,0.4937642734531388,0.5137262527859352,0.5338154196734575,0.5540219384879841,0.5743384796644934,0.594759311655603,0.6152793401089822,0.6358931479045383,0.6565940890751455,0.6773734860795512,0.6982199735310097,0.7191190226028716,0.7400526693769754,0.7609994579481907,0.7819345958293946,0.8028303058652838,0.8236563462403566,0.8443806590205807,0.8649700987051747,0.8853911860865152,0.9056108297821331,0.9255969583970318,0.9453190104818354,0.9647482371446391,0.9838577830105152,1.002622524659604,1.021018660993132,1.0390230663169977,1.0566124333422473,1.073762248789643,1.0904456578812112,1.1066322848251178,1.1222870836191225,1.1373692968544338,1.1518315986916563,1.1656194926822179,1.1786710249065155,1.1909168590271109,1.2022807427725608,1.2126803760326939,1.222028670206519,1.2302353678423845,1.2372089721098842,1.2428589183575887,1.2470979059331369,1.2498442983858182,1.2510244947180986,1.2505751738173698,1.248445318613407,1.2445979356171868,1.239011398782932,1.2316803633462268,1.222616214493462,1.2118470363553542,1.199417107777781,1.1853859515053329,1.1698269817930427,1.1528258111497947,1.1344782892062615,1.114888355099374,1.0941657890189593,1.072423948652735,1.049777572402553,1.0263407238390856,1.0022249414896183,0.977537645412686,0.9523808378739617,0.9268501205949329,0.9010340362698166,0.8750137280434044,0.8488628980194828,0.8226480351097322,0.7964288739800233,0.770259040705287,0.7441868370649625,0.71825611413049,0.6925071867354503,0.6669777433119238,0.6417037100934816,0.6167200344586551,0.5920613588357557,0.5677625637351661,0.5438591657656306,0.5203875636122467,0.49738513163648324,0.47489016678568785,0.4529416997073436,0.4315791852398677,0.41084209073483796,0.3907694029365136,0.3713990754247873,0.3527674389713642,0.33490859664863454,0.3178538242714569,0.3016309948668414,0.2862640434910639,0.2717724859742267,0.2581710023859431,0.24546909261946598,0.23367080935562665,0.22277457019607952,0.21277304892014073,0.20365314369368254,0.1953960186146345,0.18797721400302148,0.18136682035830431,0.1755297108696907,0.17042582776474163,0.16601051828465915,0.16223491714680124,0.15904637295311413,0.1563889169570693,0.15420377310959843,0.15242990856447114,0.15100462367072223,0.14986417987408132,0.14894446286162777,0.14818167691503806,0.14751306414812196,0.1468776409389357,0.14621694083542183,0.1454757515489454,0.14460283150586467,0.14355158989006733,0.14228071309187018,0.1407547201395511,0.138944430079749,0.1368273258374,0.13438780016629506,0.13161727389006178,0.12851417826730943,0.12508379853794824,0.12133797963602017,0.11729469961792574,0.11297752076983245,0.10841493247703742,0.10363960355468117,0.0986875647365436,0.09359734402083757,0.08840907906655662,0.08316363086096437,0.07790172240408559,0.07266312455539527,0.0674859088635848,0.062405784202375886,0.05745553053248476,0.05266453921174557,0.048058465788433896,0.04365899571329595,0.03948372241333069,0.0355461308375739,0.03185567853765768,0.028417963281774244,0.02523496452674844,0.022305344918503674,0.019624797451959015,0.017186423941211205,0.014981131139322531,0.012998031414768182,0.011224836984818411,0.009648237499300967,0.008254253036677772,0.007028556208484054,0.005956758901782319,0.005024660908124215,0.004218459263343297,0.003524918488377592,0.0029315032759556926,0.0024264755491480413,0.001998959536299557,0.0016389779329907006,0.0013374631975826554,0.0010862478854538114,8.780379160509209E-4,7.0637249096378E-4,5.655741084518735E-4,4.5069176642251966E-4,3.574401515347305E-4,2.821369251204468E-4,2.216403149722409E-4,1.7328829889920314E-4,1.3484064932375351E-4,1.0442465869619515E-4,8.048509964407561E-5,6.173873117709864E-5,4.713346220375434E-5,3.581211816247753E-5,2.7080679652326465E-5,2.0380631342986518E-5,1.526525212388865E-5,1.1379374213504131E-5,8.442296920240215E-6,6.2334793388445544E-6,4.580658508702314E-6,3.3500604510744857E-6,2.4383978576569676E-6,1.766377653296373E-6,1.2734723193483707E-6,9.137393037992504E-7,6.525020141705578E-7,4.6373307687377984E-7,3.28005314056382E-7,2.3089801651023704E-7,1.6176552670077362E-7,1.1279195971942327E-7,7.827023673056149E-8,5.4055693124067565E-8],"r":null,"name":"virginica","fill":"tozeroy","mode":"lines","width":null,"type":"scatter","theta":null,"z":null,"line":{"color":"#7570B3"},"lon":null,"lat":null,"x":[1.4000000000000001,1.41,1.42,1.43,1.44,1.45,1.46,1.47,1.48,1.49,1.5,1.51,1.52,1.53,1.54,1.55,1.56,1.57,1.58,1.59,1.6,1.61,1.62,1.6300000000000001,1.6400000000000001,1.6500000000000001,1.6600000000000001,1.67,1.68,1.69,1.7,1.71,1.72,1.73,1.74,1.75,1.76,1.77,1.78,1.79,1.8,1.81,1.82,1.83,1.84,1.85,1.86,1.87,1.8800000000000001,1.8900000000000001,1.9000000000000001,1.9100000000000001,1.92,1.93,1.94,1.95,1.96,1.97,1.98,1.99,2.0,2.0100000000000002,2.02,2.0300000000000002,2.04,2.05,2.06,2.07,2.08,2.09,2.1,2.11,2.12,2.13,2.14,2.15,2.16,2.17,2.18,2.19,2.2,2.21,2.22,2.23,2.24,2.25,2.2600000000000002,2.27,2.2800000000000002,2.29,2.3000000000000003,2.31,2.32,2.33,2.34,2.35,2.36,2.37,2.38,2.39,2.4,2.41,2.42,2.43,2.44,2.45,2.46,2.47,2.48,2.49,2.5,2.5100000000000002,2.52,2.5300000000000002,2.54,2.5500000000000003,2.56,2.57,2.58,2.59,2.6,2.61,2.62,2.63,2.64,2.65,2.66,2.67,2.68,2.69,2.7,2.71,2.72,2.73,2.74,2.75,2.7600000000000002,2.77,2.7800000000000002,2.79,2.8000000000000003,2.81,2.82,2.83,2.84,2.85,2.86,2.87,2.88,2.89,2.9,2.91,2.92,2.93,2.94,2.95,2.96,2.97,2.98,2.99,3.0,3.0100000000000002,3.02,3.0300000000000002,3.04,3.0500000000000003,3.06,3.0700000000000003,3.08,3.09,3.1,3.11,3.12,3.13,3.14,3.15,3.16,3.17,3.18,3.19,3.2,3.21,3.22,3.23,3.24,3.25,3.2600000000000002,3.27,3.2800000000000002,3.29,3.3000000000000003,3.31,3.3200000000000003,3.33,3.34,3.35,3.36,3.37,3.38,3.39,3.4,3.41,3.42,3.43,3.44,3.45,3.46,3.47,3.48,3.49,3.5,3.5100000000000002,3.52,3.5300000000000002,3.54,3.5500000000000003,3.56,3.5700000000000003,3.58,3.59,3.6,3.61,3.62,3.63,3.64,3.65,3.66,3.67,3.68,3.69,3.7,3.71,3.72,3.73,3.74,3.75,3.7600000000000002,3.77,3.7800000000000002,3.79,3.8000000000000003,3.81,3.8200000000000003,3.83,3.84,3.85,3.86,3.87,3.88,3.89,3.9,3.91,3.92,3.93,3.94,3.95,3.96,3.97,3.98,3.99,4.0,4.01,4.0200000000000005,4.03,4.04,4.05,4.0600000000000005,4.07,4.08,4.09,4.1,4.11,4.12,4.13,4.14,4.15,4.16,4.17,4.18,4.19,4.2,4.21,4.22,4.23,4.24,4.25,4.26,4.2700000000000005,4.28,4.29,4.3,4.3100000000000005,4.32,4.33,4.34,4.3500000000000005,4.36,4.37,4.38,4.39,4.4,4.41,4.42,4.43,4.44,4.45,4.46,4.47,4.48,4.49,4.5,4.51,4.5200000000000005,4.53,4.54,4.55,4.5600000000000005,4.57,4.58],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"density","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="coordinates" class="level2" data-number="2.18">
<h2 data-number="2.18" class="anchored" data-anchor-id="coordinates"><span class="header-section-number">2.18</span> Coordinates</h2>
<p>(WIP)</p>
<section id="geo" class="level3" data-number="2.18.1">
<h3 data-number="2.18.1" class="anchored" data-anchor-id="geo"><span class="header-section-number">2.18.1</span> geo</h3>
<p>Inspired by Plotlyâ€™s tutorial for <a href="https://plotly.com/javascript/scatter-plots-on-maps/">Scatter Plots on Maps in JavaScript</a>:</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb55"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> {<span class="at">:lat</span> [<span class="fl">45.5</span>, <span class="fl">43.4</span>, <span class="fl">49.13</span>, <span class="fl">51.1</span>, <span class="fl">53.34</span>, <span class="fl">45.24</span>,</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>           <span class="fl">44.64</span>, <span class="fl">48.25</span>, <span class="fl">49.89</span>, <span class="fl">50.45</span>]</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">:lon</span> [-<span class="fl">73.57</span>, -<span class="fl">79.24</span>, -<span class="fl">123.06</span>, -<span class="fl">114.1</span>, -<span class="fl">113.28</span>,</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>           -<span class="fl">75.43</span>, -<span class="fl">63.57</span>, -<span class="fl">123.21</span>, -<span class="fl">97.13</span>, -<span class="fl">104.6</span>]</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">:text</span> [<span class="st">"Montreal"</span>, <span class="st">"Toronto"</span>, <span class="st">"Vancouver"</span>, <span class="st">"Calgary"</span>, <span class="st">"Edmonton"</span>,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Ottawa"</span>, <span class="st">"Halifax"</span>, <span class="st">"Victoria"</span>, <span class="st">"Winnepeg"</span>, <span class="st">"Regina"</span>],}</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    tc/dataset</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    (plotly/base {:=coordinates <span class="at">:geo</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>                  :=lat <span class="at">:lat</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>                  :=lon <span class="at">:lon</span>})</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=mark-opacity <span class="fl">0.8</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>                         :=mark-color [<span class="st">"#bebada"</span>, <span class="st">"#fdb462"</span>, <span class="st">"#fb8072"</span>, <span class="st">"#d9d9d9"</span>, <span class="st">"#bc80bd"</span>,</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"#b3de69"</span>, <span class="st">"#8dd3c7"</span>, <span class="st">"#80b1d3"</span>, <span class="st">"#fccde5"</span>, <span class="st">"#ffffb3"</span>]</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>                         :=mark-size <span class="dv">20</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>                         :=name <span class="st">"Canadian cities"</span>})</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-text {:=text <span class="at">:text</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>                        :=textfont {<span class="at">:size</span> <span class="dv">7</span></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">:color</span> <span class="at">:purple</span>}})</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>    plotly/plot</span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc-in</span> [<span class="at">:layout</span> <span class="at">:geo</span>]</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>              {<span class="at">:scope</span> <span class="st">"north america"</span></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">:resolution</span> <span class="dv">10</span></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">:lonaxis</span> {<span class="at">:range</span> [-<span class="dv">130</span> -<span class="dv">55</span>]}</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">:lataxis</span> {<span class="at">:range</span> [<span class="dv">40</span> <span class="dv">60</span>]}</span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">:countrywidth</span> <span class="fl">1.5</span></span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>               <span class="at">:showland</span> <span class="va">true</span></span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>               <span class="at">:showlakes</span> <span class="va">true</span></span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>               <span class="at">:showrivers</span> <span class="va">true</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"r":null,"name":"Canadian cities","marker":{"color":["#bebada","#fdb462","#fb8072","#d9d9d9","#bc80bd","#b3de69","#8dd3c7","#80b1d3","#fccde5","#ffffb3"],"size":20},"fill":null,"mode":"markers","width":null,"type":"scattergeo","theta":null,"z":null,"opacity":0.8,"lon":[-73.57,-79.24,-123.06,-114.1,-113.28,-75.43,-63.57,-123.21,-97.13,-104.6],"lat":[45.5,43.4,49.13,51.1,53.34,45.24,44.64,48.25,49.89,50.45],"text":null},{"r":null,"name":"","fill":null,"mode":"text","width":null,"type":"scattergeo","theta":null,"textfont":{"size":7,"color":"purple"},"z":null,"lon":[-73.57,-79.24,-123.06,-114.1,-113.28,-75.43,-63.57,-123.21,-97.13,-104.6],"lat":[45.5,43.4,49.13,51.1,53.34,45.24,44.64,48.25,49.89,50.45],"text":["Montreal","Toronto","Vancouver","Calgary","Edmonton","Ottawa","Halifax","Victoria","Winnepeg","Regina"]}], {"plot_bgcolor":"rgb(235,235,235)","geo":{"scope":"north america","resolution":10,"lonaxis":{"range":[-130,-55]},"lataxis":{"range":[40,60]},"countrywidth":1.5,"showland":true,"showlakes":true,"showrivers":true},"width":500,"automargin":false,"xaxis":{"gridcolor":"rgb(255,255,255)","title":"x","showgrid":true},"title":null,"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y","showgrid":true},"height":400,"margin":{"t":25}}, {});</script></div>
</section>
<section id="d" class="level3" data-number="2.18.2">
<h3 data-number="2.18.2" class="anchored" data-anchor-id="d"><span class="header-section-number">2.18.2</span> 3d</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb56"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=x <span class="at">:sepal-width</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:sepal-length</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>                         :=z <span class="at">:petal-length</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>                         :=color <span class="at">:petal-width</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>                         :=coordinates <span class="at">:3d</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0,7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7,6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"","marker":{"color":[0.2,0.2,0.2,0.2,0.2,0.4,0.3,0.2,0.2,0.1,0.2,0.2,0.1,0.1,0.2,0.4,0.4,0.3,0.3,0.3,0.2,0.4,0.2,0.5,0.2,0.2,0.4,0.2,0.2,0.2,0.2,0.4,0.1,0.2,0.2,0.2,0.2,0.1,0.2,0.2,0.3,0.3,0.2,0.6,0.4,0.3,0.2,0.2,0.2,0.2,1.4,1.5,1.5,1.3,1.5,1.3,1.6,1.0,1.3,1.4,1.0,1.5,1.0,1.4,1.3,1.4,1.5,1.0,1.5,1.1,1.8,1.3,1.5,1.2,1.3,1.4,1.4,1.7,1.5,1.0,1.1,1.0,1.2,1.6,1.5,1.6,1.5,1.3,1.3,1.3,1.2,1.4,1.2,1.0,1.3,1.2,1.3,1.3,1.1,1.3,2.5,1.9,2.1,1.8,2.2,2.1,1.7,1.8,1.8,2.5,2.0,1.9,2.1,2.0,2.4,2.3,1.8,2.2,2.3,1.5,2.3,2.0,2.0,1.8,2.1,1.8,1.8,1.8,2.1,1.6,1.9,2.0,2.2,1.5,1.4,2.3,2.4,1.8,1.8,2.1,2.4,2.3,1.9,2.3,2.5,2.3,1.9,2.0,2.3,1.8]},"fill":null,"mode":"markers","width":null,"type":"scatter3d","theta":null,"z":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1.0,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4,4.7,4.5,4.9,4.0,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4.0,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4.0,4.9,4.7,4.3,4.4,4.8,5.0,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4.0,4.4,4.6,4.0,3.3,4.2,4.2,4.2,4.3,3.0,4.1,6.0,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5.0,5.1,5.3,5.5,6.7,6.9,5.0,5.7,4.9,6.7,4.9,5.7,6.0,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5.0,5.2,5.4,5.1],"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3,3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8,3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
<div class="sourceClojure">
<div class="sourceCode" id="cb57"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-point {:=x <span class="at">:sepal-width</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>                         :=y <span class="at">:sepal-length</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>                         :=z <span class="at">:petal-length</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>                         :=color <span class="at">:species</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>                         :=coordinates <span class="at">:3d</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"y":[5.1,4.9,4.7,4.6,5.0,5.4,4.6,5.0,4.4,4.9,5.4,4.8,4.8,4.3,5.8,5.7,5.4,5.1,5.7,5.1,5.4,5.1,4.6,5.1,4.8,5.0,5.0,5.2,5.2,4.7,4.8,5.4,5.2,5.5,4.9,5.0,5.5,4.9,4.4,5.1,5.0,4.5,4.4,5.0,5.1,4.8,5.1,4.6,5.3,5.0],"r":null,"name":"setosa","marker":{"color":"#1B9E77"},"fill":null,"mode":"markers","width":null,"type":"scatter3d","theta":null,"z":[1.4,1.4,1.3,1.5,1.4,1.7,1.4,1.5,1.4,1.5,1.5,1.6,1.4,1.1,1.2,1.5,1.3,1.4,1.7,1.5,1.7,1.5,1.0,1.7,1.9,1.6,1.6,1.5,1.4,1.6,1.6,1.5,1.5,1.4,1.5,1.2,1.3,1.4,1.3,1.5,1.3,1.3,1.3,1.6,1.9,1.4,1.6,1.4,1.5,1.4],"lon":null,"lat":null,"x":[3.5,3.0,3.2,3.1,3.6,3.9,3.4,3.4,2.9,3.1,3.7,3.4,3.0,3.0,4.0,4.4,3.9,3.5,3.8,3.8,3.4,3.7,3.6,3.3,3.4,3.0,3.4,3.5,3.4,3.2,3.1,3.4,4.1,4.2,3.1,3.2,3.5,3.6,3.0,3.4,3.5,2.3,3.2,3.5,3.8,3.0,3.8,3.2,3.7,3.3],"text":null},{"y":[7.0,6.4,6.9,5.5,6.5,5.7,6.3,4.9,6.6,5.2,5.0,5.9,6.0,6.1,5.6,6.7,5.6,5.8,6.2,5.6,5.9,6.1,6.3,6.1,6.4,6.6,6.8,6.7,6.0,5.7,5.5,5.5,5.8,6.0,5.4,6.0,6.7,6.3,5.6,5.5,5.5,6.1,5.8,5.0,5.6,5.7,5.7,6.2,5.1,5.7],"r":null,"name":"versicolor","marker":{"color":"#D95F02"},"fill":null,"mode":"markers","width":null,"type":"scatter3d","theta":null,"z":[4.7,4.5,4.9,4.0,4.6,4.5,4.7,3.3,4.6,3.9,3.5,4.2,4.0,4.7,3.6,4.4,4.5,4.1,4.5,3.9,4.8,4.0,4.9,4.7,4.3,4.4,4.8,5.0,4.5,3.5,3.8,3.7,3.9,5.1,4.5,4.5,4.7,4.4,4.1,4.0,4.4,4.6,4.0,3.3,4.2,4.2,4.2,4.3,3.0,4.1],"lon":null,"lat":null,"x":[3.2,3.2,3.1,2.3,2.8,2.8,3.3,2.4,2.9,2.7,2.0,3.0,2.2,2.9,2.9,3.1,3.0,2.7,2.2,2.5,3.2,2.8,2.5,2.8,2.9,3.0,2.8,3.0,2.9,2.6,2.4,2.4,2.7,2.7,3.0,3.4,3.1,2.3,3.0,2.5,2.6,3.0,2.6,2.3,2.7,3.0,2.9,2.9,2.5,2.8],"text":null},{"y":[6.3,5.8,7.1,6.3,6.5,7.6,4.9,7.3,6.7,7.2,6.5,6.4,6.8,5.7,5.8,6.4,6.5,7.7,7.7,6.0,6.9,5.6,7.7,6.3,6.7,7.2,6.2,6.1,6.4,7.2,7.4,7.9,6.4,6.3,6.1,7.7,6.3,6.4,6.0,6.9,6.7,6.9,5.8,6.8,6.7,6.7,6.3,6.5,6.2,5.9],"r":null,"name":"virginica","marker":{"color":"#7570B3"},"fill":null,"mode":"markers","width":null,"type":"scatter3d","theta":null,"z":[6.0,5.1,5.9,5.6,5.8,6.6,4.5,6.3,5.8,6.1,5.1,5.3,5.5,5.0,5.1,5.3,5.5,6.7,6.9,5.0,5.7,4.9,6.7,4.9,5.7,6.0,4.8,4.9,5.6,5.8,6.1,6.4,5.6,5.1,5.6,6.1,5.6,5.5,4.8,5.4,5.6,5.1,5.1,5.9,5.7,5.2,5.0,5.2,5.4,5.1],"lon":null,"lat":null,"x":[3.3,2.7,3.0,2.9,3.0,3.0,2.5,2.9,2.5,3.6,3.2,2.7,3.0,2.5,2.8,3.2,3.0,3.8,2.6,2.2,3.2,2.8,2.8,2.7,3.3,3.2,2.8,3.0,2.8,3.0,2.8,3.8,2.8,2.8,2.6,3.0,3.4,3.1,3.0,3.1,3.1,3.1,2.7,3.2,3.3,3.0,2.5,3.0,3.4,3.0],"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-width","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"sepal-length","showgrid":true},"title":null}, {});</script></div>
</section>
<section id="polar" class="level3" data-number="2.18.3">
<h3 data-number="2.18.3" class="anchored" data-anchor-id="polar"><span class="header-section-number">2.18.3</span> polar</h3>
<p>Monthly rain amounts - polar bar-chart</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb58"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> rain-data</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>(tc/dataset</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a> {<span class="at">:month</span> [<span class="at">:Jan</span> <span class="at">:Feb</span> <span class="at">:Mar</span> <span class="at">:Apr</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">:May</span> <span class="at">:Jun</span> <span class="at">:Jul</span> <span class="at">:Aug</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">:Sep</span> <span class="at">:Oct</span> <span class="at">:Nov</span> <span class="at">:Dec</span>]</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">:rain</span> (<span class="kw">repeatedly</span> #(<span class="kw">rand-int</span> <span class="dv">200</span>))}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb59"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> rain-data</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>(plotly/layer-bar</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>     {:=r <span class="at">:rain</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>      :=theta <span class="at">:month</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>      :=coordinates <span class="at">:polar</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.6</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"r":[124,62,186,179,98,173,26,195,180,8,52,93],"name":"","marker":{"size":20},"fill":null,"mode":null,"width":null,"type":"barpolar","theta":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"z":null,"opacity":0.6,"lon":null,"lat":null,"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y","showgrid":true},"title":null}, {});</script></div>
<p>Controlling the polar layout (by manipulating the raw Plotly.js spec):</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb60"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> rain-data</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    (plotly/base</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>     {})</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    (plotly/layer-bar</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>     {:=r <span class="at">:rain</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>      :=theta <span class="at">:month</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>      :=coordinates <span class="at">:polar</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>      :=mark-size <span class="dv">20</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>      :=mark-opacity <span class="fl">0.6</span>})</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    plotly/plot</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">assoc-in</span> [<span class="at">:layout</span> <span class="at">:polar</span>]</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>              {<span class="at">:angularaxis</span> {<span class="at">:tickfont</span> {<span class="at">:size</span> <span class="dv">16</span>}</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">:rotation</span> <span class="dv">90</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>                             <span class="at">:direction</span> <span class="st">"counterclockwise"</span>}</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">:sector</span> [<span class="dv">0</span> <span class="dv">180</span>]}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"r":[124,62,186,179,98,173,26,195,180,8,52,93],"name":"","marker":{"size":20},"fill":null,"mode":null,"width":null,"type":"barpolar","theta":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"z":null,"opacity":0.6,"lon":null,"lat":null,"text":null}], {"polar":{"angularaxis":{"tickfont":{"size":16},"rotation":90,"direction":"counterclockwise"},"sector":[0,180]},"plot_bgcolor":"rgb(235,235,235)","width":500,"automargin":false,"xaxis":{"gridcolor":"rgb(255,255,255)","title":"x","showgrid":true},"title":null,"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y","showgrid":true},"height":400,"margin":{"t":25}}, {});</script></div>
<p>A polar random walk - polar line-chart</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb61"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [n <span class="dv">50</span>]</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> {<span class="at">:r</span> (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> n #(<span class="kw">-</span> (<span class="kw">rand</span>) <span class="fl">0.5</span>))</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>               (reductions <span class="kw">+</span>))</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">:theta</span> (<span class="kw">-&gt;&gt;</span> (<span class="kw">repeatedly</span> n #(<span class="kw">*</span> <span class="dv">10</span> (<span class="kw">rand</span>)))</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>                   (reductions <span class="kw">+</span>)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>                   (<span class="kw">map</span> #(<span class="kw">rem</span> <span class="va">%</span> <span class="dv">360</span>)))</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">:color</span> (<span class="kw">range</span> n)}</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>      tc/dataset</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>      (plotly/layer-point</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>       {:=r <span class="at">:r</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>        :=theta <span class="at">:theta</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>        :=coordinates <span class="at">:polar</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>        :=mark-size <span class="dv">10</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>        :=mark-opacity <span class="fl">0.6</span>})</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>      (plotly/layer-line</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>       {:=r <span class="at">:r</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>        :=theta <span class="at">:theta</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>        :=coordinates <span class="at">:polar</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>        :=mark-size <span class="dv">3</span></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>        :=mark-opacity <span class="fl">0.6</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:auto;width:100%;"><script>Plotly.newPlot(document.currentScript.parentElement,
               [{"r":[-0.2721653462713044,-0.517999839144173,-0.19867514639862405,-0.4984791862697384,-0.424462089642463,0.02886343483125864,-0.12392192131401181,0.15502154393070977,-0.0761624262000602,0.35976918894986487,0.5611441664906137,0.5662741643428416,0.9858927488437768,1.1073488541154695,1.570740057366512,1.5449687170873259,1.615083891558799,1.7168778709139265,1.9170910751841097,1.697843145352057,1.5828921846763688,1.2281049907871937,0.8020310430472429,0.31630582369286253,0.6796429513984048,0.8173930500939358,0.9487884328902906,0.7570968369281561,0.9630335776118556,1.1325335383063213,1.0777965161804006,1.387462668416174,1.3942797215643408,1.2164707608176117,1.1441457782195932,1.2164648489554066,1.3317364590764114,1.5641993916766839,1.1338922531274838,0.9965224570937662,1.291163273481987,0.9175469940887025,0.5821503853445837,0.2043812907103204,0.5950351251354985,1.079093746505413,1.5356611830938716,1.0709548858092282,1.466807570344501,1.5134786368177826],"name":"","marker":{"size":10},"fill":null,"mode":"markers","width":null,"type":"scatterpolar","theta":[7.02863134978152,10.23062778471936,12.669521859493539,22.16264439433897,24.28748225983235,34.152667753689634,40.89184794946604,48.942485277341305,51.56989651598928,61.008997754492334,68.17817491301618,72.20703811302928,81.50408807760965,83.97787932832746,90.51243772647231,92.06325535548068,93.70170434987114,99.76889680265647,102.85957764933295,111.33867208536378,120.13153259004389,124.5560201682704,128.95265693840557,134.662418100866,137.80698963975706,141.20151600944672,150.6934028252074,157.29807991019686,163.03577478872842,169.33872283941184,171.91108331693462,177.15302016518143,180.2348931897543,185.76624737701587,186.62432679226745,194.63915194350014,202.38334666055079,206.73217719172882,211.71040631520475,215.92598431806107,219.370165278311,228.79231903597142,236.83694745587107,238.04788772896285,245.3404109116126,246.77337408023604,256.56301492953367,262.91273562252445,265.71332948246896,275.5079653820574],"z":null,"opacity":0.6,"lon":null,"lat":null,"text":null},{"r":[-0.2721653462713044,-0.517999839144173,-0.19867514639862405,-0.4984791862697384,-0.424462089642463,0.02886343483125864,-0.12392192131401181,0.15502154393070977,-0.0761624262000602,0.35976918894986487,0.5611441664906137,0.5662741643428416,0.9858927488437768,1.1073488541154695,1.570740057366512,1.5449687170873259,1.615083891558799,1.7168778709139265,1.9170910751841097,1.697843145352057,1.5828921846763688,1.2281049907871937,0.8020310430472429,0.31630582369286253,0.6796429513984048,0.8173930500939358,0.9487884328902906,0.7570968369281561,0.9630335776118556,1.1325335383063213,1.0777965161804006,1.387462668416174,1.3942797215643408,1.2164707608176117,1.1441457782195932,1.2164648489554066,1.3317364590764114,1.5641993916766839,1.1338922531274838,0.9965224570937662,1.291163273481987,0.9175469940887025,0.5821503853445837,0.2043812907103204,0.5950351251354985,1.079093746505413,1.5356611830938716,1.0709548858092282,1.466807570344501,1.5134786368177826],"name":"","fill":null,"mode":"lines","width":null,"type":"scatterpolar","theta":[7.02863134978152,10.23062778471936,12.669521859493539,22.16264439433897,24.28748225983235,34.152667753689634,40.89184794946604,48.942485277341305,51.56989651598928,61.008997754492334,68.17817491301618,72.20703811302928,81.50408807760965,83.97787932832746,90.51243772647231,92.06325535548068,93.70170434987114,99.76889680265647,102.85957764933295,111.33867208536378,120.13153259004389,124.5560201682704,128.95265693840557,134.662418100866,137.80698963975706,141.20151600944672,150.6934028252074,157.29807991019686,163.03577478872842,169.33872283941184,171.91108331693462,177.15302016518143,180.2348931897543,185.76624737701587,186.62432679226745,194.63915194350014,202.38334666055079,206.73217719172882,211.71040631520475,215.92598431806107,219.370165278311,228.79231903597142,236.83694745587107,238.04788772896285,245.3404109116126,246.77337408023604,256.56301492953367,262.91273562252445,265.71332948246896,275.5079653820574],"z":null,"line":{"width":3},"opacity":0.6,"lon":null,"lat":null,"text":null}], {"width":500,"height":400,"margin":{"t":25},"automargin":false,"plot_bgcolor":"rgb(235,235,235)","xaxis":{"gridcolor":"rgb(255,255,255)","title":"x","showgrid":true},"yaxis":{"gridcolor":"rgb(255,255,255)","title":"y","showgrid":true},"title":null}, {});</script></div>
</section>
</section>
<section id="debugging-wip" class="level2" data-number="2.19">
<h2 data-number="2.19" class="anchored" data-anchor-id="debugging-wip"><span class="header-section-number">2.19</span> Debugging (WIP)</h2>
<section id="viewing-the-computational-dag-of-substitution-keys" class="level3" data-number="2.19.1">
<h3 data-number="2.19.1" class="anchored" data-anchor-id="viewing-the-computational-dag-of-substitution-keys"><span class="header-section-number">2.19.1</span> Viewing the computational dag of substitution keys:</h3>
<div class="sourceClojure">
<div class="sourceCode" id="cb62"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> example-to-debug</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">-&gt;</span> (rdatasets/datasets-iris)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>      (tc/random <span class="dv">10</span> {<span class="at">:seed</span> <span class="dv">1</span>})</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>      (plotly/layer-point {:=x <span class="at">:sepal-width</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>                           :=y <span class="at">:sepal-length</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>                           :=color <span class="at">:species</span>})))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceClojure">
<div class="sourceCode" id="cb63"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example-to-debug</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    plotly/dag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="height:400px;width:100%;"><script>
{
  value = {"elements":{"nodes":[{"data":{"id":"=y"}},{"data":{"id":"=y-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=y-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=splom-traces"}},{"data":{"id":"=colnames"}},{"data":{"id":"=splom-traces"}},{"data":{"id":"=color"}},{"data":{"id":"=splom-traces"}},{"data":{"id":"=color-type"}},{"data":{"id":"=splom-traces"}},{"data":{"id":"=symbol"}},{"data":{"id":"=splom-traces"}},{"data":{"id":"=splom-colnames"}},{"data":{"id":"=splom-traces"}},{"data":{"id":"=z"}},{"data":{"id":"=z-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=z-type"}},{"data":{"id":"=y-after-stat"}},{"data":{"id":"=y-type-after-stat"}},{"data":{"id":"=y"}},{"data":{"id":"=y-type-after-stat"}},{"data":{"id":"=y-type"}},{"data":{"id":"=y-type-after-stat"}},{"data":{"id":"=stat"}},{"data":{"id":"=y-type-after-stat"}},{"data":{"id":"=color"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=color-type"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=size"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=size-type"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=symbol"}},{"data":{"id":"=inferred-group"}},{"data":{"id":"=mark"}},{"data":{"id":"=mode"}},{"data":{"id":"=layout"}},{"data":{"id":"=splom-layout"}},{"data":{"id":"=colnames"}},{"data":{"id":"=splom-layout"}},{"data":{"id":"=z-after-stat"}},{"data":{"id":"=z-type-after-stat"}},{"data":{"id":"=z"}},{"data":{"id":"=z-type-after-stat"}},{"data":{"id":"=z-type"}},{"data":{"id":"=z-type-after-stat"}},{"data":{"id":"=stat"}},{"data":{"id":"=z-type-after-stat"}},{"data":{"id":"=predictors"}},{"data":{"id":"=design-matrix"}},{"data":{"id":"=size"}},{"data":{"id":"=size-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=size-type"}},{"data":{"id":"=mark"}},{"data":{"id":"=type"}},{"data":{"id":"=coordinates"}},{"data":{"id":"=type"}},{"data":{"id":"=x-after-stat"}},{"data":{"id":"=x-type-after-stat"}},{"data":{"id":"=x"}},{"data":{"id":"=x-type-after-stat"}},{"data":{"id":"=x-type"}},{"data":{"id":"=x-type-after-stat"}},{"data":{"id":"=stat"}},{"data":{"id":"=x-type-after-stat"}},{"data":{"id":"=layers"}},{"data":{"id":"=traces"}},{"data":{"id":"=x"}},{"data":{"id":"=x-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=x-type"}},{"data":{"id":"=color"}},{"data":{"id":"=color-type"}},{"data":{"id":"=dataset"}},{"data":{"id":"=color-type"}},{"data":{"id":"=width"}},{"data":{"id":"=layout"}},{"data":{"id":"=height"}},{"data":{"id":"=layout"}},{"data":{"id":"=margin"}},{"data":{"id":"=layout"}},{"data":{"id":"=automargin"}},{"data":{"id":"=layout"}},{"data":{"id":"=background"}},{"data":{"id":"=layout"}},{"data":{"id":"=title"}},{"data":{"id":"=layout"}},{"data":{"id":"=xaxis-gridcolor"}},{"data":{"id":"=layout"}},{"data":{"id":"=yaxis-gridcolor"}},{"data":{"id":"=layout"}},{"data":{"id":"=x-after-stat"}},{"data":{"id":"=layout"}},{"data":{"id":"=y-after-stat"}},{"data":{"id":"=layout"}},{"data":{"id":"=x-title"}},{"data":{"id":"=layout"}},{"data":{"id":"=y-title"}},{"data":{"id":"=layout"}},{"data":{"id":"=x-showgrid"}},{"data":{"id":"=layout"}},{"data":{"id":"=y-showgrid"}},{"data":{"id":"=layout"}},{"data":{"id":"=boxmode"}},{"data":{"id":"=layout"}},{"data":{"id":"=violinmode"}},{"data":{"id":"=layout"}},{"data":{"id":"=annotations"}},{"data":{"id":"=layout"}},{"data":{"id":"=layers"}},{"data":{"id":"=layout"}},{"data":{"id":"=mode"}},{"data":{"id":"=marker-size-key"}},{"data":{"id":"=type"}},{"data":{"id":"=marker-size-key"}}],"edges":[{"data":{"id":":=y:=y-type","source":"=y","target":"=y-type"}},{"data":{"id":":=dataset:=y-type","source":"=dataset","target":"=y-type"}},{"data":{"id":":=dataset:=splom-traces","source":"=dataset","target":"=splom-traces"}},{"data":{"id":":=colnames:=splom-traces","source":"=colnames","target":"=splom-traces"}},{"data":{"id":":=color:=splom-traces","source":"=color","target":"=splom-traces"}},{"data":{"id":":=color-type:=splom-traces","source":"=color-type","target":"=splom-traces"}},{"data":{"id":":=symbol:=splom-traces","source":"=symbol","target":"=splom-traces"}},{"data":{"id":":=splom-colnames:=splom-traces","source":"=splom-colnames","target":"=splom-traces"}},{"data":{"id":":=z:=z-type","source":"=z","target":"=z-type"}},{"data":{"id":":=dataset:=z-type","source":"=dataset","target":"=z-type"}},{"data":{"id":":=y-after-stat:=y-type-after-stat","source":"=y-after-stat","target":"=y-type-after-stat"}},{"data":{"id":":=y:=y-type-after-stat","source":"=y","target":"=y-type-after-stat"}},{"data":{"id":":=y-type:=y-type-after-stat","source":"=y-type","target":"=y-type-after-stat"}},{"data":{"id":":=stat:=y-type-after-stat","source":"=stat","target":"=y-type-after-stat"}},{"data":{"id":":=color:=inferred-group","source":"=color","target":"=inferred-group"}},{"data":{"id":":=color-type:=inferred-group","source":"=color-type","target":"=inferred-group"}},{"data":{"id":":=size:=inferred-group","source":"=size","target":"=inferred-group"}},{"data":{"id":":=size-type:=inferred-group","source":"=size-type","target":"=inferred-group"}},{"data":{"id":":=symbol:=inferred-group","source":"=symbol","target":"=inferred-group"}},{"data":{"id":":=mark:=mode","source":"=mark","target":"=mode"}},{"data":{"id":":=layout:=splom-layout","source":"=layout","target":"=splom-layout"}},{"data":{"id":":=colnames:=splom-layout","source":"=colnames","target":"=splom-layout"}},{"data":{"id":":=z-after-stat:=z-type-after-stat","source":"=z-after-stat","target":"=z-type-after-stat"}},{"data":{"id":":=z:=z-type-after-stat","source":"=z","target":"=z-type-after-stat"}},{"data":{"id":":=z-type:=z-type-after-stat","source":"=z-type","target":"=z-type-after-stat"}},{"data":{"id":":=stat:=z-type-after-stat","source":"=stat","target":"=z-type-after-stat"}},{"data":{"id":":=predictors:=design-matrix","source":"=predictors","target":"=design-matrix"}},{"data":{"id":":=size:=size-type","source":"=size","target":"=size-type"}},{"data":{"id":":=dataset:=size-type","source":"=dataset","target":"=size-type"}},{"data":{"id":":=mark:=type","source":"=mark","target":"=type"}},{"data":{"id":":=coordinates:=type","source":"=coordinates","target":"=type"}},{"data":{"id":":=x-after-stat:=x-type-after-stat","source":"=x-after-stat","target":"=x-type-after-stat"}},{"data":{"id":":=x:=x-type-after-stat","source":"=x","target":"=x-type-after-stat"}},{"data":{"id":":=x-type:=x-type-after-stat","source":"=x-type","target":"=x-type-after-stat"}},{"data":{"id":":=stat:=x-type-after-stat","source":"=stat","target":"=x-type-after-stat"}},{"data":{"id":":=layers:=traces","source":"=layers","target":"=traces"}},{"data":{"id":":=x:=x-type","source":"=x","target":"=x-type"}},{"data":{"id":":=dataset:=x-type","source":"=dataset","target":"=x-type"}},{"data":{"id":":=color:=color-type","source":"=color","target":"=color-type"}},{"data":{"id":":=dataset:=color-type","source":"=dataset","target":"=color-type"}},{"data":{"id":":=width:=layout","source":"=width","target":"=layout"}},{"data":{"id":":=height:=layout","source":"=height","target":"=layout"}},{"data":{"id":":=margin:=layout","source":"=margin","target":"=layout"}},{"data":{"id":":=automargin:=layout","source":"=automargin","target":"=layout"}},{"data":{"id":":=background:=layout","source":"=background","target":"=layout"}},{"data":{"id":":=title:=layout","source":"=title","target":"=layout"}},{"data":{"id":":=xaxis-gridcolor:=layout","source":"=xaxis-gridcolor","target":"=layout"}},{"data":{"id":":=yaxis-gridcolor:=layout","source":"=yaxis-gridcolor","target":"=layout"}},{"data":{"id":":=x-after-stat:=layout","source":"=x-after-stat","target":"=layout"}},{"data":{"id":":=y-after-stat:=layout","source":"=y-after-stat","target":"=layout"}},{"data":{"id":":=x-title:=layout","source":"=x-title","target":"=layout"}},{"data":{"id":":=y-title:=layout","source":"=y-title","target":"=layout"}},{"data":{"id":":=x-showgrid:=layout","source":"=x-showgrid","target":"=layout"}},{"data":{"id":":=y-showgrid:=layout","source":"=y-showgrid","target":"=layout"}},{"data":{"id":":=boxmode:=layout","source":"=boxmode","target":"=layout"}},{"data":{"id":":=violinmode:=layout","source":"=violinmode","target":"=layout"}},{"data":{"id":":=annotations:=layout","source":"=annotations","target":"=layout"}},{"data":{"id":":=layers:=layout","source":"=layers","target":"=layout"}},{"data":{"id":":=mode:=marker-size-key","source":"=mode","target":"=marker-size-key"}},{"data":{"id":":=type:=marker-size-key","source":"=type","target":"=marker-size-key"}}]},"style":[{"selector":"node","css":{"content":"data(id)","text-valign":"center","text-halign":"center"}},{"selector":"parent","css":{"text-valign":"top","text-halign":"center"}},{"selector":"edge","css":{"curve-style":"bezier","target-arrow-shape":"triangle"}}],"layout":{"name":"breadthfirst","padding":5}};
  value['container'] = document.currentScript.parentElement;
  cytoscape(value);
};</script></div>
</section>
<section id="viewing-intermediate-values-in-the-computational-dag" class="level3" data-number="2.19.2">
<h3 data-number="2.19.2" class="anchored" data-anchor-id="viewing-intermediate-values-in-the-computational-dag"><span class="header-section-number">2.19.2</span> Viewing intermediate values in the computational dag:</h3>
<p>Layers (tableplotâ€™s intermediate data representation)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb64"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example-to-debug</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    (plotly/debug :=layers)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb65"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>[{<span class="at">:y</span> <span class="at">:sepal-length</span>,</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">:trace-base</span> {<span class="at">:mode</span> <span class="at">:markers</span>, <span class="at">:type</span> <span class="st">"scatter"</span>},</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:color-type</span> <span class="at">:nominal</span>,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:coordinates</span> <span class="at">:2d</span>,</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">:group</span> (<span class="at">:species</span>),</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">:color</span> <span class="at">:species</span>,</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">:mark</span> <span class="at">:point</span>,</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">:size-range</span> [<span class="dv">10</span> <span class="dv">30</span>],</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">:z</span> <span class="at">:z</span>,</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">:inferred-group</span> (<span class="at">:species</span>),</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> <span class="at">:sepal-width</span>,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">:dataset</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>  https<span class="at">://vincentarelbundock.github.io/Rdatasets/csv/datasets/iris.csv</span> [<span class="dv">10</span> <span class="dv">6</span>]:</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>| <span class="at">:rownames</span> | <span class="at">:sepal-length</span> | <span class="at">:sepal-width</span> | <span class="at">:petal-length</span> | <span class="at">:petal-width</span> |   <span class="at">:species</span> |</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>|----------:|--------------:|-------------:|--------------:|-------------:|------------|</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">27</span> |           <span class="fl">5.0</span> |          <span class="fl">3.4</span> |           <span class="fl">1.6</span> |          <span class="fl">0.4</span> |     setosa |</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">97</span> |           <span class="fl">5.7</span> |          <span class="fl">2.9</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">127</span> |           <span class="fl">6.2</span> |          <span class="fl">2.8</span> |           <span class="fl">4.8</span> |          <span class="fl">1.8</span> |  virginica |</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">92</span> |           <span class="fl">6.1</span> |          <span class="fl">3.0</span> |           <span class="fl">4.6</span> |          <span class="fl">1.4</span> | versicolor |</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">7</span> |           <span class="fl">4.6</span> |          <span class="fl">3.4</span> |           <span class="fl">1.4</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">95</span> |           <span class="fl">5.6</span> |          <span class="fl">2.7</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">125</span> |           <span class="fl">6.7</span> |          <span class="fl">3.3</span> |           <span class="fl">5.7</span> |          <span class="fl">2.1</span> |  virginica |</span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">61</span> |           <span class="fl">5.0</span> |          <span class="fl">2.0</span> |           <span class="fl">3.5</span> |          <span class="fl">1.0</span> | versicolor |</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">73</span> |           <span class="fl">6.3</span> |          <span class="fl">2.5</span> |           <span class="fl">4.9</span> |          <span class="fl">1.5</span> | versicolor |</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">42</span> |           <span class="fl">4.5</span> |          <span class="fl">2.3</span> |           <span class="fl">1.3</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Traces (part of the Plotly spec)</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb66"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example-to-debug</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    (plotly/debug :=traces)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb67"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>[{<span class="at">:y</span> [<span class="fl">5.0</span> <span class="fl">4.6</span> <span class="fl">4.5</span>],</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> <span class="st">"setosa"</span>,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#1B9E77"</span>},</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> [<span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.3</span>],</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">:text</span> <span class="va">nil</span>}</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a> {<span class="at">:y</span> [<span class="fl">5.7</span> <span class="fl">6.1</span> <span class="fl">5.6</span> <span class="fl">5.0</span> <span class="fl">6.3</span>],</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> <span class="st">"versicolor"</span>,</span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#D95F02"</span>},</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> [<span class="fl">2.9</span> <span class="fl">3.0</span> <span class="fl">2.7</span> <span class="fl">2.0</span> <span class="fl">2.5</span>],</span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">:text</span> <span class="va">nil</span>}</span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a> {<span class="at">:y</span> [<span class="fl">6.2</span> <span class="fl">6.7</span>],</span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">:name</span> <span class="st">"virginica"</span>,</span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#7570B3"</span>},</span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb67-38"><a href="#cb67-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb67-39"><a href="#cb67-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb67-40"><a href="#cb67-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb67-41"><a href="#cb67-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">:x</span> [<span class="fl">2.8</span> <span class="fl">3.3</span>],</span>
<span id="cb67-42"><a href="#cb67-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">:text</span> <span class="va">nil</span>}]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Both</p>
<div class="sourceClojure">
<div class="sourceCode" id="cb68"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-&gt;</span> example-to-debug</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>    (plotly/debug {<span class="at">:layers</span> :=layers</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">:traces</span> :=traces})</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    kind/pprint)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="printedClojure">
<div class="sourceCode" id="cb69"><pre class="sourceCode clojure code-with-copy"><code class="sourceCode clojure"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>{<span class="at">:layers</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a> [{<span class="at">:y</span> <span class="at">:sepal-length</span>,</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">:trace-base</span> {<span class="at">:mode</span> <span class="at">:markers</span>, <span class="at">:type</span> <span class="st">"scatter"</span>},</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">:color-type</span> <span class="at">:nominal</span>,</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">:coordinates</span> <span class="at">:2d</span>,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>   <span class="at">:group</span> (<span class="at">:species</span>),</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>   <span class="at">:color</span> <span class="at">:species</span>,</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mark</span> <span class="at">:point</span>,</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>   <span class="at">:size-range</span> [<span class="dv">10</span> <span class="dv">30</span>],</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>   <span class="at">:z</span> <span class="at">:z</span>,</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>   <span class="at">:inferred-group</span> (<span class="at">:species</span>),</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> <span class="at">:sepal-width</span>,</span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>   <span class="at">:dataset</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>   https<span class="at">://vincentarelbundock.github.io/Rdatasets/csv/datasets/iris.csv</span> [<span class="dv">10</span> <span class="dv">6</span>]:</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>| <span class="at">:rownames</span> | <span class="at">:sepal-length</span> | <span class="at">:sepal-width</span> | <span class="at">:petal-length</span> | <span class="at">:petal-width</span> |   <span class="at">:species</span> |</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>|----------:|--------------:|-------------:|--------------:|-------------:|------------|</span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">27</span> |           <span class="fl">5.0</span> |          <span class="fl">3.4</span> |           <span class="fl">1.6</span> |          <span class="fl">0.4</span> |     setosa |</span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">97</span> |           <span class="fl">5.7</span> |          <span class="fl">2.9</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">127</span> |           <span class="fl">6.2</span> |          <span class="fl">2.8</span> |           <span class="fl">4.8</span> |          <span class="fl">1.8</span> |  virginica |</span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">92</span> |           <span class="fl">6.1</span> |          <span class="fl">3.0</span> |           <span class="fl">4.6</span> |          <span class="fl">1.4</span> | versicolor |</span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>|         <span class="dv">7</span> |           <span class="fl">4.6</span> |          <span class="fl">3.4</span> |           <span class="fl">1.4</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">95</span> |           <span class="fl">5.6</span> |          <span class="fl">2.7</span> |           <span class="fl">4.2</span> |          <span class="fl">1.3</span> | versicolor |</span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>|       <span class="dv">125</span> |           <span class="fl">6.7</span> |          <span class="fl">3.3</span> |           <span class="fl">5.7</span> |          <span class="fl">2.1</span> |  virginica |</span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">61</span> |           <span class="fl">5.0</span> |          <span class="fl">2.0</span> |           <span class="fl">3.5</span> |          <span class="fl">1.0</span> | versicolor |</span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">73</span> |           <span class="fl">6.3</span> |          <span class="fl">2.5</span> |           <span class="fl">4.9</span> |          <span class="fl">1.5</span> | versicolor |</span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>|        <span class="dv">42</span> |           <span class="fl">4.5</span> |          <span class="fl">2.3</span> |           <span class="fl">1.3</span> |          <span class="fl">0.3</span> |     setosa |</span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>}],</span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a> <span class="at">:traces</span></span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a> [{<span class="at">:y</span> [<span class="fl">5.0</span> <span class="fl">4.6</span> <span class="fl">4.5</span>],</span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a>   <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"setosa"</span>,</span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#1B9E77"</span>},</span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>   <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>   <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a>   <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>   <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">3.4</span> <span class="fl">3.4</span> <span class="fl">2.3</span>],</span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a>   <span class="at">:text</span> <span class="va">nil</span>}</span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:y</span> [<span class="fl">5.7</span> <span class="fl">6.1</span> <span class="fl">5.6</span> <span class="fl">5.0</span> <span class="fl">6.3</span>],</span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a>   <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"versicolor"</span>,</span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#D95F02"</span>},</span>
<span id="cb69-48"><a href="#cb69-48" aria-hidden="true" tabindex="-1"></a>   <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb69-49"><a href="#cb69-49" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb69-50"><a href="#cb69-50" aria-hidden="true" tabindex="-1"></a>   <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb69-51"><a href="#cb69-51" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb69-52"><a href="#cb69-52" aria-hidden="true" tabindex="-1"></a>   <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb69-53"><a href="#cb69-53" aria-hidden="true" tabindex="-1"></a>   <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb69-54"><a href="#cb69-54" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb69-55"><a href="#cb69-55" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb69-56"><a href="#cb69-56" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">2.9</span> <span class="fl">3.0</span> <span class="fl">2.7</span> <span class="fl">2.0</span> <span class="fl">2.5</span>],</span>
<span id="cb69-57"><a href="#cb69-57" aria-hidden="true" tabindex="-1"></a>   <span class="at">:text</span> <span class="va">nil</span>}</span>
<span id="cb69-58"><a href="#cb69-58" aria-hidden="true" tabindex="-1"></a>  {<span class="at">:y</span> [<span class="fl">6.2</span> <span class="fl">6.7</span>],</span>
<span id="cb69-59"><a href="#cb69-59" aria-hidden="true" tabindex="-1"></a>   <span class="at">:r</span> <span class="va">nil</span>,</span>
<span id="cb69-60"><a href="#cb69-60" aria-hidden="true" tabindex="-1"></a>   <span class="at">:name</span> <span class="st">"virginica"</span>,</span>
<span id="cb69-61"><a href="#cb69-61" aria-hidden="true" tabindex="-1"></a>   <span class="at">:marker</span> {<span class="at">:color</span> <span class="st">"#7570B3"</span>},</span>
<span id="cb69-62"><a href="#cb69-62" aria-hidden="true" tabindex="-1"></a>   <span class="at">:fill</span> <span class="va">nil</span>,</span>
<span id="cb69-63"><a href="#cb69-63" aria-hidden="true" tabindex="-1"></a>   <span class="at">:mode</span> <span class="at">:markers</span>,</span>
<span id="cb69-64"><a href="#cb69-64" aria-hidden="true" tabindex="-1"></a>   <span class="at">:width</span> <span class="va">nil</span>,</span>
<span id="cb69-65"><a href="#cb69-65" aria-hidden="true" tabindex="-1"></a>   <span class="at">:type</span> <span class="st">"scatter"</span>,</span>
<span id="cb69-66"><a href="#cb69-66" aria-hidden="true" tabindex="-1"></a>   <span class="at">:theta</span> <span class="va">nil</span>,</span>
<span id="cb69-67"><a href="#cb69-67" aria-hidden="true" tabindex="-1"></a>   <span class="at">:z</span> <span class="va">nil</span>,</span>
<span id="cb69-68"><a href="#cb69-68" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lon</span> <span class="va">nil</span>,</span>
<span id="cb69-69"><a href="#cb69-69" aria-hidden="true" tabindex="-1"></a>   <span class="at">:lat</span> <span class="va">nil</span>,</span>
<span id="cb69-70"><a href="#cb69-70" aria-hidden="true" tabindex="-1"></a>   <span class="at">:x</span> [<span class="fl">2.8</span> <span class="fl">3.3</span>],</span>
<span id="cb69-71"><a href="#cb69-71" aria-hidden="true" tabindex="-1"></a>   <span class="at">:text</span> <span class="va">nil</span>}]}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="coming-soon" class="level2" data-number="2.20">
<h2 data-number="2.20" class="anchored" data-anchor-id="coming-soon"><span class="header-section-number">2.20</span> Coming soon</h2>
<section id="facets" class="level3" data-number="2.20.1">
<h3 data-number="2.20.1" class="anchored" data-anchor-id="facets"><span class="header-section-number">2.20.1</span> Facets</h3>
<p>(coming soon)</p>
</section>
<section id="scales" class="level3" data-number="2.20.2">
<h3 data-number="2.20.2" class="anchored" data-anchor-id="scales"><span class="header-section-number">2.20.2</span> Scales</h3>
<p>(coming soon)</p>
<div style="background-color:grey;height:2px;width:100%;"></div>
<div><pre><small><small>source: <a href="https://github.com/scicloj/tableplot/blob/main/notebooks/tableplot_book/plotly_walkthrough.clj">notebooks/tableplot_book/plotly_walkthrough.clj</a></small></small></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Preface ðŸ‘‹">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface ðŸ‘‹</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./tableplot_book.plotly_reference.html" class="pagination-link" aria-label="Plotly API reference ðŸ“–">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Plotly API reference ðŸ“–</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>